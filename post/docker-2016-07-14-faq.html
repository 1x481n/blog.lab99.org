<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Docker 问答录（100 问） · 大桥下的蜗牛</title><meta name="description" content="无善无恶心之体，有善有恶意之动，知善知恶是良知，为善去恶是格物。"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/blog.lab99.org/favicon.png"><link rel="stylesheet" href="/blog.lab99.org/css/jekyll.css"><link rel="stylesheet" href="https://cdn.bootcss.com/mermaid/7.0.0/mermaid.min.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/blog.lab99.org/" class="logo"><img src="/blog.lab99.org/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/blog.lab99.org/post/docker-2016-07-14-faq.html" class="post-title-link">Docker 问答录（100 问）</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/blog.lab99.org/tags/docker/" class="post-tag-link">docker</a></li><li class="post-tag-item"><a href="/blog.lab99.org/tags/blog/" class="post-tag-link">blog</a></li><li class="post-tag-item"><a href="/blog.lab99.org/tags/faq/" class="post-tag-link">faq</a></li></ul><div class="post-time">2016年7月14日 星期四</div></div><div class="post-content"><link rel="stylesheet" href="/blog.lab99.org/style/owl.css"><h1 id="qian-yan"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00; <a href="#qian-yan" class="header-anchor">#</a></h1><blockquote>
<p>&#x8FD9;&#x662F;&#x6211;&#x5728; QQ &#x7FA4; <code>325486037</code> &#x91CC;&#xFF0C;&#x78B0;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x53CA;&#x5176;&#x89E3;&#x7B54;&#xFF0C;&#x5927;&#x591A;&#x662F;&#x521D;&#x5B66; Docker &#x65F6;&#x5E38;&#x89C1;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x56DE;&#x7B54;&#xFF0C;&#x662F;&#x57FA;&#x4E8E;&#x6211;&#x5B66;&#x4E60;&#x548C;&#x4F7F;&#x7528; Docker &#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x8BA4;&#x77E5;&#xFF0C;&#x591A;&#x6570;&#x662F;&#x9075;&#x5FAA; Docker &#x5B98;&#x65B9;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x7684;&#x539F;&#x5219;&#x800C;&#x8FDB;&#x884C;&#x7684;&#x89E3;&#x7B54;&#x3002;&#x7531;&#x4E8E;&#x4E2A;&#x4EBA;&#x80FD;&#x529B;&#x6240;&#x9650;&#xFF0C;&#x56DE;&#x7B54;&#x53EF;&#x80FD;&#x4F1A;&#x7247;&#x9762;&#x6216;&#x9519;&#x8BEF;&#x3002;&#x5982;&#x53D1;&#x73B0;&#x9519;&#x8BEF;&#x540E;&#xFF0C;&#x6B22;&#x8FCE;&#x544A;&#x8BC9;&#x6211;&#xFF0C;&#x4EE5;&#x65B9;&#x4FBF;&#x4FEE;&#x6B63;&#x8BE5;&#x6587;&#x6863;&#x907F;&#x514D;&#x8BEF;&#x5BFC;&#x4ED6;&#x4EBA;&#xFF0C;&#x6587;&#x6863;&#x4F1A;&#x4E0D;&#x5B9A;&#x671F;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;</p>
</blockquote>
<p><strong><a href="https://github.com/twang2218/blog.lab99.org/commits/master/source/_posts/docker/2016-07-14-faq.md" target="_blank" rel="noopener">&#x3010;&#x66F4;&#x65B0;&#xFF1A;2017&#x5E74;10&#x6708;31&#x65E5;&#x3011;</a></strong></p>
<!-- toc -->
<ul>
<li><a href="#docker-yin-qing-xiang-guan-wen-ti-67">Docker &#x5F15;&#x64CE;&#x76F8;&#x5173;&#x95EE;&#x9898; <code>(67)</code></a><ul>
<li><a href="#gai-nian-wen-ti-5">&#x6982;&#x5FF5;&#x95EE;&#x9898; <code>(5)</code></a><ul>
<li><a href="#su-zhu-ru-guo-he-rong-qi-xi-tong-bu-tong-de-hua-na-bu-shi-he-xu-ni-ji-yi-yang-yi-ceng-ceng-de-diao-yong-na-me-docker-he-xu-ni-ji-huan-you-shi-me-chai-bie">&#x5BBF;&#x4E3B;&#x5982;&#x679C;&#x548C;&#x5BB9;&#x5668;&#x7CFB;&#x7EDF;&#x4E0D;&#x540C;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E0D;&#x662F;&#x548C;&#x865A;&#x62DF;&#x673A;&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x5C42;&#x5C42;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x90A3;&#x4E48; Docker &#x548C;&#x865A;&#x62DF;&#x673A;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#xFF1F;</a></li>
<li><a href="#docker-zi-liao-hao-shao-a-wang-shang-de-ming-ling-zen-me-bu-neng-yong">Docker &#x8D44;&#x6599;&#x597D;&#x5C11;&#x554A;&#xFF1F;&#x7F51;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x600E;&#x4E48;&#x4E0D;&#x80FD;&#x7528;&#xFF1F;</a></li>
<li><a href="#ru-he-xuan-ze-docker-shu-ji">&#x5982;&#x4F55;&#x9009;&#x62E9; Docker &#x4E66;&#x7C4D;&#xFF1F;</a></li>
<li><a href="#zong-shuo-kan-guan-fang-wen-dang-ke-shi-docker-guan-wang-wen-dang-jing-chang-bei-qiang-kan-bu-liao-zen-me-ban">&#x603B;&#x8BF4;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x662F; Docker &#x5B98;&#x7F51;&#x6587;&#x6863;&#x7ECF;&#x5E38;&#x88AB;&#x5899;&#xFF0C;&#x770B;&#x4E0D;&#x4E86;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#docker-1-8-yi-hou-ban-ben-du-you-shi-me-gai-jin-me">Docker 1.8 &#x4EE5;&#x540E;&#x7248;&#x672C;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x6539;&#x8FDB;&#x4E48;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#an-zhuang-pei-zhi-wen-ti-8">&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x95EE;&#x9898; <code>(8)</code></a><ul>
<li><a href="#docker-zen-me-zhe-me-duo-ruan-jian-wo-gai-zhuang-na-ge">Docker &#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x591A;&#x8F6F;&#x4EF6;&#xFF0C;&#x6211;&#x8BE5;&#x88C5;&#x54EA;&#x4E2A;&#xFF1F;</a></li>
<li><a href="#shi-zhi-jie-yong-yum-apt-get-an-zhuang-docker-ma">&#x662F;&#x76F4;&#x63A5;&#x7528; <code>yum</code> / <code>apt-get</code> &#x5B89;&#x88C5; Docker &#x5417;&#xFF1F;</a></li>
<li><a href="#bu-shi-du-yi-jing-fa-bu-docker-17-07-liao-me-wo-zen-me-sheng-ji-dao-zui-xin-huan-shi-17-05-ya">&#x4E0D;&#x662F;&#x90FD;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03; Docker 17.07 &#x4E86;&#x4E48;&#xFF1F;&#x6211;&#x600E;&#x4E48;&#x5347;&#x7EA7;&#x5230;&#x6700;&#x65B0;&#x8FD8;&#x662F; 17.05 &#x5440;&#xFF1F;</a></li>
<li><a href="#docker-pull-hao-man-a-zen-me-ban"><code>docker pull</code> &#x597D;&#x6162;&#x554A;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#zen-me-xiu-gai-liao-docker-fu-wu-pei-zhi-hou-bu-qi-zuo-yong">&#x600E;&#x4E48;&#x4FEE;&#x6539;&#x4E86; docker &#x670D;&#x52A1;&#x914D;&#x7F6E;&#x540E;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF1F;</a></li>
<li><a href="#ru-guo-docker-sheng-ji-huo-zhe-chong-qi-de-hua-na-rong-qi-shi-bu-shi-du-hui-bei-ting-diao-ran-hou-chong-qi-a">&#x5982;&#x679C; Docker &#x5347;&#x7EA7;&#x6216;&#x8005;&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x5BB9;&#x5668;&#x662F;&#x4E0D;&#x662F;&#x90FD;&#x4F1A;&#x88AB;&#x505C;&#x6389;&#x7136;&#x540E;&#x91CD;&#x542F;&#x554A;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-zhi-xing-docker-ming-ling-hui-bao-permission-denied-mei-quan-xian-de-cuo-wu-a">&#x4E3A;&#x4EC0;&#x4E48;&#x6267;&#x884C; docker &#x547D;&#x4EE4;&#x4F1A;&#x62A5; <code>permission denied</code> &#x6CA1;&#x6743;&#x9650;&#x7684;&#x9519;&#x8BEF;&#x554A;&#xFF1F;</a></li>
<li><a href="#fu-wu-qi-shang-xian-hou-zen-me-fa-xian-zong-you-ge-xmrig-de-rong-qi-zai-pao-shan-liao-huan-chu-lai-zhe-shi-shi-me-gui">&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x600E;&#x4E48;&#x53D1;&#x73B0;&#x603B;&#x6709;&#x4E2A; <code>xmrig</code> &#x7684;&#x5BB9;&#x5668;&#x5728;&#x8DD1;&#xFF0C;&#x5220;&#x4E86;&#x8FD8;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#wang-luo-wen-ti-13">&#x7F51;&#x7EDC;&#x95EE;&#x9898; <code>(13)</code></a><ul>
<li><a href="#zen-me-gu-ding-rong-qi-ip-di-zhi-mei-ci-chong-qi-rong-qi-du-yao-bian-hua-ip-di-zhi-zen-me-ban">&#x600E;&#x4E48;&#x56FA;&#x5B9A;&#x5BB9;&#x5668; IP &#x5730;&#x5740;&#xFF1F;&#x6BCF;&#x6B21;&#x91CD;&#x542F;&#x5BB9;&#x5668;&#x90FD;&#x8981;&#x53D8;&#x5316; IP &#x5730;&#x5740;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#ru-he-xiu-gai-rong-qi-de-etc-hosts-wen-jian">&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x7684; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#xFF1F;</a></li>
<li><a href="#zen-me-ying-she-su-zhu-duan-kou-dockerfile-zhong-de-expose-he-docker-run-p-you-sha-qu-bie">&#x600E;&#x4E48;&#x6620;&#x5C04;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&#xFF1F;<code>Dockerfile</code> &#x4E2D;&#x7684;<code>EXPOSE</code>&#x548C; <code>docker run -p</code> &#x6709;&#x5565;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="#wo-yao-ying-she-hao-ji-bai-ge-duan-kou-nan-dao-yao-yi-ge-ge-p-me">&#x6211;&#x8981;&#x6620;&#x5C04;&#x597D;&#x51E0;&#x767E;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x96BE;&#x9053;&#x8981;&#x4E00;&#x4E2A;&#x4E2A; <code>-p</code> &#x4E48;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-p-hou-huan-shi-wu-fa-tong-guo-ying-she-duan-kou-fang-wen-rong-qi-li-mian-de-fu-wu">&#x4E3A;&#x4EC0;&#x4E48; <code>-p</code> &#x540E;&#x8FD8;&#x662F;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#x91CC;&#x9762;&#x7684;&#x670D;&#x52A1;&#xFF1F;</a></li>
<li><a href="#vethxxxx-zhe-chong-xu-ni-wang-qia-he-rong-qi-de-dui-ying-guan-xi-cong-na-li-kan"><code>vethxxxx</code> &#x8FD9;&#x79CD;&#x865A;&#x62DF;&#x7F51;&#x5361;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x4ECE;&#x54EA;&#x91CC;&#x770B;&#xFF1F;</a></li>
<li><a href="#ru-he-rang-yi-ge-rong-qi-lian-jie-liang-ge-wang-luo">&#x5982;&#x4F55;&#x8BA9;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x8FDE;&#x63A5;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#xFF1F;</a></li>
<li><a href="#docker-duo-su-zhu-wang-luo-zen-me-pei-zhi">Docker &#x591A;&#x5BBF;&#x4E3B;&#x7F51;&#x7EDC;&#x600E;&#x4E48;&#x914D;&#x7F6E;&#xFF1F;</a></li>
<li><a href="#ming-ming-docker-network-ls-zhong-kan-dao-liao-jian-li-de-overlay-wang-luo-zen-me-docker-run-huan-shuo-wang-luo-bu-cun-zai-a">&#x660E;&#x660E; <code>docker network ls</code> &#x4E2D;&#x770B;&#x5230;&#x4E86;&#x5EFA;&#x7ACB;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x600E;&#x4E48; <code>docker run</code> &#x8FD8;&#x8BF4;&#x7F51;&#x7EDC;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F;</a></li>
<li><a href="#shi-yong-swarm-mode-de-shi-kan-dao-you-ge-jiao-ingress-de-overlay-wang-luo-ta-he-zi-ji-chuang-jian-de-wang-luo-you-shi-me-qu-bie">&#x4F7F;&#x7528; <code>Swarm Mode</code> &#x7684;&#x65F6;&#xFF0C;&#x770B;&#x5230;&#x6709;&#x4E2A;&#x53EB; <code>ingress</code> &#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x5B83;&#x548C;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x7F51;&#x7EDC;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="#ting-shuo-link-guo-shi-bu-zai-yong-liao-na-rong-qi-hu-lian-fu-wu-fa-xian-zen-me-ban">&#x542C;&#x8BF4; <code>--link</code> &#x8FC7;&#x65F6;&#x4E0D;&#x518D;&#x7528;&#x4E86;&#xFF1F;&#x90A3;&#x5BB9;&#x5668;&#x4E92;&#x8054;&#x3001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#shi-yong-hbase-hadoop-de-shi-hou-fan-xiang-jie-xi-zong-shi-bu-dui-zen-me-ban">&#x4F7F;&#x7528; HBase/Hadoop &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x603B;&#x662F;&#x4E0D;&#x5BF9;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#rong-qi-zen-me-qu-su-zhu-ji-ip-a">&#x5BB9;&#x5668;&#x600E;&#x4E48;&#x53D6;&#x5BBF;&#x4E3B;&#x673A; IP &#x554A;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#cun-chu-wen-ti-11">&#x5B58;&#x50A8;&#x95EE;&#x9898; <code>(11)</code></a><ul>
<li><a href="#rong-qi-ci-pan-ke-yi-xian-zhi-pei-e-me">&#x5BB9;&#x5668;&#x78C1;&#x76D8;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x914D;&#x989D;&#x4E48;&#xFF1F;</a></li>
<li><a href="#rong-qi-nei-de-shu-ju-gai-bao-cun-zai-jing-xiang-li-huan-shi-wu-li-ji-li">&#x5BB9;&#x5668;&#x5185;&#x7684;&#x6570;&#x636E;&#x8BE5;&#x4FDD;&#x5B58;&#x5728;&#x955C;&#x50CF;&#x91CC;&#x8FD8;&#x662F;&#x7269;&#x7406;&#x673A;&#x91CC;&#xFF1F;</a></li>
<li><a href="#kan-dao-zong-shuo-yao-bao-chi-rong-qi-wu-zhuang-tai-na-shi-me-shi-wu-zhuang-tai">&#x770B;&#x5230;&#x603B;&#x8BF4;&#x8981;&#x4FDD;&#x6301;&#x5BB9;&#x5668;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4EC0;&#x4E48;&#x662F;&#x65E0;&#x72B6;&#x6001;&#xFF1F;</a></li>
<li><a href="#shu-ju-rong-qi-shu-ju-juan-ming-ming-juan-ni-ming-juan-gua-zai-mu-lu-zhe-xie-du-you-shi-me-qu-bie">&#x6570;&#x636E;&#x5BB9;&#x5668;&#x3001;&#x6570;&#x636E;&#x5377;&#x3001;&#x547D;&#x540D;&#x5377;&#x3001;&#x533F;&#x540D;&#x5377;&#x3001;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x8FD9;&#x4E9B;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="#juan-he-gua-zai-mu-lu-you-shi-me-qu-bie">&#x5377;&#x548C;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-bang-ding-liao-su-zhu-de-wen-jian-dao-rong-qi-su-zhu-xiu-gai-liao-wen-jian-rong-qi-nei-kan-dao-de-huan-shi-jiu-de-nei-rong-a">&#x4E3A;&#x4EC0;&#x4E48;&#x7ED1;&#x5B9A;&#x4E86;&#x5BBF;&#x4E3B;&#x7684;&#x6587;&#x4EF6;&#x5230;&#x5BB9;&#x5668;&#xFF0C;&#x5BBF;&#x4E3B;&#x4FEE;&#x6539;&#x4E86;&#x6587;&#x4EF6;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x770B;&#x5230;&#x7684;&#x8FD8;&#x662F;&#x65E7;&#x7684;&#x5185;&#x5BB9;&#x554A;&#xFF1F;</a></li>
<li><a href="#duo-ge-docker-rong-qi-zhi-jian-gong-xiang-shu-ju-zen-me-ban-nfs">&#x591A;&#x4E2A; Docker &#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x600E;&#x4E48;&#x529E;&#xFF1F;NFS &#xFF1F;</a></li>
<li><a href="#ji-ran-yi-ge-rong-qi-yi-ge-ying-yong-na-me-wo-xiang-zai-gai-rong-qi-zhong-yong-ji-hua-ren-wu-cron-zen-me-ban">&#x65E2;&#x7136;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x60F3;&#x5728;&#x8BE5;&#x5BB9;&#x5668;&#x4E2D;&#x7528;&#x8BA1;&#x5212;&#x4EFB;&#x52A1; <code>cron</code> &#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#ru-he-chu-shi-hua-juan">&#x5982;&#x4F55;&#x521D;&#x59CB;&#x5316;&#x5377;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-shuo-shu-ju-ku-bu-gua-he-fang-zai-docker-rong-qi-li-yun-xing">&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x9002;&#x5408;&#x653E;&#x5728; Docker &#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C;&#xFF1F;</a></li>
<li><a href="#ru-he-lie-chu-rong-qi-he-suo-shi-yong-de-juan-de-guan-xi">&#x5982;&#x4F55;&#x5217;&#x51FA;&#x5BB9;&#x5668;&#x548C;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x5377;&#x7684;&#x5173;&#x7CFB;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#jing-xiang-wen-ti-17">&#x955C;&#x50CF;&#x95EE;&#x9898; <code>(17)</code></a><ul>
<li><a href="#docker-pull-xia-lai-de-jing-xiang-wen-jian-du-zai-na"><code>docker pull</code> &#x4E0B;&#x6765;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x90FD;&#x5728;&#x54EA;&#xFF1F;</a></li>
<li><a href="#docker-images-ming-ling-xian-shi-de-jing-xiang-zhan-liao-hao-da-de-kong-jian-zen-me-ban-mei-ci-du-shi-xia-zai-zhe-me-da-de-jing-xiang"><code>docker images</code> &#x547D;&#x4EE4;&#x663E;&#x793A;&#x7684;&#x955C;&#x50CF;&#x5360;&#x4E86;&#x597D;&#x5927;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x4E0B;&#x8F7D;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x955C;&#x50CF;&#xFF1F;</a></li>
<li><a href="#docker-images-a-hou-xian-shi-liao-hao-duo-none-de-jing-xiang-du-shi-shi-me-ya-neng-shan-me"><code>docker images -a</code> &#x540E;&#x663E;&#x793A;&#x4E86;&#x597D;&#x591A; <code>&lt;none&gt;</code> &#x7684;&#x955C;&#x50CF;&#xFF1F;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x5440;&#xFF1F;&#x80FD;&#x5220;&#x4E48;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-docker-hub-de-jing-xiang-chi-cun-he-docker-images-bu-yi-zhi">&#x4E3A;&#x4EC0;&#x4E48; Docker Hub &#x7684;&#x955C;&#x50CF;&#x5C3A;&#x5BF8;&#x548C; <code>docker images</code> &#x4E0D;&#x4E00;&#x81F4;&#xFF1F;</a></li>
<li><a href="#docker-commit-zen-me-yong-a"><code>docker commit</code> &#x600E;&#x4E48;&#x7528;&#x554A;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-shuo-bu-yao-shi-yong-import-export-save-load-commit-lai-gou-jian-jing-xiang">&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x4E0D;&#x8981;&#x4F7F;&#x7528; <code>import</code>, <code>export</code>, <code>save</code>, <code>load</code>, <code>commit</code> &#x6765;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF1F;</a></li>
<li><a href="#dockerfile-zen-me-xie"><code>Dockerfile</code> &#x600E;&#x4E48;&#x5199;&#xFF1F;</a></li>
<li><a href="#dockerfile-jiu-shi-shell-jiao-ben-ba-na-wo-dong-yi-xing-xing-ba-xu-yao-zhuang-de-dong-xi-du-xie-jin-qu-bu-jiu-xing-liao"><code>Dockerfile</code> &#x5C31;&#x662F; <code>shell</code> &#x811A;&#x672C;&#x5427;&#xFF1F;&#x90A3;&#x6211;&#x61C2;&#xFF0C;&#x4E00;&#x884C;&#x884C;&#x628A;&#x9700;&#x8981;&#x88C5;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x5199;&#x8FDB;&#x53BB;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x3002;</a></li>
<li><a href="#na-wo-ba-suo-you-ming-ling-du-he-bing-dao-yi-ge-run-jiu-dui-liao-ba">&#x90A3;&#x6211;&#x628A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A; <code>RUN</code> &#x5C31;&#x5BF9;&#x4E86;&#x5427;&#xFF1F;</a></li>
<li><a href="#context-dao-di-shi-yi-ge-shi-me-gai-nian"><code>context</code> &#x5230;&#x5E95;&#x662F;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x6982;&#x5FF5;&#xFF1F;</a></li>
<li><a href="#entrypoint-he-cmd-dao-di-you-shi-me-bu-tong"><code>ENTRYPOINT</code> &#x548C; <code>CMD</code> &#x5230;&#x5E95;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x540C;&#xFF1F;</a></li>
<li><a href="#na-dao-yi-ge-jing-xiang-ru-he-huo-de-jing-xiang-de-dockerfile">&#x62FF;&#x5230;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5982;&#x4F55;&#x83B7;&#x5F97;&#x955C;&#x50CF;&#x7684; <code>Dockerfile</code> &#xFF1F;</a></li>
<li><a href="#zai-ni-de-lnmp-de-li-zi-zhong-php-de-dockerfile-li-mian-de-gou-jian-yi-lai-he-yun-xing-yi-lai-du-shi-shi-me-yi-si">&#x5728;&#x4F60;&#x7684; LNMP &#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;PHP &#x7684; <code>Dockerfile</code> &#x91CC;&#x9762;&#x7684; &#x201C;&#x6784;&#x5EFA;&#x4F9D;&#x8D56;&#x201D; &#x548C; &#x201C;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&#x201D; &#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F;</a></li>
<li><a href="#ying-yong-dai-ma-shi-ying-gai-gua-zai-su-zhu-mu-lu-huan-shi-fang-ru-jing-xiang-nei">&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x662F;&#x5E94;&#x8BE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x8FD8;&#x662F;&#x653E;&#x5165;&#x955C;&#x50CF;&#x5185;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-zai-dockerfile-zhong-zhi-xing-dao-ru-sql-service-xxx-start-bu-guan-yong">&#x4E3A;&#x4EC0;&#x4E48;&#x5728; <code>Dockerfile</code> &#x4E2D;&#x6267;&#x884C;&#xFF08;&#x5BFC;&#x5165; <code>.sql</code>&#x3001;<code>service xxx start</code>&#xFF09;&#x4E0D;&#x7BA1;&#x7528;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-ji-yu-alpine-de-jing-xiang-na-me-xiao-wo-ke-yi-du-huan-cheng-ji-yu-alpine-de-jing-xiang-me">&#x4E3A;&#x4EC0;&#x4E48;&#x57FA;&#x4E8E; Alpine &#x7684;&#x955C;&#x50CF;&#x90A3;&#x4E48;&#x5C0F;&#xFF1F;&#x6211;&#x53EF;&#x4EE5;&#x90FD;&#x6362;&#x6210;&#x57FA;&#x4E8E; Alpine &#x7684;&#x955C;&#x50CF;&#x4E48;&#xFF1F;</a></li>
<li><a href="#ke-yi-kan-dao-jing-xiang-ge-ceng-de-yi-lai-guan-xi-me">&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x955C;&#x50CF;&#x5404;&#x5C42;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x4E48;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#ri-zhi-wen-ti-2">&#x65E5;&#x5FD7;&#x95EE;&#x9898; <code>(2)</code></a><ul>
<li><a href="#docker-ri-zhi-du-zai-na-li-zen-me-shou-ji">Docker &#x65E5;&#x5FD7;&#x90FD;&#x5728;&#x54EA;&#x91CC;&#xFF1F;&#x600E;&#x4E48;&#x6536;&#x96C6;&#xFF1F;</a></li>
<li><a href="#bu-tong-rong-qi-de-ri-zhi-hui-ju-dao-fluentd-hou-ru-he-qu-fen">&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x6C47;&#x805A;&#x5230; <code>fluentd</code> &#x540E;&#x5982;&#x4F55;&#x533A;&#x5206;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#shi-yong-wen-ti-11">&#x4F7F;&#x7528;&#x95EE;&#x9898; <code>(11)</code></a><ul>
<li><a href="#wei-shi-me-rong-qi-yi-yun-xing-jiu-tui-chu-a">&#x4E3A;&#x4EC0;&#x4E48;&#x5BB9;&#x5668;&#x4E00;&#x8FD0;&#x884C;&#x5C31;&#x9000;&#x51FA;&#x554A;&#xFF1F;</a></li>
<li><a href="#ru-he-zai-docker-rong-qi-nei-shi-yong-docker-ming-ling-bi-ru-zai-jenkins-rong-qi-zhong">&#x5982;&#x4F55;&#x5728; Docker  &#x5BB9;&#x5668;&#x5185;&#x4F7F;&#x7528; <code>docker</code> &#x547D;&#x4EE4;(&#x6BD4;&#x5982;&#x5728; Jenkins &#x5BB9;&#x5668;&#x4E2D;)&#xFF1F;</a></li>
<li><a href="#docker-rong-qi-ru-he-sui-xi-tong-yi-tong-qi-dong">Docker &#x5BB9;&#x5668;&#x5982;&#x4F55;&#x968F;&#x7CFB;&#x7EDF;&#x4E00;&#x540C;&#x542F;&#x52A8;&#xFF1F;</a></li>
<li><a href="#docker-stats-xian-shi-de-zhi-you-rong-qi-id-zen-me-cai-neng-xian-shi-rong-qi-ming-zi"><code>docker stats</code> &#x663E;&#x793A;&#x7684;&#x53EA;&#x6709;&#x5BB9;&#x5668;ID&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x663E;&#x793A;&#x5BB9;&#x5668;&#x540D;&#x5B57;&#xFF1F;</a></li>
<li><a href="#wo-yong-de-shi-a-li-yun-ubuntu-14-04-zhu-ji-nei-he-huan-shi-3-13-zen-me-ban">&#x6211;&#x7528;&#x7684;&#x662F;&#x963F;&#x91CC;&#x4E91; <code>Ubuntu 14.04</code> &#x4E3B;&#x673A;&#xFF0C;&#x5185;&#x6838;&#x8FD8;&#x662F;<code>3.13</code>&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#ru-he-dong-tai-xiu-gai-nei-cun-xian-zhi">&#x5982;&#x4F55;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF1F;</a></li>
<li><a href="#jing-chang-zai-ge-chong-docker-ming-ling-li-kan-dao-label-label-shi-shi-me-gan-shi-me-yong-de">&#x7ECF;&#x5E38;&#x5728;&#x5404;&#x79CD; <code>Docker</code> &#x547D;&#x4EE4;&#x91CC;&#x770B;&#x5230; <code>--label</code>&#xFF0C;<code>label</code> &#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x5E72;&#x4EC0;&#x4E48;&#x7528;&#x7684;&#xFF1F;</a></li>
<li><a href="#du-shuo-bu-yao-yong-root-qu-yun-xing-fu-wu-dan-wo-kan-dao-de-dockerfile-du-shi-yong-root-qu-yun-xing-zhe-bu-an-quan-ba">&#x90FD;&#x8BF4;&#x4E0D;&#x8981;&#x7528; <code>root</code> &#x53BB;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x6211;&#x770B;&#x5230;&#x7684; <code>Dockerfile</code> &#x90FD;&#x662F;&#x7528; <code>root</code> &#x53BB;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x5427;&#xFF1F;</a></li>
<li><a href="#wo-zai-rong-qi-li-yun-xing-systemctl-start-xxx-zen-me-bao-cuo-a">&#x6211;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C; <code>systemctl start xxx</code> &#x600E;&#x4E48;&#x62A5;&#x9519;&#x554A;&#xFF1F;</a></li>
<li><a href="#rong-qi-nei-de-shi-jian-he-su-zhu-bu-yi-zhi-zen-me-tong-bu-a">&#x5BB9;&#x5668;&#x5185;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x5BBF;&#x4E3B;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x600E;&#x4E48;&#x540C;&#x6B65;&#x554A;&#xFF1F;</a></li>
<li><a href="#wo-xiang-rang-wo-de-cheng-xu-ping-hua-tui-chu-wei-shi-me-jie-huo-sigterm-xin-hao-bu-guan-yong-a">&#x6211;&#x60F3;&#x8BA9;&#x6211;&#x7684;&#x7A0B;&#x5E8F;&#x5E73;&#x6ED1;&#x9000;&#x51FA;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x622A;&#x83B7; <code>SIGTERM</code> &#x4FE1;&#x53F7;&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF1F;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#docker-compose-xiang-guan-wen-ti-2">Docker Compose &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(2)</code></a><ul>
<li><a href="#ni-na-ge-lnmp-li-zi-zhong-de-docker-compose-yml-zhong-you-hao-duo-networks-du-shi-shi-me-yi-si-a">&#x4F60;&#x90A3;&#x4E2A; <code>LNMP</code> &#x4F8B;&#x5B50;&#x4E2D;&#x7684; <code>docker-compose.yml</code> &#x4E2D;&#x6709;&#x597D;&#x591A; <code>networks</code>&#xFF0C;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x554A;&#xFF1F;</a></li>
<li><a href="#shi-yong-compose-de-shi-hou-peng-dao-an-http-request-took-too-long-to-complete-cuo-wu-zen-me-ban">&#x4F7F;&#x7528; Compose &#x7684;&#x65F6;&#x5019;&#x78B0;&#x5230; &#x201C;An HTTP request took too long to complete&#x2026;.&#x201D; &#x9519;&#x8BEF;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#docker-swarm-xiang-guan-wen-ti-8">Docker Swarm &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(8)</code></a><ul>
<li><a href="#wo-de-docker-ban-ben-shi-1-12-qing-wen-wo-pao-de-shi-yi-dai-swarm-huan-shi-er-dai-swarm-a">&#x6211;&#x7684; Docker &#x7248;&#x672C;&#x662F; 1.12&#xFF0C;&#x8BF7;&#x95EE;&#x6211;&#x8DD1;&#x7684;&#x662F;&#x4E00;&#x4EE3; Swarm &#x8FD8;&#x662F;&#x4E8C;&#x4EE3; Swarm &#x554A;&#xFF1F;</a></li>
<li><a href="#swarm-huan-jing-zhong-zen-me-zhi-ding-mou-ge-rong-qi-zai-zhi-ding-de-su-zhu-shang-yun-xing-ni">Swarm&#x73AF;&#x5883;&#x4E2D;&#x600E;&#x4E48;&#x6307;&#x5B9A;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5BBF;&#x4E3B;&#x4E0A;&#x8FD0;&#x884C;&#x5462;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-swarm-ji-qun-de-overlay-network-kua-su-zhu-wu-fa-hu-fang">&#x4E3A;&#x4EC0;&#x4E48; Swarm &#x96C6;&#x7FA4;&#x7684; overlay network &#x8DE8;&#x5BBF;&#x4E3B;&#x65E0;&#x6CD5;&#x4E92;&#x8BBF;&#xFF1F;</a></li>
<li><a href="#docker-er-dai-swarm-ji-swarm-mode-docker-service-create-bu-ke-yi-shi-yong-v-na-zen-me-shi-yong-juan-volume">Docker &#x4E8C;&#x4EE3;Swarm (&#x65E2; Swarm Mode)&#xFF0C;<code>docker service create</code> &#x4E0D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>-v</code> &#x90A3;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x5377;(Volume)&#xFF1F;</a></li>
<li><a href="#dui-yu-liang-jie-dian-ji-qun-lai-shuo-replicas-2-he-mode-global-shi-bu-shi-yi-ge-yi-si">&#x5BF9;&#x4E8E;&#x4E24;&#x8282;&#x70B9;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#xFF0C;<code>--replicas=2</code> &#x548C; <code>--mode=global</code> &#x662F;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x610F;&#x601D;&#xFF1F;</a></li>
<li><a href="#yi-dai-swarm-de-shi-hou-ke-yi-yong-docker-run-a-er-dai-zen-me-you-nong-ge-docker-service-create-chu-lai-wei-shi-me-yao-duo-ci-yi-ju">&#x4E00;&#x4EE3; Swarm &#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528; <code>docker run</code> &#x554A;&#xFF0C;&#x4E8C;&#x4EE3;&#x600E;&#x4E48;&#x53C8;&#x5F04;&#x4E2A; <code>docker service create</code> &#x51FA;&#x6765;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x591A;&#x6B64;&#x4E00;&#x4E3E;&#xFF1F;</a></li>
<li><a href="#docker-service-ps-li-mian-zong-shi-you-yi-dui-shi-bai-huo-zhe-shutdown-de-li-shi-rong-qi-zen-me-shan-a"><code>docker service ps</code> &#x91CC;&#x9762;&#x603B;&#x662F;&#x6709;&#x4E00;&#x5806;&#x5931;&#x8D25;&#x6216;&#x8005;shutdown&#x7684;&#x5386;&#x53F2;&#x5BB9;&#x5668;&#xFF0C;&#x600E;&#x4E48;&#x5220;&#x554A;&#xFF1F;</a></li>
<li><a href="#zen-me-cai-neng-rang-docker-service-create-chuang-jian-de-fu-wu-zheng-chang-tui-chu-shi-bu-chong-qi-a">&#x600E;&#x4E48;&#x624D;&#x80FD;&#x8BA9; <code>docker service create</code> &#x521B;&#x5EFA;&#x7684;&#x670D;&#x52A1;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#x4E0D;&#x91CD;&#x542F;&#x554A;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#docker-machine-xiang-guan-wen-ti-5">Docker Machine &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(5)</code></a><ul>
<li><a href="#da-kai-ming-ling-xing-hou-kan-dao-xia-zai-sha-boot2docker-iso-ran-hou-zong-shi-chao-shi-shi-bai-zen-me-ban">&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x884C;&#x540E;&#xFF0C;&#x770B;&#x5230;&#x4E0B;&#x8F7D;&#x5565; <code>boot2docker.iso</code>&#xFF0C;&#x7136;&#x540E;&#x603B;&#x662F;&#x8D85;&#x65F6;&#x5931;&#x8D25;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#zhuang-wan-docker-toolbox-hou-fa-xian-xia-zai-jing-xiang-su-du-tai-man-shi-bu-shi-xu-yao-xiu-gai-shi-me-pei-zhi-wen-jian">&#x88C5;&#x5B8C; Docker Toolbox &#x540E;&#x53D1;&#x73B0;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1F;</a></li>
<li><a href="#ru-he-zai-docker-toolbox-zhong-chuang-jian-de-default-xu-ni-ji-zhong-tian-jia-docker-opts-zhi-lei-de-pei-zhi">&#x5982;&#x4F55;&#x5728; Docker Toolbox &#x4E2D;&#x521B;&#x5EFA;&#x7684; <code>default</code> &#x865A;&#x62DF;&#x673A;&#x4E2D;&#x6DFB;&#x52A0;<code>DOCKER_OPTS</code>&#x4E4B;&#x7C7B;&#x7684;&#x914D;&#x7F6E;&#xFF1F;</a></li>
<li><a href="#docker-machine-chuang-jian-de-zhu-ji-zen-me-zhi-jie-ssh-jin-qu-gai-liao-root-mi-ma-hao-xiang-ye-mei-yong"><code>docker-machine</code> &#x521B;&#x5EFA;&#x7684;&#x4E3B;&#x673A;&#x600E;&#x4E48;&#x76F4;&#x63A5; <code>ssh</code> &#x8FDB;&#x53BB;&#xFF1F;&#x6539;&#x4E86; <code>root</code> &#x5BC6;&#x7801;&#x597D;&#x50CF;&#x4E5F;&#x6CA1;&#x7528;&#xFF1F;</a></li>
<li><a href="#docker-machine-shi-yong-d-generic-shi-zhi-ding-yong-hu-generic-ssh-user-hou-fa-xian-yao-sudo-mi-ma-jie-guo-bao-cuo-tui-chu-zhe-shi-zen-me-hui-shi"><code>docker-machine</code> &#x4F7F;&#x7528; <code>-d generic</code> &#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x7528;&#x6237; <code>--generic-ssh-user</code> &#x540E;&#x53D1;&#x73B0;&#x8981; <code>sudo</code> &#x5BC6;&#x7801;&#xFF0C;&#x7ED3;&#x679C;&#x62A5;&#x9519;&#x9000;&#x51FA;&#xFF0C;&#x8FD9;&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#docker-registry-xiang-guan-wen-ti-10">Docker Registry &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(10)</code></a><ul>
<li><a href="#wo-docker-push-de-shi-hou-zen-me-bao-authentication-required-cuo-wu">&#x6211; <code>docker push</code> &#x7684;&#x65F6;&#x5019;&#x600E;&#x4E48;&#x62A5; <code>authentication required</code> &#x9519;&#x8BEF;&#xFF1F;</a></li>
<li><a href="#wei-shi-me-wo-docker-login-shi-bai-liao-wo-zhu-ce-yong-hu-liao-zai-wang-zhan-deng-lu-ye-mei-wen-ti-ya">&#x4E3A;&#x4EC0;&#x4E48;&#x6211; <code>docker login</code> &#x5931;&#x8D25;&#x4E86;&#xFF1F;&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x4E86;&#xFF0C;&#x5728;&#x7F51;&#x7AD9;&#x767B;&#x5F55;&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x5440;&#xFF1F;</a></li>
<li><a href="#wo-zhu-ce-yong-hu-pinkman-liao-zen-me-huan-shi-wu-fa-docker-push-mrwhite-xxx-a">&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237; <code>pinkman</code> &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x8FD8;&#x662F;&#x65E0;&#x6CD5; <code>docker push mrwhite/xxx</code> &#x554A;&#xFF1F;</a></li>
<li><a href="#bu-guan-yong-a-wo-zhe-hui-docker-push-pinkman-xxx-liao-zen-me-gao-su-wo-jing-xiang-bu-cun-zai-a">&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF0C;&#x6211;&#x8FD9;&#x56DE; <code>docker push pinkman/xxx</code> &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x544A;&#x8BC9;&#x6211;&#x955C;&#x50CF;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F;</a></li>
<li><a href="#docker-push-dao-si-you-registry-zong-shi-bu-cheng-gong-zen-me-ban"><code>docker push</code> &#x5230;&#x79C1;&#x6709; <code>registry</code> &#x603B;&#x662F;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</a></li>
<li><a href="#wo-docker-push-liao-hen-duo-jing-xiang-dao-si-you-de-registry-shang-zen-me-cai-neng-cha-kan-shang-mian-du-you-sha-huo-zhe-sou-suo">&#x6211; <code>docker push</code> &#x4E86;&#x5F88;&#x591A;&#x955C;&#x50CF;&#x5230;&#x79C1;&#x6709;&#x7684; <code>registry</code> &#x4E0A;&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x67E5;&#x770B;&#x4E0A;&#x9762;&#x90FD;&#x6709;&#x5565;&#xFF1F;&#x6216;&#x8005;&#x641C;&#x7D22;&#xFF1F;</a></li>
<li><a href="#docker-search-wei-shi-me-mei-you-ban-fa-zai-si-you-registry-zhong-yong"><code>docker search</code> &#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5728;&#x79C1;&#x6709; <code>Registry</code> &#x4E2D;&#x7528;&#xFF1F;</a></li>
<li><a href="#ru-he-shan-chu-si-you-registry-zhong-de-jing-xiang">&#x5982;&#x4F55;&#x5220;&#x9664;&#x79C1;&#x6709; <code>registry</code> &#x4E2D;&#x7684;&#x955C;&#x50CF;&#xFF1F;</a></li>
<li><a href="#shi-yong-guo-nei-jing-xiang-huan-shi-man-gong-si-nei-hao-duo-docker-zhu-ji-du-xu-yao-qu-chong-fu-xia-zai-jing-xiang-zha-ban">&#x4F7F;&#x7528;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x8FD8;&#x662F;&#x6162;&#xFF0C;&#x516C;&#x53F8;&#x5185;&#x597D;&#x591A; docker &#x4E3B;&#x673A;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x53BB;&#x91CD;&#x590D;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x548B;&#x529E;&#xFF1F;</a></li>
<li><a href="#zi-ji-jia-de-registry-zen-me-ren-he-yong-hu-du-ke-yi-qu-dao-jing-xiang-zhe-bu-an-quan-a">&#x81EA;&#x5DF1;&#x67B6;&#x7684; <code>registry</code> &#x600E;&#x4E48;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x90FD;&#x53EF;&#x4EE5;&#x53D6;&#x5230;&#x955C;&#x50CF;&#xFF1F;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x554A;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#xi-tong-xiang-guan-wen-ti-7">&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x95EE;&#x9898; <code>(7)</code></a><ul>
<li><a href="#centos-rhel-hong-mao-xi-tong-te-you-wen-ti">CentOS/RHEL &#x7EA2;&#x5E3D;&#x7CFB;&#x7EDF;&#x7279;&#x6709;&#x95EE;&#x9898;</a><ul>
<li><a href="#zai-centos-6-shang-an-zhuang-hou-zen-me-zui-gao-zhi-you-docker-1-7-zhe-ge-ban-ben">&#x5728; CentOS 6 &#x4E0A;&#x5B89;&#x88C5;&#x540E;&#x600E;&#x4E48;&#x6700;&#x9AD8;&#x53EA;&#x6709; Docker 1.7 &#x8FD9;&#x4E2A;&#x7248;&#x672C;&#xFF1F;</a></li>
<li><a href="#gua-zai-su-zhu-mu-lu-jie-guo-permission-denied-mei-quan-xian">&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;&#x7ED3;&#x679C; <code>Permission denied</code>&#xFF0C;&#x6CA1;&#x6743;&#x9650;</a></li>
<li><a href="#docker-de-var-lib-docker-devicemapper-zhan-yong-kong-jian-bu-duan-zeng-chang-zen-me-po">Docker&#x7684; <code>/var/lib/docker/devicemapper</code> &#x5360;&#x7528;&#x7A7A;&#x95F4;&#x4E0D;&#x65AD;&#x589E;&#x957F;, &#x600E;&#x4E48;&#x7834;&#xFF1F;</a></li>
<li><a href="#centos-7-de-nei-he-tai-lao-liao-3-10-shi-bu-shi-hen-duo-docker-gong-neng-bu-zhi-chi">CentOS 7 &#x7684;&#x5185;&#x6838;&#x592A;&#x8001;&#x4E86; 3.10&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x591A; Docker &#x529F;&#x80FD;&#x4E0D;&#x652F;&#x6301;&#xFF1F;</a></li>
<li><a href="#centos-7-rhel-7-sheng-ji-1-12-hou-wu-fa-qi-dong-zen-me-hui-shi">CentOS 7/RHEL 7 &#x5347;&#x7EA7; 1.12 &#x540E;&#xFF0C;&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F;</a></li>
</ul>
</li>
<li><a href="#mac-windows-xiang-guan-wen-ti">Mac / Windows &#x76F8;&#x5173;&#x95EE;&#x9898;</a><ul>
<li><a href="#wei-shi-me-zai-mac-xia-gua-zai-su-zhu-mu-lu-usr-local-nginx-bu-cheng-gong">&#x4E3A;&#x4EC0;&#x4E48;&#x5728;<code>Mac</code>&#x4E0B;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;<code>/usr/local/nginx</code>&#x4E0D;&#x6210;&#x529F;&#xFF1F;</a></li>
<li><a href="#ting-shuo-windows-10-windows-server-2016-nei-zhi-docker-liao-he-docker-guan-wang-xia-zai-de-docker-for-windows-you-shi-me-qu-bie-a">&#x542C;&#x8BF4; Windows 10&#x3001;Windows Server 2016 &#x5185;&#x7F6E; Docker &#x4E86;&#xFF1F;&#x548C; Docker &#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x7684; Docker for Windows &#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x554A;&#xFF1F;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#qi-ta-wen-ti-1">&#x5176;&#x5B83;&#x95EE;&#x9898; <code>(1)</code></a><ul>
<li><a href="#kubernetes-zhe-ci-zha-nian-a-wei-sha-you-ren-guan-ta-jiao-k8s"><code>Kubernetes</code> &#x8FD9;&#x8BCD;&#x548B;&#x5FF5;&#x554A;&#xFF1F;&#x4E3A;&#x5565;&#x6709;&#x4EBA;&#x7BA1;&#x5B83;&#x53EB; <code>k8s</code> &#xFF1F;</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h1 id="docker-yin-qing-xiang-guan-wen-ti-67"><a href="#Docker-&#x5F15;&#x64CE;&#x76F8;&#x5173;&#x95EE;&#x9898;-67" class="headerlink" title="Docker &#x5F15;&#x64CE;&#x76F8;&#x5173;&#x95EE;&#x9898; (67)"></a>Docker &#x5F15;&#x64CE;&#x76F8;&#x5173;&#x95EE;&#x9898; <code>(67)</code> <a href="#docker-yin-qing-xiang-guan-wen-ti-67" class="header-anchor">#</a></h1><h2 id="gai-nian-wen-ti-5"><a href="#&#x6982;&#x5FF5;&#x95EE;&#x9898;-5" class="headerlink" title="&#x6982;&#x5FF5;&#x95EE;&#x9898; (5)"></a>&#x6982;&#x5FF5;&#x95EE;&#x9898; <code>(5)</code> <a href="#gai-nian-wen-ti-5" class="header-anchor">#</a></h2><h3 id="su-zhu-ru-guo-he-rong-qi-xi-tong-bu-tong-de-hua-na-bu-shi-he-xu-ni-ji-yi-yang-yi-ceng-ceng-de-diao-yong-na-me-docker-he-xu-ni-ji-huan-you-shi-me-chai-bie"><a href="#&#x5BBF;&#x4E3B;&#x5982;&#x679C;&#x548C;&#x5BB9;&#x5668;&#x7CFB;&#x7EDF;&#x4E0D;&#x540C;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E0D;&#x662F;&#x548C;&#x865A;&#x62DF;&#x673A;&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x5C42;&#x5C42;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x90A3;&#x4E48;-Docker-&#x548C;&#x865A;&#x62DF;&#x673A;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#xFF1F;" class="headerlink" title="&#x5BBF;&#x4E3B;&#x5982;&#x679C;&#x548C;&#x5BB9;&#x5668;&#x7CFB;&#x7EDF;&#x4E0D;&#x540C;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E0D;&#x662F;&#x548C;&#x865A;&#x62DF;&#x673A;&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x5C42;&#x5C42;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x90A3;&#x4E48; Docker &#x548C;&#x865A;&#x62DF;&#x673A;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#xFF1F;"></a>&#x5BBF;&#x4E3B;&#x5982;&#x679C;&#x548C;&#x5BB9;&#x5668;&#x7CFB;&#x7EDF;&#x4E0D;&#x540C;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E0D;&#x662F;&#x548C;&#x865A;&#x62DF;&#x673A;&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x5C42;&#x5C42;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x90A3;&#x4E48; Docker &#x548C;&#x865A;&#x62DF;&#x673A;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#xFF1F; <a href="#su-zhu-ru-guo-he-rong-qi-xi-tong-bu-tong-de-hua-na-bu-shi-he-xu-ni-ji-yi-yang-yi-ceng-ceng-de-diao-yong-na-me-docker-he-xu-ni-ji-huan-you-shi-me-chai-bie" class="header-anchor">#</a></h3><p>&#x8981;&#x628A; Windows &#x548C; Linux &#x5206;&#x6E05;&#x695A;&#xFF0C;&#x66F4;&#x8981;&#x628A;&#x5185;&#x6838;(<code>kernel</code>)&#x548C;&#x7528;&#x6237;&#x7A7A;&#x95F4;(<code>userland</code>)&#x5206;&#x6E05;&#x695A;&#x3002;</p>
<p>&#x5BB9;&#x5668;&#x5185;&#x7684;&#x8FDB;&#x7A0B;&#x662F;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x4E8E;<code>&#x5BBF;&#x4E3B;&#x5185;&#x6838;</code>&#x7684;&#xFF0C;&#x8FD9;&#x70B9;&#x548C;&#x5BBF;&#x4E3B;&#x8FDB;&#x7A0B;&#x4E00;&#x81F4;&#xFF0C;&#x53EA;&#x662F;&#x5BB9;&#x5668;&#x7684; <code>userland</code> &#x4E0D;&#x540C;&#xFF0C;&#x5BB9;&#x5668;&#x7684; <code>userland</code> &#x7531;&#x5BB9;&#x5668;&#x955C;&#x50CF;&#x63D0;&#x4F9B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x955C;&#x50CF;&#x63D0;&#x4F9B;&#x4E86; <code>rootfs</code>&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x5BBF;&#x4E3B;&#x662F; <code>Ubuntu</code>&#xFF0C;&#x5BB9;&#x5668;&#x662F; <code>CentOS</code>&#x3002;<code>CentOS</code> &#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x4F1A;&#x76F4;&#x63A5;&#x5411; <code>Ubuntu</code> &#x5BBF;&#x4E3B;&#x5185;&#x6838;&#x53D1;&#x9001; <code>syscall</code>&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x76F4;&#x63A5;&#x6216;&#x95F4;&#x63A5;&#x7684;&#x4F7F;&#x7528;&#x4EFB;&#x4F55; <code>Ubuntu</code> &#x7684; <code>userland</code> &#x7684;&#x5E93;&#x3002;</p>
<p>&#x8FD9;&#x70B9;&#x548C;&#x865A;&#x62DF;&#x673A;&#x6709;&#x672C;&#x8D28;&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x865A;&#x62DF;&#x673A;&#x662F;&#x865A;&#x62DF;&#x73AF;&#x5883;&#xFF0C;&#x5728;&#x73B0;&#x6709;&#x7CFB;&#x7EDF;&#x4E0A;&#x865A;&#x62DF;&#x4E00;&#x5957;&#x7269;&#x7406;&#x8BBE;&#x5907;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x865A;&#x62DF;&#x73AF;&#x5883;&#x5185;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x73AF;&#x5883;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#xFF0C;&#x5728;&#x5185;&#x6838;&#x4E4B;&#x4E0A;&#x518D;&#x8DD1;&#x5B8C;&#x6574;&#x7CFB;&#x7EDF;&#xFF0C;&#x5E76;&#x5728;&#x91CC;&#x9762;&#x8C03;&#x7528;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>&#x8FD8;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x53BB;&#x8003;&#x8651;&#xFF0C;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#xFF0C;<code>CentOS</code> &#x7684;&#x8FDB;&#x7A0B;&#x53D1;&#x9001; <code>syscall</code> &#x5185;&#x6838;&#x8C03;&#x7528;&#xFF0C;&#x8BE5;&#x8BF7;&#x6C42;&#x4F1A;&#x88AB;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684; <code>CentOS</code> &#x7684;&#x5185;&#x6838;&#x63A5;&#x5230;&#xFF0C;&#x7136;&#x540E; <code>CentOS</code> &#x5185;&#x6838;&#x8BBF;&#x95EE;&#x865A;&#x62DF;&#x786C;&#x4EF6;&#x65F6;&#xFF0C;&#x7531;&#x865A;&#x62DF;&#x673A;&#x7684;&#x670D;&#x52A1;&#x8F6F;&#x4EF6;&#x622A;&#x83B7;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x5BBF;&#x4E3B;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; <code>Ubuntu</code> &#x7684;&#x5185;&#x6838;&#x53CA; <code>userland</code> &#x7684;&#x5E93;&#x53BB;&#x6267;&#x884C;&#x3002;</p>
<p>&#x800C;&#x4E14;&#xFF0C;Linux &#x548C; Windows &#x5728;&#x8FD9;&#x70B9;&#x4E0A;&#x975E;&#x5E38;&#x4E0D;&#x540C;&#x3002;Linux &#x7684;&#x8FDB;&#x7A0B;&#x662F;&#x76F4;&#x63A5;&#x53D1; <code>syscall</code> &#x7684;&#xFF0C;&#x800C; Windows &#x5219;&#x628A; <code>syscall</code> &#x9690;&#x85CF;&#x4E8E;&#x4E00;&#x5C42;&#x5C42;&#x7684; <code>DLL</code> &#x670D;&#x52A1;&#x4E4B;&#x540E;&#xFF0C;&#x56E0;&#x6B64; Windows &#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5982;&#x679C;&#x8981;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x9700;&#x8981; Windows &#x5185;&#x6838;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x4E00;&#x7FA4;&#x670D;&#x52A1;&#x6765;&#x652F;&#x6491;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C; Windows &#x8981;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x5C06;&#x4E0D;&#x4F1A;&#x50CF; Linux &#x8FD9;&#x6837;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x800C;&#x662F;&#x975E;&#x5E38;&#x81C3;&#x80BF;&#x3002;&#x770B;&#x4E00;&#x4E0B;&#x5FAE;&#x8F6F;&#x79FB;&#x690D;&#x7684; Docker &#x5C31;&#x975E;&#x5E38;&#x6E05;&#x695A;&#x4E86;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4E0D;&#x8981;&#x628A; Docker &#x548C;&#x865A;&#x62DF;&#x673A;&#x5F04;&#x6DF7;&#xFF0C;Docker &#x5BB9;&#x5668;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x800C;&#x5DF2;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x5229;&#x7528;&#x955C;&#x50CF;&#x63D0;&#x4F9B;&#x7684; <code>rootfs</code> &#x63D0;&#x4F9B;&#x4E86;&#x8C03;&#x7528;&#x6240;&#x9700;&#x7684; <code>userland</code> &#x5E93;&#x652F;&#x6301;&#xFF0C;&#x4F7F;&#x5F97;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x5728;&#x53D7;&#x63A7;&#x73AF;&#x5883;&#x4E0B;&#x8FD0;&#x884C;&#x800C;&#x5DF2;&#xFF0C;&#x5B83;&#x5E76;&#x6CA1;&#x6709;&#x865A;&#x62DF;&#x51FA;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x51FA;&#x6765;&#x3002;</p>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li>(&#x82F1;&#x6587;): <a href="https://www.docker.com/what-docker" target="_blank" rel="noopener">https://www.docker.com/what-docker</a></li>
<li>(&#x4E2D;&#x6587;): <a href="https://www.docker-cn.com/what-docker" target="_blank" rel="noopener">https://www.docker-cn.com/what-docker</a></li>
</ul>
<p><a href="/post/docker-2016-08-12-video-windows-server-and-docker.html">&#x89C6;&#x9891;&#x7B14;&#x8BB0;&#xFF1A; Windows Server &#x548C; Docker - John Starks</a></p>
<h3 id="docker-zi-liao-hao-shao-a-wang-shang-de-ming-ling-zen-me-bu-neng-yong"><a href="#Docker-&#x8D44;&#x6599;&#x597D;&#x5C11;&#x554A;&#xFF1F;&#x7F51;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x600E;&#x4E48;&#x4E0D;&#x80FD;&#x7528;&#xFF1F;" class="headerlink" title="Docker &#x8D44;&#x6599;&#x597D;&#x5C11;&#x554A;&#xFF1F;&#x7F51;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x600E;&#x4E48;&#x4E0D;&#x80FD;&#x7528;&#xFF1F;"></a>Docker &#x8D44;&#x6599;&#x597D;&#x5C11;&#x554A;&#xFF1F;&#x7F51;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x600E;&#x4E48;&#x4E0D;&#x80FD;&#x7528;&#xFF1F; <a href="#docker-zi-liao-hao-shao-a-wang-shang-de-ming-ling-zen-me-bu-neng-yong" class="header-anchor">#</a></h3><p>&#x9996;&#x5148;&#xFF0C;&#x505A;&#x6280;&#x672F;&#x5DE5;&#x4F5C;&#xFF0C;&#x8BF7;&#x73CD;&#x60DC;&#x751F;&#x547D;&#xFF0C;&#x8FDC;&#x79BB;&#x767E;&#x5EA6;&#xFF1B;<br>&#x5176;&#x6B21;&#xFF0C;&#x4E0D;&#x7FFB;&#x5899;&#x3001;&#x4E0D;&#x7528;Google&#x3001;&#x4E0D;&#x770B;&#x82F1;&#x6587;&#x8D44;&#x6599;&#xFF0C;&#x90A3;&#x8BF7;&#x8F6C;&#x884C;&#xFF0C;&#x6CA1;&#x6CD5;&#x6DF7;&#x3002;</p>
<p>&#x7136;&#x540E;&#x662F;&#x56DE;&#x7B54;&#x95EE;&#x9898;&#xFF0C;Docker&#x7684;&#x8D44;&#x6599;&#x5176;&#x5B9E;&#x5F88;&#x4E30;&#x5BCC;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x8BB2;&#x89E3;&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#x3002;</p>
<ul>
<li>(&#x82F1;&#x6587;): <a href="https://docs.docker.com/" target="_blank" rel="noopener">https://docs.docker.com/</a></li>
<li>(&#x4E2D;&#x6587;): <a href="https://docs.docker-cn.com" target="_blank" rel="noopener">https://docs.docker-cn.com</a> (&#x6587;&#x6863;&#x6709;&#x5751;&#xFF0C;&#x4E0D;&#x5C11;&#x4EE3;&#x7801;&#x683C;&#x5F0F;&#x6709;&#x9519;)</li>
<li>(&#x8001;&#x9EA6;&#x7684;&#x7FFB;&#x8BD1;): <a href="https://www.gitbook.com/read/book/octowhale/docker-doc-cn" target="_blank" rel="noopener">https://www.gitbook.com/read/book/octowhale/docker-doc-cn</a></li>
</ul>
<p>&#x53E6;&#x5916;&#xFF0C;Docker&#x6709;&#x4E30;&#x5BCC;&#x7684;&#x955C;&#x50CF;&#x5E93;&#xFF0C;Docker Hub&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5B98;&#x65B9;(Official)&#x7684;&#x955C;&#x50CF;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5236;&#x4F5C;&#x6BD4;&#x8F83;&#x7CBE;&#x826F;&#x3002;</p>
<p><a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">https://hub.docker.com/explore/</a></p>
<p>&#x6240;&#x6709;&#x7684;&#x5B98;&#x65B9;&#x955C;&#x50CF;&#x90FD;&#x6709; <code>Dockerfile</code>&#xFF0C;&#x4EE5;&#x53CA;&#x5728;github&#x4E0A;&#x6709;&#x5168;&#x90E8;&#x751F;&#x6210;&#x955C;&#x50CF;&#x7684;&#x914D;&#x5957;&#x6587;&#x4EF6;&#xFF0C;&#x9075;&#x5FAA;&#x4E86;<code>Dockerfile</code>&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E5F;&#x662F;&#x5F88;&#x597D;&#x5730;&#x5B66;&#x4E60;&#x8D44;&#x6599;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5728; YouTube &#x7684; Docker &#x5B98;&#x65B9;&#x9891;&#x9053;&#x4E0B;&#x6709;&#x51E0;&#x767E;&#x4E2A;&#x89C6;&#x9891;&#x8BB2;&#x5EA7;&#xFF0C;&#x4ECE;&#x521D;&#x7EA7;&#x5230;&#x9AD8;&#x7EA7;&#x7528;&#x6237;&#x90FD;&#x80FD;&#x4ECE;&#x91CC;&#x9762;&#x5B66;&#x5230;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x3002;</p>
<p><a href="https://www.youtube.com/user/dockerrun" target="_blank" rel="noopener">https://www.youtube.com/user/dockerrun</a></p>
<h3 id="ru-he-xuan-ze-docker-shu-ji"><a href="#&#x5982;&#x4F55;&#x9009;&#x62E9;-Docker-&#x4E66;&#x7C4D;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x9009;&#x62E9; Docker &#x4E66;&#x7C4D;&#xFF1F;"></a>&#x5982;&#x4F55;&#x9009;&#x62E9; Docker &#x4E66;&#x7C4D;&#xFF1F; <a href="#ru-he-xuan-ze-docker-shu-ji" class="header-anchor">#</a></h3><p>Docker &#x5C5E;&#x4E8E;&#x654F;&#x6377;&#x5F00;&#x53D1;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x5E76;&#x4E14;&#x5904;&#x4E8E;&#x9AD8;&#x901F;&#x521B;&#x65B0;&#x9636;&#x6BB5;&#xFF0C;&#x6BCF;&#x5E74;&#x90FD;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#x7248;&#x672C;&#x53D1;&#x5E03;&#x3002;&#x7531;&#x4E8E;&#x8FD9;&#x79CD;&#x5FEB;&#x901F;&#x5F00;&#x53D1;&#x7684;&#x7279;&#x6027;&#xFF0C;Docker &#x4E00;&#x822C;&#x53EA;&#x4FDD;&#x7559;&#x51E0;&#x4E2A;&#x7248;&#x672C;&#x5185;&#x7684;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x518D;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x5E9F;&#x5F03;&#x3002;&#x56E0;&#x6B64;&#x9009;&#x62E9;&#x56FE;&#x4E66;&#x7684;&#x65F6;&#x5019;&#xFF0C;<strong>&#x4E0D;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x6BD4;&#x5F53;&#x524D;&#x7248;&#x672C;&#x4F4E;&#x8D85;&#x8FC7;2-3&#x4E2A;&#x7248;&#x672C;&#x7684;&#x4E66;&#x7C4D;</strong>&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5E02;&#x9762;&#x4E0A;&#x5927;&#x90E8;&#x5206;&#x4E66;&#x7C4D;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4E2D;&#x6587;&#x4E66;&#x7C4D;&#x3001;&#x7F51;&#x6587;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x90FD;&#x8FC7;&#x65F6;&#x4E86;&#x3002;</p>
<p>Docker &#x7248;&#x672C;&#x53F7;&#x5728; 2017 &#x5E74;&#x4EE5;&#x524D;&#xFF0C;&#x4F7F;&#x7528; <code>&lt;&#x5927;&#x7248;&#x672C;&#x53F7;&gt;.&lt;&#x5C0F;&#x7248;&#x672C;&#x53F7;&gt;.&lt;&#x8865;&#x4E01;&#x7248;&#x672C;&#x53F7;&gt;</code> &#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x90A3;&#x65F6; Docker &#x57FA;&#x672C;&#x4F1A;&#x4FDD;&#x6301; <strong>3 &#x4E2A;&#x5C0F;&#x7248;&#x672C;&#x53F7;</strong> &#x4E4B;&#x5185;&#x7684;&#x517C;&#x5BB9;&#x6027;&#xFF08;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x5BA3;&#x5E03;&#x5E9F;&#x5F03;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x5728; 3 &#x4E2A;&#x7248;&#x672C;&#x540E;&#x624D;&#x5F7B;&#x5E95;&#x79FB;&#x9664;&#xFF09;&#x3002;</p>
<p>&#x800C;&#x4ECE; 2017 &#x5E74;&#x6625;&#x4EE5;&#x540E;&#xFF0C;Docker &#x4F7F;&#x7528;&#x4E86;&#x65B0;&#x7248;&#x672C;&#x53F7;&#x7ED3;&#x6784;&#xFF1A;<code>&lt;&#x5E74;&gt;.&lt;&#x6708;&gt;.&lt;&#x8865;&#x4E01;&#x7248;&#x672C;&#x53F7;&gt;</code>&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x6BCF;&#x6708;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;<strong>&#x524D;&#x6CBF;(Edge)&#x7248;&#x672C;</strong>&#xFF0C;&#x6BCF;&#x5B63;&#x5EA6;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;<strong>&#x7A33;&#x5B9A;(Stable)&#x7248;&#x672C;</strong>&#x3002;&#x56E0;&#x6B64;&#x9009;&#x62E9;&#x4E66;&#x7C4D;&#x4E5F;&#x5E94;&#x8BE5;&#x4EE5;&#x4ECB;&#x7ECD; <strong>2-3&#x4E2A;&#x5B63;&#x5EA6;&#x4EE5;&#x5185;&#x7248;&#x672C;</strong> &#x7684;&#x4E66;&#x7C4D;&#x4E3A;&#x51C6;&#x3002;&#x90A3;&#x4E9B;&#x4ECB;&#x7ECD;&#x4E00;&#x5E74;&#x4EE5;&#x524D;&#x53D1;&#x5E03;&#x7684; Docker &#x7248;&#x672C;&#x7684;&#x4E66;&#x7C4D;&#x4E0D;&#x5E94;&#x8BE5;&#x518D;&#x770B;&#x4E86;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#x5728;&#x8D2D;&#x4E70; Docker &#x56FE;&#x4E66;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E94;&#x8BE5;&#x9075;&#x5FAA;&#x8FD9;&#x6837;&#x7684;&#x539F;&#x5219;&#xFF1A;<strong>&#x89C2;&#x5BDF;&#x4E00;&#x4E0B;&#x5F53;&#x524D;&#x7684; Docker &#x7248;&#x672C;&#x53F7;&#xFF0C;&#x9009;&#x62E9;&#x4E0D;&#x8981;&#x665A;&#x4E8E; 3 &#x4E2A;&#x7248;&#x672C;&#x7684; Docker &#x4E66;&#x7C4D;&#x3002;</strong> &#x6BD4;&#x5982;&#x5199;&#x8FD9;&#x6BB5;&#x6587;&#x5B57;&#x65F6;&#x4E3A; <code>17.06</code>&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x8981;&#x8D2D;&#x4E70;&#x4ECB;&#x7ECD; Docker <code>1.12</code> &#x53CA;&#x5176;&#x4EE5;&#x524D;&#x7248;&#x672C;&#x7684;&#x4E66;&#x7C4D;&#x4E86;&#xFF0C;&#x5426;&#x5219;&#x770B;&#x5230;&#x7684;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x53EF;&#x80FD;&#x5C06;&#x4F1A;&#x56E0;&#x8FC7;&#x65F6;&#x800C;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#xFF0C;&#x6216;&#x8005;&#x5DF2;&#x7ECF;&#x4E0D;&#x5FC5;&#x5982;&#x6B64;&#x7E41;&#x7410;&#x6709;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x5B9E;&#x73B0;&#x4E86;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5BF9;&#x4E8E; Docker &#x5B66;&#x4E60;&#x800C;&#x8A00;&#xFF0C;<strong>&#x6700;&#x597D;&#x7684;&#x4E66;&#x7C4D;&#x662F;&#x5B98;&#x7F51;&#x6587;&#x6863;</strong>&#xFF0C;&#x5B98;&#x7F51;&#x7684;&#x6587;&#x6863;&#x5F88;&#x4E30;&#x5BCC;&#x3002;</p>
<ul>
<li>&#x65B0;&#x624B;&#x6559;&#x7A0B;&#xFF1A;<ul>
<li>&#xFF08;&#x82F1;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">https://docs.docker.com/get-started/</a></li>
<li>&#xFF08;&#x4E2D;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker-cn.com/get-started/" target="_blank" rel="noopener">https://docs.docker-cn.com/get-started/</a></li>
<li>&#xFF08;&#x8001;&#x9EA6;&#x7684;&#x7FFB;&#x8BD1;&#xFF09;&#xFF1A;<a href="https://docs-cn.docker.octowhale.com/get_started/001.Orientation.html" target="_blank" rel="noopener">https://docs-cn.docker.octowhale.com/get_started/001.Orientation.html</a></li>
</ul>
</li>
<li>Docker &#x8BFE;&#x7A0B;&#xFF1A;<a href="http://training.play-with-docker.com/" target="_blank" rel="noopener">http://training.play-with-docker.com/</a><ul>
<li>&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x8BFE;&#x7A0B;&#xFF1A;<a href="http://training.play-with-docker.com/ops-landing/" target="_blank" rel="noopener">http://training.play-with-docker.com/ops-landing/</a></li>
<li>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8BFE;&#x7A0B;&#xFF1A;<a href="http://training.play-with-docker.com/dev-landing/" target="_blank" rel="noopener">http://training.play-with-docker.com/dev-landing/</a></li>
</ul>
</li>
<li>&#x5927;&#x91CF;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;<ul>
<li>&#xFF08;&#x82F1;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker.com/samples/" target="_blank" rel="noopener">https://docs.docker.com/samples/</a></li>
<li>&#xFF08;&#x4E2D;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker-cn.com/samples/" target="_blank" rel="noopener">https://docs.docker-cn.com/samples/</a></li>
</ul>
</li>
<li>&#x7528;&#x6237;&#x6587;&#x6863;&#xFF1A;<ul>
<li>&#xFF08;&#x82F1;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/</a></li>
<li>&#xFF08;&#x4E2D;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker-cn.com/engine/userguide/" target="_blank" rel="noopener">https://docs.docker-cn.com/engine/userguide/</a></li>
<li>&#x955C;&#x50CF;&#xFF1A;<ul>
<li>(&#x82F1;&#x6587;&#xFF09;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/</a></li>
<li>(&#x8001;&#x9EA6;&#x7684;&#x7FFB;&#x8BD1;)&#xFF1A;<a href="https://docs-cn.docker.octowhale.com/engine/userguide/eng-image/dockerfile_best-practices.html" target="_blank" rel="noopener">https://docs-cn.docker.octowhale.com/engine/userguide/eng-image/dockerfile_best-practices.html</a></li>
</ul>
</li>
<li>&#x5B58;&#x50A8;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/storagedriver/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/storagedriver/</a></li>
<li>&#x7F51;&#x7EDC;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/networking/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/networking/</a></li>
</ul>
</li>
<li>&#x7BA1;&#x7406;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/admin/" target="_blank" rel="noopener">https://docs.docker.com/engine/admin/</a><ul>
<li>&#x5B58;&#x50A8;&#xFF1A;<a href="https://docs.docker.com/engine/admin/volumes/" target="_blank" rel="noopener">https://docs.docker.com/engine/admin/volumes/</a></li>
</ul>
</li>
<li>&#x5B89;&#x5168;&#xFF1A;<a href="https://docs.docker.com/engine/security/security/" target="_blank" rel="noopener">https://docs.docker.com/engine/security/security/</a></li>
<li>&#x96C6;&#x7FA4;&#xFF1A;<a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener">https://docs.docker.com/engine/swarm/</a></li>
</ul>
<blockquote>
<p>&#x90E8;&#x5206;&#x6587;&#x6863;&#x6709;&#x5BF9;&#x5E94;&#x5B98;&#x65B9;&#x7684;&#x4E2D;&#x6587;&#x7FFB;&#x8BD1;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE; <a href="https://docs.docker-cn.com" target="_blank" rel="noopener">https://docs.docker-cn.com</a> &#x67E5;&#x770B;&#x3002;&#x4F46;&#x662F;&#x4E00;&#x5B9A;&#x8981;<strong>&#x6CE8;&#x610F;&#x4EE3;&#x7801;&#x683C;&#x5F0F;</strong>&#xFF0C;&#x4E2D;&#x6587;&#x6587;&#x6863;&#x4E2D;<strong>&#x8BB8;&#x591A;&#x683C;&#x5F0F;&#x662F;&#x9519;&#x8BEF;&#x7684;</strong>&#xFF0C;&#x5E94;&#x8BE5;&#x5BF9;&#x6BD4;&#x82F1;&#x6587;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x6765;&#x770B;&#x3002;</p>
</blockquote>
<p>&#x5BF9;&#x4E8E;&#x65B0;&#x624B;&#x800C;&#x8A00;&#xFF0C;&#x5E94;&#x8BE5;&#x5148;&#x4ECE;&#x65B0;&#x624B;&#x6559;&#x7A0B;&#x5F00;&#x59CB;&#xFF0C;&#x5185;&#x5BB9;&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x6613;&#x61C2;&#x7684;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x4E0A;&#x624B;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x7528;&#x6237;&#x6587;&#x6863;&#x597D;&#x597D;&#x770B;&#x4E00;&#x904D;&#xFF0C;&#x91CC;&#x9762;&#x628A;&#x5F88;&#x591A; Docker &#x7684;&#x57FA;&#x7840;&#x6982;&#x5FF5;&#x8BB2;&#x7684;&#x5F88;&#x6E05;&#x695A;&#x3002;&#x6982;&#x5FF5;&#x6E05;&#x6670;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x628A;&#x5B98;&#x7F51;&#x7ED9;&#x51FA;&#x7684;&#x4F8B;&#x5B50;&#x597D;&#x597D;&#x7684;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E9B;&#x4F8B;&#x5B50;&#x90FD;&#x662F;&#x5177;&#x4F53;&#x600E;&#x4E48;&#x5E94;&#x7528; Docker &#x7684;&#xFF0C;&#x6709;&#x6587;&#x5B57;&#x8BF4;&#x660E;&#x4EE5;&#x53CA;&#x5177;&#x4F53;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x5F88;&#x9002;&#x5408;&#x5B66;&#x4E60;&#x3002;</p>
<h3 id="zong-shuo-kan-guan-fang-wen-dang-ke-shi-docker-guan-wang-wen-dang-jing-chang-bei-qiang-kan-bu-liao-zen-me-ban"><a href="#&#x603B;&#x8BF4;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x662F;-Docker-&#x5B98;&#x7F51;&#x6587;&#x6863;&#x7ECF;&#x5E38;&#x88AB;&#x5899;&#xFF0C;&#x770B;&#x4E0D;&#x4E86;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x603B;&#x8BF4;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x662F; Docker &#x5B98;&#x7F51;&#x6587;&#x6863;&#x7ECF;&#x5E38;&#x88AB;&#x5899;&#xFF0C;&#x770B;&#x4E0D;&#x4E86;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x603B;&#x8BF4;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x662F; Docker &#x5B98;&#x7F51;&#x6587;&#x6863;&#x7ECF;&#x5E38;&#x88AB;&#x5899;&#xFF0C;&#x770B;&#x4E0D;&#x4E86;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#zong-shuo-kan-guan-fang-wen-dang-ke-shi-docker-guan-wang-wen-dang-jing-chang-bei-qiang-kan-bu-liao-zen-me-ban" class="header-anchor">#</a></h3><p>&#x9996;&#x5148;<em>&#x611F;&#x8C22;</em>&#x4F1F;&#x5927;&#x7684;&#x5899;&#x53CA;&#x5176;&#x5148;&#x7956;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x672C;&#x5730;&#x8FD0;&#x884C; Docker &#x5B98;&#x65B9;&#x6587;&#x6863;&#x7684;&#x7F51;&#x7AD9;&#xFF0C;&#x4EE5; docker &#x7684;&#x65B9;&#x5F0F;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 80:4000 docs/docker.github.io</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x8BBF;&#x95EE; Docker &#x5BBF;&#x4E3B;&#x7684; <code>80</code> &#x7AEF;&#x53E3;&#xFF0C;&#x5982; <a href="http://localhost" target="_blank" rel="noopener">http://localhost</a>&#xFF0C;&#x5C31;&#x4F1A;&#x770B;&#x5230;&#x5B98;&#x7F51;&#x6587;&#x6863;&#x4E86;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x8BBF;&#x95EE;&#x4E0D;&#x4E86;&#x6211;&#x7684;&#x95EE;&#x7B54;&#x5F55;&#x7684;&#x7AE5;&#x978B;&#xFF0C;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x7528;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x672C;&#x5730;&#x8FD0;&#x884C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 80:80 twang2218/blog.lab99.org</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x672C;&#x5730; <code>80</code> &#x7AEF;&#x53E3;&#x770B;&#x5230;&#x6700;&#x65B0;&#x7684;&#x95EE;&#x7B54;&#x5F55;&#x4E86;&#x3002;</p>
<h3 id="docker-1-8-yi-hou-ban-ben-du-you-shi-me-gai-jin-me"><a href="#Docker-1-8-&#x4EE5;&#x540E;&#x7248;&#x672C;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x6539;&#x8FDB;&#x4E48;&#xFF1F;" class="headerlink" title="Docker 1.8 &#x4EE5;&#x540E;&#x7248;&#x672C;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x6539;&#x8FDB;&#x4E48;&#xFF1F;"></a>Docker 1.8 &#x4EE5;&#x540E;&#x7248;&#x672C;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x6539;&#x8FDB;&#x4E48;&#xFF1F; <a href="#docker-1-8-yi-hou-ban-ben-du-you-shi-me-gai-jin-me" class="header-anchor">#</a></h3><p>&#x6BCF;&#x4E2A;&#x7248;&#x672C;&#x53D1;&#x5E03;&#x65F6;&#xFF0C;&#x5B98;&#x65B9;&#x535A;&#x5BA2; <a href="https://blog.docker.com" target="_blank" rel="noopener">https://blog.docker.com</a> &#x90FD;&#x4F1A;&#x6709;&#x4E13;&#x95E8;&#x6587;&#x7AE0;&#x63CF;&#x8FF0;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x6539;&#x8FDB;&#x3002;</p>
<ul>
<li><code>1.9</code>: <a href="https://blog.docker.com/2015/11/docker-1-9-production-ready-swarm-multi-host-networking/" target="_blank" rel="noopener">https://blog.docker.com/2015/11/docker-1-9-production-ready-swarm-multi-host-networking/</a></li>
<li><code>1.10</code>: <a href="https://blog.docker.com/2016/02/docker-1-10/" target="_blank" rel="noopener">https://blog.docker.com/2016/02/docker-1-10/</a></li>
<li><code>1.11</code>: <a href="https://blog.docker.com/2016/04/docker-engine-1-11-runc/" target="_blank" rel="noopener">https://blog.docker.com/2016/04/docker-engine-1-11-runc/</a></li>
<li><code>1.12</code>: <a href="https://blog.docker.com/2016/06/docker-1-12-built-in-orchestration/" target="_blank" rel="noopener">https://blog.docker.com/2016/06/docker-1-12-built-in-orchestration/</a></li>
</ul>
<p>&#x53E6;&#x5916;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x5B59;&#x5B8F;&#x4EAE;&#x7EF4;&#x62A4;&#x7684;<a href="https://github.com/allencloud/docker-changelog-chinese" target="_blank" rel="noopener">&#x300A;Docker &#x4E2D;&#x6587; Changelog&#x300B;</a>&#xFF1A;</p>
<ul>
<li><code>1.10</code>: <a href="https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.10.0-changelog.md" target="_blank" rel="noopener">https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.10.0-changelog.md</a></li>
<li><code>1.11</code>: <a href="https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.11.0-changelog.md" target="_blank" rel="noopener">https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.11.0-changelog.md</a></li>
<li><code>1.11.1</code>: <a href="https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.11.1-changelog.md" target="_blank" rel="noopener">https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.11.1-changelog.md</a></li>
<li><code>1.12</code>: <a href="https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.12.0-changelog.md" target="_blank" rel="noopener">https://github.com/allencloud/docker-changelog-chinese/blob/master/docker-1.12.0-changelog.md</a></li>
</ul>
<p>&#x5173;&#x4E8E; <code>Docker 1.13</code> &#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x6211;&#x5199;&#x7684;<a href="/post/docker-2016-11-14-what-is-new-in-docker-1-13.html">&#x300A;Docker 1.13 &#x65B0;&#x589E;&#x529F;&#x80FD;&#x300B;</a>&#x3002;</p>
<h2 id="an-zhuang-pei-zhi-wen-ti-8"><a href="#&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x95EE;&#x9898;-8" class="headerlink" title="&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x95EE;&#x9898; (8)"></a>&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x95EE;&#x9898; <code>(8)</code> <a href="#an-zhuang-pei-zhi-wen-ti-8" class="header-anchor">#</a></h2><h3 id="docker-zen-me-zhe-me-duo-ruan-jian-wo-gai-zhuang-na-ge"><a href="#Docker-&#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x591A;&#x8F6F;&#x4EF6;&#xFF0C;&#x6211;&#x8BE5;&#x88C5;&#x54EA;&#x4E2A;&#xFF1F;" class="headerlink" title="Docker &#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x591A;&#x8F6F;&#x4EF6;&#xFF0C;&#x6211;&#x8BE5;&#x88C5;&#x54EA;&#x4E2A;&#xFF1F;"></a>Docker &#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x591A;&#x8F6F;&#x4EF6;&#xFF0C;&#x6211;&#x8BE5;&#x88C5;&#x54EA;&#x4E2A;&#xFF1F; <a href="#docker-zen-me-zhe-me-duo-ruan-jian-wo-gai-zhuang-na-ge" class="header-anchor">#</a></h3><p>&#x597D;&#x5427;&#xFF0C;&#x6211;&#x51B3;&#x5B9A;&#x8981;&#x88C5; Docker &#x4E86;&#xFF0C;&#x4E8E;&#x662F;&#x6765;&#x6253;&#x5F00; <a href="https://docs.docker.com/engine/installation/" target="_blank" rel="noopener">Docker &#x5B89;&#x88C5;&#x6587;&#x6863;</a> (<a href="https://docs.docker-cn.com/engine/installation/" target="_blank" rel="noopener">&#x4E2D;&#x6587;</a> &#x770B;&#x770B;&#x600E;&#x4E48;&#x88C5;&#x5427;&#x2026;&#x2026;&#x5443;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x50BB;&#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x591A;&#x79CD;&#x9009;&#x62E9;&#x554A;&#xFF1F;&#xFF01;</p>
<p>&#x9996;&#x5148;&#xFF0C;Docker &#x6709;&#x597D;&#x51E0;&#x4E2A;<em>&#x7248;&#x672C;</em>&#xFF0C;&#x793E;&#x533A;&#x7248;&#xFF08;Community Edition&#xFF09;&#x3001;&#x4F01;&#x4E1A;&#x57FA;&#x7840;&#x7248;&#xFF08;Enterprise Edition Basic&#xFF09;&#x3001;&#x4F01;&#x4E1A;&#x6807;&#x51C6;&#x7248;&#xFF08;Enterprise Edition Standard&#xFF09;&#x3001;&#x4F01;&#x4E1A;&#x9AD8;&#x7EA7;&#x7248;&#xFF08;Enterprise Edition Advanced&#xFF09;&#x3002;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x5B66;&#x4E60;&#x4F7F;&#x7528;&#x800C;&#x8A00;&#xFF0C;<em>&#x4F7F;&#x7528;&#x793E;&#x533A;&#x7248;&#x5C31;&#x5DF2;&#x8DB3;&#x591F;</em>&#xFF0C;&#x6240;&#x4EE5;&#x8BB0;&#x4F4F;<strong>CE</strong>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<p>&#x5176;&#x6B21;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x4E00;&#x5806;<em>&#x5E73;&#x53F0;</em>&#x7279;&#x5B9A;&#x7684;&#x7248;&#x672C;&#xFF0C;Docker for Mac&#x3001;Docker for Windows&#x3001;Docker Toolbox&#x3001;Docker for Azure&#x3001;Docker for AWS &#x7B49;&#x7B49;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x5806;&#x4E0D;&#x540C; Linux &#x7684;&#x53D1;&#x884C;&#x7248;&#x3002;&#x90A3;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x7528;&#x54EA;&#x4E2A;&#xFF1F;&#x5176;&#x5B9E;&#x4E0D;&#x96BE;&#x9009;&#x62E9;&#xFF0C;&#x8FD9;&#x90FD;&#x662F;&#x5E73;&#x53F0;&#x7279;&#x5B9A;&#x7684;&#x4E1C;&#x897F;&#x561B;&#xFF0C;&#x9009;&#x62E9;&#x81EA;&#x5DF1;&#x5E73;&#x53F0;&#x5C31;&#x5B8C;&#x4E86;&#x1F602;&#xFF1A;</p>
<ul>
<li>macOS &#x5C31;&#x9009;&#x62E9; <a href="https://docs.docker.com/docker-for-mac/" target="_blank" rel="noopener">Docker for Mac</a>&#xFF1B;<ul>
<li>&#x963F;&#x91CC;&#x4E91;&#xFF08;&#x672A;&#x53CA;&#x65F6;&#x66F4;&#x65B0;&#xFF09;&#xFF1A;<a href="https://mirrors.aliyun.com/docker-toolbox/mac/docker-for-mac/stable/" target="_blank" rel="noopener">https://mirrors.aliyun.com/docker-toolbox/mac/docker-for-mac/stable/</a></li>
</ul>
</li>
<li>Linux &#x5C31;&#x9009;&#x62E9;&#x81EA;&#x5DF1;&#x5E73;&#x53F0;&#x7684; Docker &#x6E90;&#xFF1A;<ul>
<li>Ubuntu: <a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/</a></li>
<li>Debian: <a href="https://docs.docker.com/engine/installation/linux/docker-ce/debian/" target="_blank" rel="noopener">https://docs.docker.com/engine/installation/linux/docker-ce/debian/</a></li>
<li>CentOS: <a href="https://docs.docker.com/engine/installation/linux/docker-ce/centos/" target="_blank" rel="noopener">https://docs.docker.com/engine/installation/linux/docker-ce/centos/</a></li>
<li>Fedora: <a href="https://docs.docker.com/engine/installation/linux/docker-ce/fedora/" target="_blank" rel="noopener">https://docs.docker.com/engine/installation/linux/docker-ce/fedora/</a></li>
</ul>
</li>
<li>Windows &#x8981;&#x9EBB;&#x70E6;&#x4E9B;&#xFF1A;<ul>
<li>&#x5982;&#x679C;&#x662F; <em>Windows 10</em> <em>&#x4E13;&#x4E1A;&#x7248;&#x3001;&#x4F01;&#x4E1A;&#x7248;&#x3001;&#x6559;&#x80B2;&#x7248;</em>&#xFF0C;&#x5E76;&#x4E14;&#x7248;&#x672C;&#x5728; <code>10586</code> &#x4EE5;&#x540E;&#xFF0C;&#x5E76;&#x4E14;<em>&#x4E0D;&#x6253;&#x7B97;</em>&#x5728; Docker &#x8FD0;&#x884C;<em>&#x540C;&#x65F6;</em>&#x518D;&#x8FD0;&#x884C;&#x5176;&#x5B83;&#x865A;&#x62DF;&#x673A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x88C5; <a href="https://docs.docker.com/docker-for-windows/" target="_blank" rel="noopener">Docker for Windows</a>&#x3002;<ul>
<li>&#x963F;&#x91CC;&#x4E91;&#xFF08;&#x672A;&#x53CA;&#x65F6;&#x66F4;&#x65B0;&#xFF09;&#xFF1A;<a href="https://mirrors.aliyun.com/docker-toolbox/windows/docker-for-windows/stable/" target="_blank" rel="noopener">https://mirrors.aliyun.com/docker-toolbox/windows/docker-for-windows/stable/</a></li>
</ul>
</li>
<li><strong>&#x5176;&#x5B83;&#x60C5;&#x51B5;</strong>&#x90FD;&#x88C5; <a href="https://docs.docker.com/toolbox/overview/" target="_blank" rel="noopener">Docker Toolbox</a><ul>
<li>&#x963F;&#x91CC;&#x4E91;&#xFF1A;<a href="https://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/" target="_blank" rel="noopener">https://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/</a></li>
</ul>
</li>
</ul>
</li>
<li>&#x5982;&#x679C;&#x662F;&#x7279;&#x5B9A;&#x4E91;&#x670D;&#x52A1;&#x5E73;&#x53F0;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x7279;&#x5B9A;&#x670D;&#x52A1;&#x5E73;&#x53F0;&#x7684;&#x7248;&#x672C;&#xFF08;&#x5F53;&#x7136;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#xFF09;&#xFF1A;<ul>
<li>AWS&#xFF1A;<a href="https://docs.docker.com/docker-for-aws/" target="_blank" rel="noopener">Docker for AWS</a></li>
<li>Azure&#xFF1A;<a href="https://docs.docker.com/docker-for-azure/" target="_blank" rel="noopener">Docker for Azure</a></li>
</ul>
</li>
</ul>
<p>&#x6700;&#x540E;&#x662F;<em>&#x53D1;&#x5E03;&#x901A;&#x9053;</em>&#xFF0C;&#x4ECE;&#x4ECA;&#x5E74;&#x521D;&#x5F00;&#x59CB;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4ECE; <code>1.13</code> &#x4EE5;&#x540E;&#xFF0C;Docker &#x4F7F;&#x7528;&#x4E86;&#x65B0;&#x7684;&#x7248;&#x672C;&#x53F7;&#x89C4;&#x5219;&#xFF0C;&#x5C06;&#x91C7;&#x7528;&#x7C7B;&#x4F3C; Ubuntu &#x90A3;&#x79CD; <code>&lt;&#x5E74;&gt;.&lt;&#x6708;&gt;</code> &#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x6BD4;&#x5982; <code>17.03</code>, <code>17.06</code> &#x7B49;&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x5C06;&#x53D1;&#x5E03;&#x901A;&#x9053;&#x5206;&#x4E3A;<strong>&#x524D;&#x6CBF;&#x7248;&#x672C;(Edge)</strong>&#x548C;<strong>&#x7A33;&#x5B9A;&#x7248;&#x672C;(Stable)</strong>&#x3002;&#x524D;&#x6CBF;&#x901A;&#x9053;&#x5C06;&#x57FA;&#x672C;&#x6BCF;&#x4E2A;&#x6708;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x800C;&#x7A33;&#x5B9A;&#x901A;&#x9053;&#x5C06;&#x57FA;&#x672C;&#x6BCF;3&#x4E2A;&#x6708;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;&#x8FD9;&#x6837; Docker &#x7684;&#x53D1;&#x5E03;&#x5C06;&#x6709;&#x89C4;&#x5F8B;&#x53EF;&#x5BFB;&#x3002;&#x5BF9;&#x4E8E;&#x559C;&#x6B22;&#x5C1D;&#x9C9C;&#x7684;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x524D;&#x6CBF;&#x7248;&#x672C;&#xFF0C;&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x7A33;&#x5B9A;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x7A33;&#x5B9A;&#x7248;&#x672C;&#x3002;</p>
<blockquote>
<p>&#x8FD9;&#x91CC;&#x9762;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x53C2;&#x8003;<a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">&#x5B98;&#x65B9;&#x5B89;&#x88C5;&#x6587;&#x6863;</a> (<a href="https://docs.docker-cn.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">&#x4E2D;&#x6587;</a>)&#x914D;&#x7F6E; Linux &#x6E90;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x56FD;&#x5185;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8981;&#x5C06;&#x5176;&#x4E2D;&#x7684; <code>https://download.docker.com/linux/</code> &#x66FF;&#x6362;&#x4E3A; <code>https://mirrors.aliyun.com/docker-ce/linux/</code>&#x3002;</p>
</blockquote>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x6587;&#x6863;&#x5982;&#x679C;&#x8981;&#x6C42;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository \</span><br><span class="line">   <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x90A3;&#x4E48;&#x5C31;<strong>&#x66FF;&#x6362;</strong>&#x4E3A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository \</span><br><span class="line">   <span class="string">&quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x5B89;&#x88C5; Docker &#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x8F6F;&#x4EF6;&#x6E90;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x7FFB;&#x5899;&#x4E86;&#x3002;&#xFF08;<em>&#x6CE8;&#xFF1A;&#x8FD9;&#x4E0D;&#x662F;&#x52A0;&#x901F;&#x5668;&#xFF0C;&#x4E0D;&#x8981;&#x641E;&#x9519;&#x4E86;&#xFF0C;&#x52A0;&#x901F;&#x5668;&#x4F9D;&#x65E7;&#x9700;&#x8981;&#x914D;&#xFF01;</em>&#xFF09;</p>
<h3 id="shi-zhi-jie-yong-yum-apt-get-an-zhuang-docker-ma"><a href="#&#x662F;&#x76F4;&#x63A5;&#x7528;-yum-apt-get-&#x5B89;&#x88C5;-Docker-&#x5417;&#xFF1F;" class="headerlink" title="&#x662F;&#x76F4;&#x63A5;&#x7528; yum / apt-get &#x5B89;&#x88C5; Docker &#x5417;&#xFF1F;"></a>&#x662F;&#x76F4;&#x63A5;&#x7528; <code>yum</code> / <code>apt-get</code> &#x5B89;&#x88C5; Docker &#x5417;&#xFF1F; <a href="#shi-zhi-jie-yong-yum-apt-get-an-zhuang-docker-ma" class="header-anchor">#</a></h3><p>&#x5F88;&#x591A;&#x4EBA;&#x95EE;&#x5230; <code>docker</code>, <code>docker.io</code>, <code>docker-engine</code> &#x751A;&#x81F3; <code>lxc-docker</code> &#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</p>
<p>&#x5176;&#x4E2D;&#xFF0C;RHEL/CentOS &#x8F6F;&#x4EF6;&#x6E90;&#x4E2D;&#x7684; Docker &#x5305;&#x540D;&#x4E3A; <code>docker</code>&#xFF1B;Ubuntu &#x8F6F;&#x4EF6;&#x6E90;&#x4E2D;&#x7684; Docker &#x5305;&#x540D;&#x4E3A; <code>docker.io</code>&#xFF1B;&#x800C;&#x5F88;&#x53E4;&#x8001;&#x7684; Docker &#x6E90;&#x4E2D; Docker &#x4E5F;&#x66FE;&#x53EB;&#x505A; <code>lxc-docker</code>&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x8001;&#x65E7;&#x7684; Docker &#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x57FA;&#x672C;&#x4E0D;&#x4F1A;&#x66F4;&#x65B0;&#x5230;&#x6700;&#x65B0;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528; Docker &#x800C;&#x8A00;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7248;&#x672C;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x53E6;&#x5916;&#xFF0C;17.04 &#x4EE5;&#x540E;&#xFF0C;&#x5305;&#x540D;&#x4ECE; <code>docker-engine</code> &#x6539;&#x4E3A; <code>docker-ce</code>&#xFF0C;&#x56E0;&#x6B64;&#x4ECE;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x5B89;&#x88C5;&#xFF0C;&#x5E94;&#x8BE5;&#x90FD;&#x4F7F;&#x7528; <code>docker-ce</code> &#x8FD9;&#x4E2A;&#x5305;&#x3002;</p>
<blockquote>
<p>&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x7684;&#x8F6F;&#x4EF6;&#x6E90;&#x4E2D;&#x7684; Docker &#x5305;&#xFF0C;&#x53BB;&#x4F7F;&#x7528; Docker &#x5B98;&#x65B9;&#x6E90;&#x7684;&#x5305;&#x3002;</p>
</blockquote>
<p>&#x6B63;&#x786E;&#x7684;&#x5B89;&#x88C5;&#x65B9;&#x6CD5;&#x6709;&#x4E24;&#x79CD;&#xFF1A;</p>
<ul>
<li>&#x4E00;&#x79CD;&#x662F;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x5B89;&#x88C5;&#x6587;&#x6863;&#x53BB;&#x914D;&#x7F6E; <a href="https://docs.docker-cn.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">apt</a> &#x6216;&#x8005; <a href="https://docs.docker-cn.com/engine/installation/linux/docker-ce/centos/" target="_blank" rel="noopener">yum</a> &#x7684;&#x6E90;&#xFF1B;</li>
<li>&#x53E6;&#x4E00;&#x79CD;&#x5219;&#x662F;&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x5B89;&#x88C5;&#x811A;&#x672C;&#x5FEB;&#x901F;&#x5B89;&#x88C5;&#x3002;</li>
</ul>
<p>&#x5B98;&#x65B9;&#x6587;&#x6863;&#x5BF9;&#x914D;&#x7F6E;&#x6E90;&#x7684;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x6709;&#x5F88;&#x8BE6;&#x7EC6;&#x7684;&#x8BB2;&#x89E3;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#xFF0C;&#x9700;&#x8981;&#x7684;&#x76F4;&#x63A5;&#x53BB;&#x770B;<a href="https://docs.docker-cn.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;&#x8FD9;&#x91CC;&#x53EA;&#x4ECB;&#x7ECD;&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x7684;&#x811A;&#x672C;&#x5FEB;&#x901F;&#x5B89;&#x88C5;&#xFF1A;</p>
<h4 id="17-04-ji-yi-hou-de-ban-ben"><a href="#17-04-&#x53CA;&#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;" class="headerlink" title="17.04 &#x53CA;&#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;"></a>17.04 &#x53CA;&#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C; <a href="#17-04-ji-yi-hou-de-ban-ben" class="header-anchor">#</a></h4><p>&#x4ECE; <code>17.04</code> &#x4EE5;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5B89;&#x88C5;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CHANNEL=stable</span><br><span class="line">curl -fsSL https://get.docker.com/ | sh -s -- --mirror Aliyun</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5B98;&#x65B9;&#x811A;&#x672C;&#x5B89;&#x88C5;&#xFF0C;&#x901A;&#x8FC7;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6307;&#x5B9A;&#x5B89;&#x88C5;&#x901A;&#x9053;&#x4E3A; <code>stable</code>&#xFF0C;&#xFF08;&#x5982;&#x679C;&#x559C;&#x6B22;&#x5C1D;&#x9C9C;&#x53EF;&#x4EE5;&#x6539;&#x4E3A; <code>edge</code>, <code>test</code>&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x6E90;(apt/yum)&#x6765;&#x5B89;&#x88C5; Docker CE &#x7248;&#x672C;&#x3002;</p>
<h4 id="17-03-ji-yi-qian-de-ban-ben"><a href="#17-03-&#x53CA;&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;" class="headerlink" title="17.03 &#x53CA;&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;"></a>17.03 &#x53CA;&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C; <a href="#17-03-ji-yi-qian-de-ban-ben" class="header-anchor">#</a></h4><p>&#x65E9;&#x671F;&#x7684;&#x7248;&#x672C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x6216;&#x8005; DaoCloud &#x8001;&#x7684;&#x811A;&#x672C;&#x5B89;&#x88C5;&#xFF1A;</p>
<p>&#x4F7F;&#x7528;<code>&#x963F;&#x91CC;&#x4E91;</code>&#x7684;&#x5B89;&#x88C5;&#x811A;&#x672C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -</span><br></pre></td></tr></table></figure>
<p>&#x4F7F;&#x7528;<code>DaoCloud</code>&#x7684;Docker&#x5B89;&#x88C5;&#x811A;&#x672C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure>
<h3 id="bu-shi-du-yi-jing-fa-bu-docker-17-07-liao-me-wo-zen-me-sheng-ji-dao-zui-xin-huan-shi-17-05-ya"><a href="#&#x4E0D;&#x662F;&#x90FD;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03;-Docker-17-07-&#x4E86;&#x4E48;&#xFF1F;&#x6211;&#x600E;&#x4E48;&#x5347;&#x7EA7;&#x5230;&#x6700;&#x65B0;&#x8FD8;&#x662F;-17-05-&#x5440;&#xFF1F;" class="headerlink" title="&#x4E0D;&#x662F;&#x90FD;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03; Docker 17.07 &#x4E86;&#x4E48;&#xFF1F;&#x6211;&#x600E;&#x4E48;&#x5347;&#x7EA7;&#x5230;&#x6700;&#x65B0;&#x8FD8;&#x662F; 17.05 &#x5440;&#xFF1F;"></a>&#x4E0D;&#x662F;&#x90FD;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03; Docker 17.07 &#x4E86;&#x4E48;&#xFF1F;&#x6211;&#x600E;&#x4E48;&#x5347;&#x7EA7;&#x5230;&#x6700;&#x65B0;&#x8FD8;&#x662F; 17.05 &#x5440;&#xFF1F; <a href="#bu-shi-du-yi-jing-fa-bu-docker-17-07-liao-me-wo-zen-me-sheng-ji-dao-zui-xin-huan-shi-17-05-ya" class="header-anchor">#</a></h3><p>&#x4ECE; <strong>17.04</strong> &#x4EE5;&#x540E;&#xFF0C;Docker &#x7684;&#x6E90;&#x7684;&#x7ED3;&#x6784;&#x4EE5;&#x53CA;&#x5305;&#x540D;&#x90FD;&#x8FDB;&#x884C;&#x4E86;&#x8C03;&#x6574;&#xFF0C;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x4F60;&#x4F60;&#x8FD8;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x65E7;&#x7684;&#x6E90;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x53C2;&#x7167;<a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;&#x66F4;&#x65B0;&#x6E90;&#x7684;&#x5730;&#x5740;&#x4E3A;&#x65B0;&#x7684;&#x6E90;&#x3002;&#x524D;&#x9762;&#x7684;&#x95EE;&#x7B54;&#x4E2D;&#x5DF2;&#x7ECF;&#x7ED9;&#x51FA;&#x4E86;&#x94FE;&#x63A5;&#x548C;&#x66FF;&#x4EE3;&#x7528;&#x7684;&#x963F;&#x91CC;&#x4E91;&#x6E90;&#x955C;&#x50CF;&#x5730;&#x5740;&#xFF0C;&#x53C2;&#x7167;&#x4FEE;&#x6539;&#xFF08;apt/yum&#xFF09;&#x6E90;&#x3002;</p>
<p>&#x4FEE;&#x6539;&#x597D;&#x540E;&#xFF0C;&#x5378;&#x8F7D;&#x65E7;&#x7684; <code>docker-engine</code>&#xFF0C;&#x5B89;&#x88C5;&#x65B0;&#x7684; <code>docker-ce</code> &#x5373;&#x53EF;&#x3002;</p>
<h3 id="docker-pull-hao-man-a-zen-me-ban"><a href="#docker-pull-&#x597D;&#x6162;&#x554A;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="docker pull &#x597D;&#x6162;&#x554A;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a><code>docker pull</code> &#x597D;&#x6162;&#x554A;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#docker-pull-hao-man-a-zen-me-ban" class="header-anchor">#</a></h3><p>&#x9996;&#x5148;&#xFF0C;&#x8981;&#x201C;&#x611F;&#x8C22;&#x201D;&#x4F1F;&#x5927;&#x7684;&#x5899;&#x53CA;&#x5176;&#x4EB2;&#x5C5E;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Docker &#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x52A0;&#x901F;&#x5668;&#x5C31;&#x662F;&#x955C;&#x50CF;&#x3001;&#x4EE3;&#x7406;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x56FD;&#x5185;&#x6709;&#x4E0D;&#x5C11;&#x673A;&#x6784;&#x63D0;&#x4F9B;&#x4E86;&#x514D;&#x8D39;&#x7684;&#x52A0;&#x901F;&#x5668;&#x4EE5;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x91CC;&#x5217;&#x51FA;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x52A0;&#x901F;&#x5668;&#x670D;&#x52A1;&#xFF1A;</p>
<ul>
<li><a href="https://www.docker-cn.com/registry-mirror" target="_blank" rel="noopener">Docker &#x5B98;&#x65B9;&#x7684;&#x4E2D;&#x56FD;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;</a>&#xFF1A;&#x4ECE;2017&#x5E74;6&#x6708;9&#x65E5;&#x8D77;&#xFF0C;<strong>Docker &#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x4E86;&#x5728;&#x4E2D;&#x56FD;&#x7684;&#x52A0;&#x901F;&#x5668;</strong>&#xFF0C;&#x4EE5;&#x89E3;&#x51B3;&#x5899;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E0D;&#x7528;&#x6CE8;&#x518C;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;&#xFF1A;<code>https://registry.docker-cn.com</code> &#x5373;&#x53EF;&#x3002;</li>
<li><a href="http://mirrors.ustc.edu.cn/help/dockerhub.html?highlight=docker" target="_blank" rel="noopener">&#x4E2D;&#x56FD;&#x79D1;&#x6280;&#x5927;&#x5B66;&#x7684;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;</a>&#xFF1A;&#x4E2D;&#x79D1;&#x5927;&#x7684;&#x52A0;&#x901F;&#x5668;&#x4E0D;&#x7528;&#x6CE8;&#x518C;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5730;&#x5740; <code>https://docker.mirrors.ustc.edu.cn/</code> &#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#x5373;&#x53EF;&#x3002;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#xFF1A;<a href="http://mirrors.ustc.edu.cn/help/dockerhub.html?highlight=docker" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/help/dockerhub.html?highlight=docker</a></li>
<li><a href="https://cr.console.aliyun.com/#/accelerator" target="_blank" rel="noopener">&#x963F;&#x91CC;&#x4E91;&#x52A0;&#x901F;&#x5668;</a>&#xFF1A;&#x6CE8;&#x518C;&#x963F;&#x91CC;&#x4E91;&#x5F00;&#x53D1;&#x8D26;&#x6237;(<em>&#x514D;&#x8D39;&#x7684;</em>)&#x540E;&#xFF0C;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;&#xFF1A; <a href="https://cr.console.aliyun.com/#/accelerator" target="_blank" rel="noopener">https://cr.console.aliyun.com/#/accelerator</a></li>
<li><a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">DaoCloud &#x52A0;&#x901F;&#x5668;</a>&#xFF1A;<a href="http://account.daocloud.io/signup" target="_blank" rel="noopener">&#x6CE8;&#x518C; <code>DaoCloud</code> &#x8D26;&#x6237;</a>(<em>&#x652F;&#x6301;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;</em>)&#xFF0C;&#x7136;&#x540E;&#x8BBF;&#x95EE;&#xFF1A; <a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">https://www.daocloud.io/mirror#accelerator-doc</a></li>
</ul>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;<strong>&#x4E0D;&#x8981;&#x4F7F;&#x7528;</strong>&#x52A0;&#x901F;&#x5668;&#x7F51;&#x7AD9;&#x6240;&#x7ED9;&#x7684;&#x914D;&#x7F6E;&#x811A;&#x672C;&#xFF0C;&#x5BB9;&#x6613;&#x5BFC;&#x81F4;&#x9519;&#x8BEF;&#x3002;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x83B7;&#x53D6;&#x5176;&#x63D0;&#x4F9B;&#x7684;<strong>&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;</strong>&#x5373;&#x53EF;&#x3002;</p>
</blockquote>
<h4 id="ubuntu-14-04-pei-zhi-jia-su-qi-huo-qi-ta-shi-yong-upstart-de-xi-tong"><a href="#Ubuntu-14-04-&#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF08;&#x6216;&#x5176;&#x5B83;&#x4F7F;&#x7528;-Upstart-&#x7684;&#x7CFB;&#x7EDF;&#xFF09;" class="headerlink" title="Ubuntu 14.04 &#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF08;&#x6216;&#x5176;&#x5B83;&#x4F7F;&#x7528; Upstart &#x7684;&#x7CFB;&#x7EDF;&#xFF09;"></a>Ubuntu 14.04 &#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF08;&#x6216;&#x5176;&#x5B83;&#x4F7F;&#x7528; Upstart &#x7684;&#x7CFB;&#x7EDF;&#xFF09; <a href="#ubuntu-14-04-pei-zhi-jia-su-qi-huo-qi-ta-shi-yong-upstart-de-xi-tong" class="header-anchor">#</a></h4><p><code>Ubuntu 14.04</code> &#x662F;&#x4F7F;&#x7528; <code>upstart</code> &#x8FDB;&#x884C;&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x7C7B;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x901A;&#x8FC7;&#x7F16;&#x8F91;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F; <code>Ubuntu 14.04</code>&#xFF0C;&#x90A3;&#x4E48;&#x7F16;&#x8F91; <code>/etc/default/docker</code>&#xFF0C;&#x5728;&#x91CC;&#x9762;&#x5BFB;&#x627E; <code>DOCKER_OPTS</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#x7684;&#x8FD9;&#x4E00;&#x884C;&#xFF0C;&#x5728;&#x5176;&#x540E;&#x6DFB;&#x52A0; <code>-&#x2013;registry-mirror=&lt;&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;&gt;</code>&#x3002;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x8BE5;&#x884C;&#x5DF2;&#x88AB;&#x6CE8;&#x91CA;&#xFF0C;&#x6216;&#x8005;&#x4E0D;&#x5B58;&#x5728;&#x8BE5;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x65B0;&#x6DFB;&#x4E00;&#x884C;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x6E90;&#x5B89;&#x88C5;&#x4E86; <code>docker-engine</code> &#x540E;&#xFF0C;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684; <code>/etc/default/docker</code>&#xFF0C;&#x5176;&#x4E2D;&#x76F8;&#x5173; <code>DOCKER_OPTS</code> &#x7684;&#x884C;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use DOCKER_OPTS to modify the daemon startup options.</span></span><br><span class="line"><span class="comment">#DOCKER_OPTS=&quot;--dns 8.8.8.8 --dns 8.8.4.4&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x7684;&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;&#x4E3A; <code>https://registry.docker-cn.com</code>&#xFF0C;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E00;&#x884C;&#x914D;&#x7F6E;&#xFF0C;&#x5C06;&#x5176;&#x6539;&#x4E3A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use DOCKER_OPTS to modify the daemon startup options.</span></span><br><span class="line"><span class="comment">#DOCKER_OPTS=&quot;--dns 8.8.8.8 --dns 8.8.4.4&quot;</span></span><br><span class="line">DOCKER_OPTS=<span class="string">&quot;--registry-mirror=https://registry.docker-cn.com&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x4FDD;&#x5B58;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x91CD;&#x542F; Docker &#x5F15;&#x64CE;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service docker restart</span><br><span class="line">docker stop/waiting</span><br><span class="line">docker start/running, process 3620</span><br></pre></td></tr></table></figure>
<p>&#x91CD;&#x542F;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x786E;&#x8BA4;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x751F;&#x6548;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ps -ef | grep dockerd</span><br><span class="line">root      3620     1  0 04:26 ?        00:00:00 /usr/bin/dockerd --registry-mirror=https://registry.docker-cn.com --raw-logs</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6210;&#x529F;&#xFF0C;&#x751F;&#x6548;&#x540E;&#x8FD9;&#x91CC;&#x5C31;&#x4F1A;&#x770B;&#x5230;&#x81EA;&#x5DF1;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x52A0;&#x901F;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<h4 id="ubuntu-16-04-huo-centos-7-pei-zhi-jia-su-qi-huo-qi-ta-shi-yong-systemd-de-xi-tong"><a href="#Ubuntu-16-04-&#x6216;-CentOS-7-&#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF08;&#x6216;&#x5176;&#x5B83;&#x4F7F;&#x7528;-Systemd-&#x7684;&#x7CFB;&#x7EDF;&#xFF09;" class="headerlink" title="Ubuntu 16.04 &#x6216; CentOS 7 &#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF08;&#x6216;&#x5176;&#x5B83;&#x4F7F;&#x7528; Systemd &#x7684;&#x7CFB;&#x7EDF;&#xFF09;"></a>Ubuntu 16.04 &#x6216; CentOS 7 &#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF08;&#x6216;&#x5176;&#x5B83;&#x4F7F;&#x7528; Systemd &#x7684;&#x7CFB;&#x7EDF;&#xFF09; <a href="#ubuntu-16-04-huo-centos-7-pei-zhi-jia-su-qi-huo-qi-ta-shi-yong-systemd-de-xi-tong" class="header-anchor">#</a></h4><p><code>Ubuntu 16.04</code> &#x548C; <code>CentOS 7</code> &#x8FD9;&#x7C7B;&#x7CFB;&#x7EDF;&#x90FD;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x4F7F;&#x7528; <code>systemd</code> &#x8FDB;&#x884C;&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x7BA1;&#x7406;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528; <code>systemd</code> &#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x5E94;&#x8BE5;&#x901A;&#x8FC7;&#x7F16;&#x8F91;&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6; <code>docker.service</code> &#x6765;&#x8FDB;&#x884C;&#x52A0;&#x901F;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<p>&#x5728;&#x542F;&#x7528;&#x670D;&#x52A1;&#x540E;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7F16;&#x8F91; <code>/etc/systemd/system/multi-user.target.wants/docker.service</code> &#x6587;&#x4EF6;&#x6765;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/multi-user.target.wants/docker.service</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230; <code>ExecStart=</code> &#x8FD9;&#x4E00;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x5176;&#x884C;&#x5C3E;&#x6DFB;&#x52A0;&#x4E0A;&#x6240;&#x9700;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x7684;&#x52A0;&#x901F;&#x5668;&#x5730;&#x5740;&#x4E3A; <code>https://registry.docker-cn.com</code>&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ExecStart</span>=/usr/bin/dockerd --registry-mirror=https://registry.docker-cn.com</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&#x6CE8;: Docker 1.12 &#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF0C;<code>dockerd</code> &#x5E94;&#x8BE5;&#x6362;&#x4E3A; <code>docker daemon</code>&#xFF0C;&#x66F4;&#x65E9;&#x7684;&#x7248;&#x672C;&#x5219;&#x662F; <code>docker -d</code>&#x3002;&#x4E0D;&#x8FC7;&#x8FD8;&#x5728;&#x7528;&#x90A3;&#x4E9B;&#x7248;&#x672C;&#x7684;&#x7AE5;&#x978B;&#xFF0C;&#x5347;&#x7EA7;&#x5427;&#x2026;&#x2026;&#x1F613;</p>
</blockquote>
<p>&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x5E76;&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>&#x786E;&#x8BA4;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x751F;&#x6548;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ps -ef | grep dockerd</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6210;&#x529F;&#xFF0C;&#x751F;&#x6548;&#x540E;&#x5C31;&#x4F1A;&#x5728;&#x8FD9;&#x91CC;&#x770B;&#x5230;&#x81EA;&#x5DF1;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x52A0;&#x901F;&#x5668;&#x3002;</p>
<p>&#x5728; <code>1.13</code> &#x7248;&#x672C;&#x4EE5;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5; <code>docker info</code> &#x67E5;&#x770B;&#xFF0C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6210;&#x529F;&#xFF0C;&#x52A0;&#x901F;&#x5668; <code>Registry Mirror</code> &#x4F1A;&#x5728;&#x6700;&#x4E0B;&#x9762;&#x5217;&#x51FA;&#x6765;&#x3002;</p>
<p>&#x5982;&#x679C;&#x91CD;&#x542F;&#x540E;&#x53D1;&#x73B0;&#x65E0;&#x6CD5;&#x542F;&#x52A8; <code>docker</code> &#x670D;&#x52A1;&#xFF0C;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;&#x670D;&#x52A1;&#x65E5;&#x5FD7;&#xFF0C;&#x770B;&#x770B;&#x662F;&#x4E0D;&#x662F;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x8FC7;&#x90A3;&#x4E9B;&#x52A0;&#x901F;&#x5668;&#x7F51;&#x7AD9;&#x7684;&#x811A;&#x672C;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x505A;&#x8FC7;&#x7C7B;&#x4F3C;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;&#x662F;&#x4E0D;&#x662F;&#x88AB;&#x5EFA;&#x7ACB;&#x4E86; <code>/etc/docker/daemon.json</code> &#x4EE5;&#x914D;&#x7F6E;&#x52A0;&#x901F;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#xFF0C;&#x5220;&#x6389;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x3002;</p>
<p>&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;&#x4EF6;&#x597D;&#x4E8B;&#xFF0C;&#x6BD4;&#x5982;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4E0D;&#x5FC5;&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF0C;&#x53EA;&#x9700;&#x53D1;&#x9001; <code>SIGHUP</code> &#x4FE1;&#x53F7;&#x5373;&#x53EF;&#x3002;&#x4F46;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x76EE;&#x524D;&#x5728; <code>dockerd</code> &#x4E2D;&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x65E0;&#x6CD5;&#x8F93;&#x51FA;&#x5F53;&#x524D;&#x751F;&#x6548;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x4E14;&#x5F53; <code>dockerd</code> &#x7684;&#x53C2;&#x6570;&#x548C; <code>daemon.json</code> &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x6709;&#x6240;&#x91CD;&#x590D;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x4F18;&#x5148;&#x7EA7;&#x8986;&#x76D6;&#x53E6;&#x4E00;&#x4E2A;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x76F4;&#x63A5;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x542F;&#x52A8;&#x5931;&#x8D25;&#x3002;&#x5F88;&#x591A;&#x4EBA;&#x53D1;&#x73B0;&#x914D;&#x4E86;&#x52A0;&#x901F;&#x5668;&#x540E; Docker &#x542F;&#x52A8;&#x4E0D;&#x8D77;&#x6765;&#x4E86;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x3002;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53BB;&#x6389;&#x91CD;&#x590D;&#x9879;&#x3002;&#x4E0D;&#x8FC7;&#x5728;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x524D;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x4FEE;&#x6539; <code>docker.service</code> &#x8FD9;&#x7C7B;&#x505A;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x914D;&#x7F6E;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6; <code>daemon.json</code>&#x3002;&#x65B9;&#x4FBF; <code>ps -ef | grep dockerd</code> &#x4E00;&#x773C;&#x770B;&#x5230;&#x5B9E;&#x9645;&#x914D;&#x7F6E;&#x60C5;&#x51B5;&#x3002;</p>
<h3 id="zen-me-xiu-gai-liao-docker-fu-wu-pei-zhi-hou-bu-qi-zuo-yong"><a href="#&#x600E;&#x4E48;&#x4FEE;&#x6539;&#x4E86;-docker-&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x540E;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF1F;" class="headerlink" title="&#x600E;&#x4E48;&#x4FEE;&#x6539;&#x4E86; docker &#x670D;&#x52A1;&#x914D;&#x7F6E;&#x540E;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF1F;"></a>&#x600E;&#x4E48;&#x4FEE;&#x6539;&#x4E86; docker &#x670D;&#x52A1;&#x914D;&#x7F6E;&#x540E;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF1F; <a href="#zen-me-xiu-gai-liao-docker-fu-wu-pei-zhi-hou-bu-qi-zuo-yong" class="header-anchor">#</a></h3><p>&#x6539;&#x52A8;&#x771F;&#x7684;&#x751F;&#x6548;&#x4E86;&#x4E48;&#xFF1F;&#x5728;&#x5BBF;&#x4E3B;&#x4E0A;&#x8FD0;&#x884C;&#x4E00;&#x4E0B; <code>ps -ef | grep dockerd</code> &#x770B;&#x770B;&#xFF0C;&#x81EA;&#x5DF1;&#x505A;&#x7684;&#x90A3;&#x4E9B;&#x914D;&#x7F6E;&#x6709;&#x4E48;&#xFF1F;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#x5C31;&#x8BF4;&#x660E;&#x6CA1;&#x6709;&#x751F;&#x6548;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8981;&#x68C0;&#x67E5;&#x539F;&#x56E0;&#x4E86;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6539;&#x5B8C;&#x914D;&#x7F6E;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x4E86;&#x4E48;&#xFF1F;&#x867D;&#x7136;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x770B;&#x7740;&#x5F88;&#x5C0F;&#x767D;&#xFF0C;&#x4F46;&#x662F;&#x786E;&#x5B9E;&#x5F88;&#x591A;&#x4EBA;&#x72AF;&#x4E86;&#x8FD9;&#x4E2A;&#x5C0F;&#x767D;&#x7684;&#x9519;&#x8BEF;&#x3002;</p>
<ul>
<li><code>Ubuntu 14.04</code>: <code>sudo service docker restart</code></li>
<li><code>Ubuntu 16.04</code>, <code>CentOS 7</code>: <code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker</code></li>
</ul>
<p>&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x6539;&#x5BF9;&#x4E86;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E86;&#x4E48;&#xFF1F;</p>
<p>&#x4E0D;&#x5C11;&#x4EBA;&#x61D2;&#x5F97;&#x770B;&#x82F1;&#x6587;&#x6587;&#x6863;&#xFF0C;<em>&#x767E;&#x5EA6;</em>&#x4E2A;&#x6587;&#x7AE0;&#x5C31;&#x7167;&#x7740;&#x914D;&#xFF0C;&#x65E2;&#x4E0D;&#x7BA1;&#x767E;&#x5EA6;&#x5F97;&#x5230;&#x7684;&#x6587;&#x7AE0;&#x6240;&#x8BB2;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E5F;&#x6CA1;&#x6CE8;&#x610F;&#x7248;&#x672C;&#xFF0C;&#x800C;&#x4E14;&#x4E2D;&#x6587;&#x6587;&#x7AE0;&#x5F80;&#x5F80;&#x81EA;&#x8EAB;&#x8868;&#x8FBE;&#x63CF;&#x8FF0;&#x4E0D;&#x6E05;&#x695A;&#xFF0C;&#x5F88;&#x591A;&#x60F3;&#x5F53;&#x7136;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x7ED3;&#x679C;&#x65E0;&#x6570;&#x5751;&#x3002;&#x8FD9;&#x4E48;&#x767E;&#x5EA6;&#x7684;&#x4EBA;&#xFF0C;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x538B;&#x6839;&#x5C31;&#x6539;&#x9519;&#x4E86;&#x6587;&#x4EF6;&#x3002;</p>
<blockquote>
<p>&#x73CD;&#x7231;&#x751F;&#x547D;&#xFF0C;&#x8FDC;&#x79BB;&#x767E;&#x5EA6;&#x3002;</p>
</blockquote>
<p>&#x6700;&#x8FD1;&#x4E24;&#x5E74;&#x5904;&#x4E8E; <code>upstart</code> &#x5230; <code>systemd</code> &#x7684;&#x8FC7;&#x6E21;&#x671F;&#xFF0C;&#x6240;&#x4EE5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7684;&#x65B9;&#x5F0F;<strong>&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x7CFB;&#x7EDF;&#x7248;&#x672C;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;</strong>&#xFF0C;&#x8981;&#x770B;&#x770B;&#x81EA;&#x5DF1;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x4EE5;&#x53CA;&#x4EC0;&#x4E48;&#x7248;&#x672C;&#x3002;</p>
<p>&#x5BF9;&#x4E8E; <code>upstart</code> &#x7684;&#x7CFB;&#x7EDF;&#xFF08;<code>Ubuntu 14.10</code>&#x6216;&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF0C;<code>Debian 7</code>&#x6216;&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF09;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x5728; <code>/etc/default/docker</code>&#xFF0C;&#x5176;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x57FA;&#x672C;&#x662F;&#x914D;&#x7F6E; <code>DOCKER_*</code> &#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x800C;&#x5BF9;&#x4E8E; <code>systemd</code> &#x7684;&#x7CFB;&#x7EDF;(<code>Ubuntu 15.04</code>&#x53CA;&#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF0C;<code>Debian 8</code>&#x53CA;&#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF0C;<code>CentOS 7</code>/<code>RHEL 7</code>&#x53CA;&#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;)&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5219;&#x5728; <code>systemd</code> &#x7684;&#x914D;&#x7F6E;&#x76EE;&#x5F55;&#x4E0B;&#x3002;</p>
<p>&#x9996;&#x5148;&#x5E94;&#x8BE5; <code>enable</code> &#x8BE5;&#x670D;&#x52A1;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6; <code>/etc/systemd/system/multi-user.target.wants/docker.service</code> &#xFF08;&#x53EA;&#x8981;&#x670D;&#x52A1; <code>enable</code> &#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x7BA1;&#x4EC0;&#x4E48;&#x7CFB;&#x7EDF;&#xFF0C;&#x5E94;&#x8BE5;&#x90FD;&#x4F1A;&#x5728;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x770B;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF09;</p>
<blockquote>
<p>&#x8981;&#x6CE8;&#x610F; <code>upstart</code> &#x7684;&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C; <code>systemd</code> &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x683C;&#x5F0F;&#x662F;<strong>&#x4E0D;&#x540C;&#x7684;</strong>&#xFF0C;&#x4E0D;&#x8981;&#x62FF;&#x7740; <code>upstart</code> &#x7684;&#x914D;&#x7F6E;&#x884C;&#x76F4;&#x63A5;&#x590D;&#x5236;&#x7C98;&#x8D34;&#x5230; <code>systemd</code> &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CC;&#xFF0C;&#x4E24;&#x7801;&#x4E8B;&#x513F;&#xFF0C;&#x8BF7;&#x5148;&#x5B66;&#x4E60;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x3002;</p>
</blockquote>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<br><a href="https://docs.docker.com/engine/admin/configuring/#ubuntu" target="_blank" rel="noopener">https://docs.docker.com/engine/admin/configuring/#ubuntu</a><br><a href="https://docs.docker.com/engine/admin/systemd/" target="_blank" rel="noopener">https://docs.docker.com/engine/admin/systemd/</a></p>
<h3 id="ru-guo-docker-sheng-ji-huo-zhe-chong-qi-de-hua-na-rong-qi-shi-bu-shi-du-hui-bei-ting-diao-ran-hou-chong-qi-a"><a href="#&#x5982;&#x679C;-Docker-&#x5347;&#x7EA7;&#x6216;&#x8005;&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x5BB9;&#x5668;&#x662F;&#x4E0D;&#x662F;&#x90FD;&#x4F1A;&#x88AB;&#x505C;&#x6389;&#x7136;&#x540E;&#x91CD;&#x542F;&#x554A;&#xFF1F;" class="headerlink" title="&#x5982;&#x679C; Docker &#x5347;&#x7EA7;&#x6216;&#x8005;&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x5BB9;&#x5668;&#x662F;&#x4E0D;&#x662F;&#x90FD;&#x4F1A;&#x88AB;&#x505C;&#x6389;&#x7136;&#x540E;&#x91CD;&#x542F;&#x554A;&#xFF1F;"></a>&#x5982;&#x679C; Docker &#x5347;&#x7EA7;&#x6216;&#x8005;&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x5BB9;&#x5668;&#x662F;&#x4E0D;&#x662F;&#x90FD;&#x4F1A;&#x88AB;&#x505C;&#x6389;&#x7136;&#x540E;&#x91CD;&#x542F;&#x554A;&#xFF1F; <a href="#ru-guo-docker-sheng-ji-huo-zhe-chong-qi-de-hua-na-rong-qi-shi-bu-shi-du-hui-bei-ting-diao-ran-hou-chong-qi-a" class="header-anchor">#</a></h3><p>&#x5728; <code>1.12</code> &#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;&#x786E;&#x5B9E;&#x5982;&#x6B64;&#xFF0C;&#x4F46;&#x662F;&#x4ECE; <code>1.12</code> &#x5F00;&#x59CB;&#xFF0C;Docker &#x5F15;&#x64CE;&#x52A0;&#x5165;&#x4E86; <code>--live-restore</code> &#x53C2;&#x6570;&#xFF0C;&#x4F7F;&#x7528;&#x8BE5;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5F15;&#x64CE;&#x5347;&#x7EA7;&#x3001;&#x91CD;&#x542F;&#x5BFC;&#x81F4;&#x5BB9;&#x5668;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x8BE5;&#x529F;&#x80FD;&#x4E0D;&#x4F1A;&#x88AB;&#x542F;&#x52A8;&#xFF0C;&#x5982;&#x9700;&#x542F;&#x52A8;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E; <code>docker</code> &#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x6BD4;&#x5982; <code>Ubuntu 16.04</code> &#x8FD9;&#x7C7B; <code>systemd</code> &#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539; <code>/etc/systemd/system/multi-user.target.wants/docker.service</code> &#x6587;&#x4EF6;&#xFF0C;&#x5728; <code>ExecStart=</code> &#x540E;&#x9762;&#x914D;&#x7F6E;&#x4E0A; <code>--live-restore</code>&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ExecStart=/usr/bin/dockerd \</span><br><span class="line">    --registry-mirror=https://registry.docker-cn.com \</span><br><span class="line">    --live-restore</span><br></pre></td></tr></table></figure>
<p>&#x4E0A;&#x9762;&#x7684;&#x683C;&#x5F0F;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x884C;&#x5C3E; <code>\</code> &#x7684;&#x6362;&#x884C;&#x5F62;&#x5F0F;&#xFF0C;&#x8FD9;&#x70B9;&#x548C; <code>bash</code> &#x811A;&#x672C;&#x4E00;&#x6837;&#xFF0C;<code>systemd</code> &#x652F;&#x6301;&#x8FD9;&#x79CD;&#x6362;&#x884C;&#x5F62;&#x5F0F;&#xFF0C;&#x5982;&#x5BF9;&#x6B64;&#x4E0D;&#x4E86;&#x89E3;&#x53EF;&#x4EE5;&#x5148;&#x53BB;&#x5B66;&#x4E60; <code>bash</code> &#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;<code>--live-restore</code> &#x548C; <code>Swarm Mode</code> &#x4E0D;&#x517C;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x4E2D;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x4E5F;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#x90FD;&#x4F1A;&#x88AB;&#x8C03;&#x5EA6;&#x5230;&#x522B;&#x7684;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;&#x670D;&#x52A1;&#x5E76;&#x4E0D;&#x4F1A;&#x88AB;&#x4E2D;&#x65AD;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x6587;&#x6863;&#xFF1A;</p>
<ul>
<li><a href="https://docs.docker.com/engine/admin/live-restore/" target="_blank" rel="noopener">https://docs.docker.com/engine/admin/live-restore/</a></li>
</ul>
<h3 id="wei-shi-me-zhi-xing-docker-ming-ling-hui-bao-permission-denied-mei-quan-xian-de-cuo-wu-a"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x6267;&#x884C;-docker-&#x547D;&#x4EE4;&#x4F1A;&#x62A5;-permission-denied-&#x6CA1;&#x6743;&#x9650;&#x7684;&#x9519;&#x8BEF;&#x554A;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x6267;&#x884C; docker &#x547D;&#x4EE4;&#x4F1A;&#x62A5; permission denied &#x6CA1;&#x6743;&#x9650;&#x7684;&#x9519;&#x8BEF;&#x554A;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x6267;&#x884C; docker &#x547D;&#x4EE4;&#x4F1A;&#x62A5; <code>permission denied</code> &#x6CA1;&#x6743;&#x9650;&#x7684;&#x9519;&#x8BEF;&#x554A;&#xFF1F; <a href="#wei-shi-me-zhi-xing-docker-ming-ling-hui-bao-permission-denied-mei-quan-xian-de-cuo-wu-a" class="header-anchor">#</a></h3><p>&#x5728; Linux &#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x4E00;&#x4E9B;&#x65B0;&#x88C5;&#x4E86; docker &#x7684;&#x7528;&#x6237;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4F7F;&#x7528;&#x4E86; <code>sudo</code> &#x547D;&#x4EE4;&#x5B89;&#x88C5;&#x597D;&#x4E86; Docker &#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x5F53;&#x524D;&#x7528;&#x6237;&#x4E00;&#x6267;&#x884C; <code>docker</code> &#x547D;&#x4EE4;&#xFF0C;&#x5C31;&#x4F1A;&#x62A5;&#x6CA1;&#x6743;&#x9650;&#x7684;&#x9519;&#x8BEF;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dial unix /var/run/docker.sock: permission denied</span><br></pre></td></tr></table></figure>
<p>&#x4E00;&#x4E9B;&#x6765;&#x81EA;&#x4E8E; Windows &#x4E16;&#x754C;&#x7684;&#x4EBA;&#xFF0C;&#x5C31;&#x4F1A;&#x8E66;&#x51FA;&#x6765;&#x8BF4;&#xFF0C;&#x7528; <code>root</code> &#x5440;&#x2026;&#x2026;&#x1F613;&#x3002;&#x800C;&#x53E6;&#x4E00;&#x4E9B;&#x6709;&#x57FA;&#x672C;&#x5E38;&#x8BC6;&#x3001;&#x77E5;&#x9053;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>root</code> &#x4EBA;&#x53EF;&#x80FD;&#x4F1A;&#x8BF4;&#xFF0C;&#x90A3;&#x5C31;&#x7528; <code>sudo docker</code> &#x5427;&#x3002;&#x8FD9;&#x4E24;&#x8005;&#x90FD;&#x662F;&#x4E0D;&#x5BF9;&#x7684;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x4E0D;&#x5408;&#x9002;&#x7684;&#x3002;</p>
<p>&#x8BF4;&#x4F7F;&#x7528; <code>root</code> &#x7684;&#x4EBA;&#xFF0C;&#x5E94;&#x8BE5;&#x56DE;&#x53BB;&#x597D;&#x597D;&#x5B66;&#x4E60;&#x4E00;&#x4E0B; Linux &#x6743;&#x9650;&#x5E38;&#x8BC6;&#x3002;&#x4E00;&#x822C; <strong>&#x4E0D;&#x5E94;&#x8BE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>root</code> &#x7528;&#x6237;</strong>&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>root</code> &#x7528;&#x6237;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E25;&#x91CD;&#x7684;&#x8FDD;&#x53CD;&#x4E86;&#x5B89;&#x5168;&#x89C4;&#x8303;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x6781;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x64CD;&#x4F5C;&#x4E8B;&#x6545;&#x3002;&#x8FD9;&#x4E0D;&#x662F; Windows &#x4E16;&#x754C;&#xFF0C;Linux/Unix &#x4E16;&#x754C;&#x662F;&#x6709;&#x4E25;&#x683C;&#x7684;&#x6743;&#x9650;&#x8981;&#x6C42;&#x7684;&#xFF0C;&#x53EA;&#x5E94;&#x8BE5;<strong>&#x4F7F;&#x7528;&#x6700;&#x5C0F;&#x7684;&#x6743;&#x9650;&#x505A;&#x4E8B;&#x60C5;</strong>&#x3002;&#x5982;&#x679C;&#x8FD8;&#x4E0D;&#x719F;&#x6089; Linux &#x6743;&#x9650;&#x673A;&#x5236;&#xFF0C;&#x90A3;&#x5C31;&#x53BB;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#xFF0C;&#x4E0D;&#x8981;&#x628A; Windows &#x7684;&#x574F;&#x6BDB;&#x75C5;&#x5E26;&#x8FC7;&#x6765;&#x3002;</p>
<p>&#x8BF4;&#x4F7F;&#x7528; <code>sudo docker</code> &#x7684;&#x4EBA;&#xFF0C;&#x601D;&#x8DEF;&#x662F;&#x5BF9;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x7406;&#x89E3;&#x4E86;&#x5E73;&#x65F6;&#x64CD;&#x4F5C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x7528;&#x6237;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x9700;&#x8981;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x624D; <code>sudo</code> &#x63D0;&#x5347;&#x6743;&#x9650;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#x95EE;&#x9898;&#x5C31;&#x5728;&#x8FD9;&#x4E2A;<strong>&#x9700;&#x8981;</strong>&#x4E8C;&#x5B57;&#x4E0A;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;<strong>&#x4E0D;&#x9700;&#x8981; <code>root</code> &#x6743;&#x9650;&#x5C31;&#x53EF;&#x4EE5;&#x6267;&#x884C; <code>docker</code> &#x547D;&#x4EE4;</strong>&#x3002;</p>
<p>&#x5176;&#x5B9E;&#x5982;&#x679C;&#x770B;&#x8FC7;<a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener">&#x5B98;&#x65B9;&#x5B89;&#x88C5;&#x6587;&#x6863;</a>&#x7684;&#x8BDD;&#x90FD;&#x4F1A;&#x77E5;&#x9053;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x64CD;&#x4F5C; <code>docker</code> &#x7684;&#x7528;&#x6237;&#xFF0C;&#x52A0;&#x5165; <code>docker</code> &#x7EC4;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x7528;&#x6237;&#x65E2;&#x62E5;&#x6709;&#x4E86;&#x64CD;&#x4F5C; <code>docker</code> &#x7684;&#x6743;&#x9650;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6267;&#x884C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure>
<p>&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x5F53;&#x524D;&#x7528;&#x6237;&#x52A0;&#x5165; <code>docker</code> &#x7EC4;&#xFF0C;<strong>&#x9000;&#x51FA;&#x3001;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x540E;</strong>&#xFF0C;&#x6267;&#x884C; <code>docker info</code> &#x770B;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x53EF;&#x4EE5;&#x4E0D;&#x7528; <code>sudo</code> &#x76F4;&#x63A5;&#x6267;&#x884C; <code>docker</code> &#x547D;&#x4EE4;&#x4E86;&#x3002;</p>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x522B;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x5C06;&#x5176;&#x4E2D;&#x7684; <code>$USER</code> &#x6362;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x7528;&#x6237;&#x540D;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5C06;&#x7528;&#x6237;&#x6DFB;&#x52A0;&#x5230; <code>docker</code> &#x7EC4;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D; <code>root</code> &#x6743;&#x9650;&#x8BEF;&#x64CD;&#x4F5C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E; <code>dockerd</code> &#x5F15;&#x64CE;&#x662F;&#x8FD0;&#x884C;&#x5728; <code>root</code> &#x7528;&#x6237;&#x4E0B;&#x7684;&#xFF0C;&#x800C; <code>docker</code> &#x7EC4;&#x6210;&#x5458;&#x6709;&#x6743;&#x9650;&#x6307;&#x6325; <code>dockerd</code> &#x5F15;&#x64CE;&#x6765;&#x505A;&#x5F88;&#x591A;&#x4E8B;&#x60C5;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x8BE5;&#x7528;&#x6237;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x62E5;&#x6709;&#x4E86; <code>root</code> &#x7684;&#x6743;&#x9650;&#x7684;&#x3002;&#x56E0;&#x6B64;&#x4E0D;&#x8981;&#x8BEF;&#x89E3;&#x4E86;&#x5C06;&#x5F53;&#x524D;&#x7528;&#x6237;&#x52A0;&#x5165; <code>docker</code> &#x7EC4;&#x7684;&#x521D;&#x8877;&#xFF0C;&#x8FD9;&#x548C;&#x8D4B;&#x4E88;&#x7528;&#x6237; <code>sudo</code> &#x6743;&#x529B;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x53EF;&#x4E0D;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A;&#x7528;&#x6237;&#x5C31;&#x6CA1;&#x6709; <code>root</code> &#x6743;&#x9650;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x53EA;&#x662F;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>sudo</code> &#x4E86;&#xFF0C;&#x4E5F;&#x964D;&#x4F4E;&#x4E86;&#x4F7F;&#x7528; <code>sudo</code> &#x65F6;&#x8BEF;&#x64CD;&#x4F5C;&#x7684;&#x53EF;&#x80FD;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x6743;&#x9650;&#x95EE;&#x9898;&#xFF0C;&#x5168;&#x662F;&#x6307;&#x4F7F;&#x7528; <code>docker</code> &#x547D;&#x4EE4;&#x64CD;&#x4F5C;<strong>&#x672C;&#x673A;</strong> <code>dockerd</code> &#x5F15;&#x64CE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x901A;&#x8FC7; <code>/var/run/docker.sock</code> &#x6765;&#x64CD;&#x4F5C; <code>dockerd</code> &#x5F15;&#x64CE;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x79CD;&#x6709;&#x4E4B;&#x524D;&#x8BF4;&#x7684;&#x6743;&#x9650;&#x7C7B;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x800C; <code>docker</code> &#x547D;&#x4EE4;&#x8FD8;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;<strong>&#x8FDC;&#x7A0B;</strong> <code>dockerd</code> &#x7684;&#x5F15;&#x64CE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; <code>-H</code> &#x53C2;&#x6570;&#xFF0C;&#x6216;&#x8005; <code>DOCKER_HOST</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6240;&#x6307;&#x5B9A;&#x7684; Docker &#x4E3B;&#x673A;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x901A;&#x8BAF;&#x8D70;&#x7684;&#x662F;&#x7F51;&#x7EDC;&#x3001;HTTP&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;&#x6743;&#x9650;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6253;&#x7B97;&#x64CD;&#x4F5C;&#x672C;&#x673A;&#x7684; <code>dockerd</code> &#x5F15;&#x64CE;&#xFF0C;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x5C06;&#x7528;&#x6237;&#x52A0;&#x5165; <code>docker</code> &#x7EC4;&#xFF0C;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x3002;</p>
<h3 id="fu-wu-qi-shang-xian-hou-zen-me-fa-xian-zong-you-ge-xmrig-de-rong-qi-zai-pao-shan-liao-huan-chu-lai-zhe-shi-shi-me-gui"><a href="#&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x600E;&#x4E48;&#x53D1;&#x73B0;&#x603B;&#x6709;&#x4E2A;-xmrig-&#x7684;&#x5BB9;&#x5668;&#x5728;&#x8DD1;&#xFF0C;&#x5220;&#x4E86;&#x8FD8;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F;" class="headerlink" title="&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x600E;&#x4E48;&#x53D1;&#x73B0;&#x603B;&#x6709;&#x4E2A; xmrig &#x7684;&#x5BB9;&#x5668;&#x5728;&#x8DD1;&#xFF0C;&#x5220;&#x4E86;&#x8FD8;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F;"></a>&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x600E;&#x4E48;&#x53D1;&#x73B0;&#x603B;&#x6709;&#x4E2A; <code>xmrig</code> &#x7684;&#x5BB9;&#x5668;&#x5728;&#x8DD1;&#xFF0C;&#x5220;&#x4E86;&#x8FD8;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F; <a href="#fu-wu-qi-shang-xian-hou-zen-me-fa-xian-zong-you-ge-xmrig-de-rong-qi-zai-pao-shan-liao-huan-chu-lai-zhe-shi-shi-me-gui" class="header-anchor">#</a></h3><blockquote>
<p><strong>&#x8B66;&#x544A;&#xFF01;&#xFF01;</strong>&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5DF2;&#x7ECF;<strong>&#x88AB;&#x5165;&#x4FB5;&#x4E86;</strong>&#xFF01;&#xFF01;</p>
</blockquote>
<p>&#x6709;&#x4E9B;&#x4EBA;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x7A81;&#x7136;&#x591A;&#x4E86;&#x4E00;&#x4E9B;&#x83AB;&#x540D;&#x5947;&#x5999;&#x7684;&#x5BB9;&#x5668;&#x5728;&#x8DD1;&#x3002;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps</span><br><span class="line">IMAGE           COMMAND                  CREATED      STATUS                      PORTS    NAMES</span><br><span class="line">linuxrun/cpu2   <span class="string">&quot;./xmrig --algo=cr....&quot;</span>  4 hours ago  Exited (137) 7 minutes ago           linuxrun-cpu2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x5C31;&#x662F;&#x6709;&#x4EBA;&#x5728;&#x4F60;&#x7684; Docker &#x5BBF;&#x4E3B;&#x4E0A;&#x8DD1;&#x4E86;&#x4E00;&#x4E2A; <code>xmrig</code> &#x6316;&#x77FF;&#x7684;&#x8815;&#x866B;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;<strong>&#x88AB;&#x5165;&#x4FB5;&#x4E86;</strong>&#x2026;&#x2026;&#x1F613;&#x3002;</p>
<p>&#x5728;&#x4F60;&#x5927;&#x53EB; Docker &#x4E0D;&#x5B89;&#x5168;&#x4E4B;&#x524D;&#xFF0C;<em>&#x5148;&#x68C0;&#x8BA8;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;</em>&#x662F;&#x4E0D;&#x662F;&#x505A;&#x9519;&#x4E86;&#x3002;&#x68C0;&#x67E5;&#x4E00;&#x4E0B; <code>dockerd</code> &#x5F15;&#x64CE;&#x662F;&#x5426;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&#xFF1A;<code>ps -ef | grep dockerd</code>&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x770B;&#x5230;&#x7684;&#x662F;&#x8FD9;&#x6837;&#x5B50;&#x7684;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef | grep dockerd</span><br><span class="line">123  root   12:34   /usr/bin/dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x5728;&#x5176;&#x4E2D;&#x6CA1;&#x6709; <code>--tlsverify</code> &#x7C7B;&#x7684; TLS &#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x5C31;&#x8BF4;&#x660E;&#x4F60;&#x5C06;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x5927;&#x95E8;&#x5F7B;&#x5E95;&#x655E;&#x5F00;&#x4E86;&#x3002;&#x8FD9;&#x662F;&#x914D;&#x7F6E;&#x4E0A;<strong>&#x4E25;&#x91CD;&#x7684;&#x5B89;&#x5168;&#x4E8B;&#x6545;</strong>&#x3002;</p>
<p><code>-H tcp://0.0.0.0:2375</code> &#x662F;&#x8BF4;&#x4F60;&#x5E0C;&#x671B;&#x901A;&#x8FC7; <code>2375/tcp</code> &#x6765;&#x64CD;&#x63A7;&#x4F60;&#x7684; Docker &#x5F15;&#x64CE;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x52A0; <code>--tlsverify</code> &#x7C7B;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5C31;&#x8868;&#x660E;&#x4F60;&#x7684;&#x610F;&#x56FE;&#x662F;<strong>&#x5141;&#x8BB8;&#x4EFB;&#x4F55;&#x4EBA;</strong>&#x6765;&#x64CD;&#x63A7;&#x4F60;&#x7684; Docker &#x5F15;&#x64CE;&#xFF0C;&#x800C; Docker &#x5F15;&#x64CE;&#x662F;&#x4EE5; <code>root</code> &#x6743;&#x9650;&#x5141;&#x8BB8;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x4F60;&#x7B49;&#x4E8E;&#x7ED9;&#x4E86;<strong>&#x5730;&#x7403;&#x4E0A;&#x6240;&#x6709;&#x4EBA;</strong>&#x4F60;&#x670D;&#x52A1;&#x5668;&#x7684; <code>root</code> &#x6743;&#x9650;&#xFF0C;&#x800C;&#x4E14;<strong>&#x8FD8;&#x6CA1;&#x5BC6;&#x7801;</strong>&#x3002;</p>
<p>&#x5982;&#x679C;&#x7EC6;&#x5FC3;&#x4E00;&#x4E9B;&#xFF0C;&#x53BB;&#x67E5;&#x770B; <code>dockerd</code> &#x7684;&#x670D;&#x52A1;&#x65E5;&#x5FD7;&#xFF0C;<code>journalctl -u docker</code>&#xFF0C;&#x65E5;&#x5FD7;&#x4E2D;&#x6709;&#x660E;&#x786E;&#x7684;&#x8B66;&#x544A;&#xFF0C;&#x8B66;&#x544A;&#x4F60;&#x8FD9;&#x4E48;&#x914D;&#x7F6E;&#x662F;&#x6781;&#x7AEF;&#x5371;&#x9669;&#x7684;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ journalctl -u docker</span><br><span class="line">...</span><br><span class="line">level=warning msg=<span class="string">&quot;[!] DON&apos;T BIND ON ANY IP ADDRESS WITHOUT setting --tlsverify IF YOU DON&apos;T KNOW WHAT YOU&apos;RE DOING [!]&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x8FD9;&#x4E9B;&#x4F60;&#x90FD;&#x5FFD;&#x7565;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x88AB;&#x522B;&#x4EBA;&#x5165;&#x4FB5;&#x5C31;&#x592A;&#x6B63;&#x5E38;&#x4E86;&#xFF0C;&#x662F;&#x4F60;&#x81EA;&#x5DF1;<em>&#x9080;&#x8BF7;</em>&#x522B;&#x4EBA;&#x6765;&#x7684;&#x3002;&#x6240;&#x4EE5;&#xFF0C;Docker &#x670D;&#x52A1;&#x7ED1;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;<em>&#x5FC5;&#x987B;</em>&#x901A;&#x8FC7; TLS &#x4FDD;&#x62A4;&#x8D77;&#x6765;&#xFF0C;&#x4EE5;&#x540E;&#x89C1;&#x5230; <code>-H tcp://....</code> &#x5C31;&#x8981;&#x68C0;&#x67E5;&#xFF0C;&#x662F;&#x5426;&#x540C;&#x65F6;&#x914D;&#x7F6E;&#x4E86; <code>--tlsverify</code>&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x770B;&#x5230;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x4E25;&#x91CD;&#x9519;&#x8BEF;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x63A8;&#x8350;&#x4F7F;&#x7528; <code>docker-machine</code> &#x8FDB;&#x884C; Docker &#x5BBF;&#x4E3B;&#x7BA1;&#x7406;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x56E0;&#x4E3A; <code>docker-machine</code> &#x4F1A;&#x5E2E;&#x4F60;&#x521B;&#x5EFA;&#x8BC1;&#x4E66;&#x3001;&#x914D;&#x7F6E; TLS&#xFF0C;&#x786E;&#x4FDD;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5B89;&#x5168;&#x3002;</p>
<p>&#x8FDB;&#x4E00;&#x6B65;&#x5982;&#x4F55;&#x914D;&#x7F6E; TLS &#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/security/https/" target="_blank" rel="noopener">https://docs.docker.com/engine/security/https/</a><br>&#x5173;&#x4E8E; <code>docker-machine</code> &#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/machine/overview/" target="_blank" rel="noopener">https://docs.docker.com/machine/overview/</a></p>
<h2 id="wang-luo-wen-ti-13"><a href="#&#x7F51;&#x7EDC;&#x95EE;&#x9898;-13" class="headerlink" title="&#x7F51;&#x7EDC;&#x95EE;&#x9898; (13)"></a>&#x7F51;&#x7EDC;&#x95EE;&#x9898; <code>(13)</code> <a href="#wang-luo-wen-ti-13" class="header-anchor">#</a></h2><h3 id="zen-me-gu-ding-rong-qi-ip-di-zhi-mei-ci-chong-qi-rong-qi-du-yao-bian-hua-ip-di-zhi-zen-me-ban"><a href="#&#x600E;&#x4E48;&#x56FA;&#x5B9A;&#x5BB9;&#x5668;-IP-&#x5730;&#x5740;&#xFF1F;&#x6BCF;&#x6B21;&#x91CD;&#x542F;&#x5BB9;&#x5668;&#x90FD;&#x8981;&#x53D8;&#x5316;-IP-&#x5730;&#x5740;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x600E;&#x4E48;&#x56FA;&#x5B9A;&#x5BB9;&#x5668; IP &#x5730;&#x5740;&#xFF1F;&#x6BCF;&#x6B21;&#x91CD;&#x542F;&#x5BB9;&#x5668;&#x90FD;&#x8981;&#x53D8;&#x5316; IP &#x5730;&#x5740;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x600E;&#x4E48;&#x56FA;&#x5B9A;&#x5BB9;&#x5668; IP &#x5730;&#x5740;&#xFF1F;&#x6BCF;&#x6B21;&#x91CD;&#x542F;&#x5BB9;&#x5668;&#x90FD;&#x8981;&#x53D8;&#x5316; IP &#x5730;&#x5740;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#zen-me-gu-ding-rong-qi-ip-di-zhi-mei-ci-chong-qi-rong-qi-du-yao-bian-hua-ip-di-zhi-zen-me-ban" class="header-anchor">#</a></h3><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x5BB9;&#x5668; IP &#x5730;&#x5740;&#x7684;&#x3002;&#x8FD9;&#x4E0D;&#x662F;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#xFF0C;&#x800C;&#x662F;&#x5BB9;&#x5668;&#x3002;&#x5176;&#x5730;&#x5740;&#x662F;&#x4F9B;&#x5BB9;&#x5668;&#x95F4;&#x901A;&#x8BAF;&#x7684;&#xFF0C;&#x5BB9;&#x5668;&#x95F4;&#x5219;&#x4E0D;&#x7528; IP &#x76F4;&#x63A5;&#x901A;&#x8BAF;&#xFF0C;&#x800C;&#x4F7F;&#x7528;<code>&#x5BB9;&#x5668;&#x540D;</code>&#x3001;<code>&#x670D;&#x52A1;&#x540D;</code>&#x3001;<code>&#x7F51;&#x7EDC;&#x522B;&#x540D;</code>&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x5411;&#x540E;&#x517C;&#x5BB9;&#xFF0C;<code>docker run</code> &#x5728;&#x4E0D;&#x6307;&#x5B9A; <code>--network</code> &#x65F6;&#xFF0C;&#x6240;&#x5728;&#x7684;&#x7F51;&#x7EDC;&#x662F; <code>default bridge</code>&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x4E0B;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>--link</code> &#x53C2;&#x6570;&#x624D;&#x53EF;&#x4EE5;&#x8BA9;&#x4E24;&#x4E2A;&#x5BB9;&#x5668;&#x627E;&#x5230;&#x5BF9;&#x65B9;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x6709;&#x5C40;&#x9650;&#x6027;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>/etc/hosts</code> &#x9759;&#x6001;&#x6587;&#x4EF6;&#x6765;&#x8FDB;&#x884C;&#x7684;&#x89E3;&#x6790;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x6302;&#x4E86;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x542F;&#x52A8;IP&#x53EF;&#x80FD;&#x4F1A;&#x6539;&#x53D8;&#x3002;&#x867D;&#x7136;&#x8BF4;&#x8FD9;&#x79CD;&#x6539;&#x53D8;Docker&#x662F;&#x53EF;&#x80FD;&#x66F4;&#x65B0;<code>/etc/hosts</code>&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6709;&#x8BF8;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x56E0;&#x4E3A;&#x7ADE;&#x4E89;&#x5192;&#x9669;&#x5BFC;&#x81F4; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#x635F;&#x6BC1;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x8FD8;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#x5728;&#x53D6;&#x5F97; <code>/etc/hosts</code> &#x7684;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x540E;&#xFF0C;&#x4E0D;&#x518D;&#x53BB;&#x76D1;&#x89C6;&#x8BE5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x53D8;&#x52A8;&#x3002;&#x79CD;&#x79CD;&#x539F;&#x56E0;&#x90FD;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x65E7;&#x7684;&#x4E3B;&#x673A;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x5BB9;&#x5668;&#x540D;&#x8BBF;&#x95EE;&#x5230;&#x65B0;&#x7684;&#x4E3B;&#x673A;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/</a></p>
<p>&#x5982;&#x679C;&#x53EF;&#x80FD;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x8FC7;&#x65F6;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x662F;&#x7528;&#x4E0B;&#x9762;&#x8BF4;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x800C;&#x5BF9;&#x4E8E;&#x65B0;&#x7684;&#x73AF;&#x5883;&#xFF08;Docker 1.10&#x4EE5;&#x4E0A;&#xFF09;&#xFF0C;&#x5E94;&#x8BE5;&#x7ED9;&#x5BB9;&#x5668;&#x5EFA;&#x7ACB;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5BF9;&#x65B9;&#x5BB9;&#x5668;&#x7684;&#x5BB9;&#x5668;&#x540D;&#x3001;&#x670D;&#x52A1;&#x540D;&#x3001;&#x7F51;&#x7EDC;&#x522B;&#x540D;&#x6765;&#x627E;&#x5230;&#x5BF9;&#x65B9;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5E2E;&#x52A9;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x7684;&#x662F;Docker &#x5185;&#x7F6E;&#x7684;DNS&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x65E0;&#x8BBA;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x91CD;&#x542F;&#x3001;&#x66F4;&#x6362;IP&#xFF0C;&#x5185;&#x7F6E;&#x7684;DNS&#x90FD;&#x80FD;&#x6B63;&#x786E;&#x6307;&#x5B9A;&#x5230;&#x5BF9;&#x65B9;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/networking/work-with-networks/#linking-containers-in-user-defined-networks" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/networking/work-with-networks/#linking-containers-in-user-defined-networks</a></p>
<p>&#x5EFA;&#x8BAE;&#x53C2;&#x8003;&#x4E00;&#x4E0B;&#x6211;&#x5199;&#x7684; LNMP &#x7684;&#x4F8B;&#x5B50;&#xFF1A;<br><a href="https://coding.net/u/twang2218/p/docker-lnmp/git" target="_blank" rel="noopener">https://coding.net/u/twang2218/p/docker-lnmp/git</a></p>
<h3 id="ru-he-xiu-gai-rong-qi-de-etc-hosts-wen-jian"><a href="#&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x7684;-etc-hosts-&#x6587;&#x4EF6;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x7684; /etc/hosts &#x6587;&#x4EF6;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x7684; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#xFF1F; <a href="#ru-he-xiu-gai-rong-qi-de-etc-hosts-wen-jian" class="header-anchor">#</a></h3><p>&#x5BB9;&#x5668;&#x5185;&#x7684; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x968F;&#x610F;&#x4FEE;&#x6539;&#xFF0C;&#x5982;&#x679C;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x540D;&#x548C; IP &#x5730;&#x5740;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF0C;&#x5E94;&#x8BE5;&#x5728; <code>docker run</code> &#x65F6;&#x4F7F;&#x7528; <code>--add-host</code> &#x53C2;&#x6570;&#xFF0C;&#x6216;&#x8005;&#x5728; <code>docker-compose.yml</code> &#x4E2D;&#x6DFB;&#x52A0; <code>extra_hosts</code> &#x9879;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x5728;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x5E94;&#x8BE5;&#x518D;&#x8003;&#x8651;&#x4E00;&#x4E0B;&#x771F;&#x7684;&#x9700;&#x8981;&#x4FEE;&#x6539; <code>/etc/hosts</code> &#x4E48;&#xFF1F;&#x5982;&#x679C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x5BB9;&#x5668;&#x95F4;&#x4E92;&#x76F8;&#x8BBF;&#x95EE;&#xFF0C;&#x5E94;&#x8BE5;&#x5EFA;&#x7ACB;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#xFF0C;&#x5E76;&#x4F7F;&#x7528; Docker &#x5185;&#x7F6E;&#x7684; DNS &#x670D;&#x52A1;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E00;&#x4E0B;&#x6211;&#x5199;&#x7684;&#x8FD9;&#x4E2A; LNMP &#x591A;&#x5BB9;&#x5668;&#x4E92;&#x8FDE;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;<a href="https://coding.net/u/twang2218/p/docker-lnmp/git" target="_blank" rel="noopener">https://coding.net/u/twang2218/p/docker-lnmp/git</a></p>
<h3 id="zen-me-ying-she-su-zhu-duan-kou-dockerfile-zhong-de-expose-he-docker-run-p-you-sha-qu-bie"><a href="#&#x600E;&#x4E48;&#x6620;&#x5C04;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&#xFF1F;Dockerfile-&#x4E2D;&#x7684;EXPOSE&#x548C;-docker-run-p-&#x6709;&#x5565;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="&#x600E;&#x4E48;&#x6620;&#x5C04;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&#xFF1F;Dockerfile &#x4E2D;&#x7684;EXPOSE&#x548C; docker run -p &#x6709;&#x5565;&#x533A;&#x522B;&#xFF1F;"></a>&#x600E;&#x4E48;&#x6620;&#x5C04;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&#xFF1F;<code>Dockerfile</code> &#x4E2D;&#x7684;<code>EXPOSE</code>&#x548C; <code>docker run -p</code> &#x6709;&#x5565;&#x533A;&#x522B;&#xFF1F; <a href="#zen-me-ying-she-su-zhu-duan-kou-dockerfile-zhong-de-expose-he-docker-run-p-you-sha-qu-bie" class="header-anchor">#</a></h3><p>Docker&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x4E00;&#x4E2A;&#x53EB;&#x505A; <code>EXPOSE</code> &#xFF0C;&#x4E00;&#x4E2A;&#x53EB;&#x505A; <code>PUBLISH</code> &#x3002;</p>
<ul>
<li><code>EXPOSE</code> &#x662F;&#x955C;&#x50CF;/&#x5BB9;&#x5668;&#x58F0;&#x660E;&#x8981;&#x66B4;&#x9732;&#x8BE5;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x4F9B;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x79CD;&#x58F0;&#x660E;&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x8BBE;&#x5B9A; <code>--icc=false</code>&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x53EA;&#x662F;&#x4E00;&#x79CD;&#x6807;&#x6CE8;&#xFF0C;&#x5E76;&#x4E0D;&#x5F3A;&#x5236;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x6CA1;&#x6709;&#x58F0;&#x660E; <code>EXPOSE</code> &#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5176;&#x5B83;&#x5BB9;&#x5668;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x5F3A;&#x5236; <code>--icc=false</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x6709; <code>EXPOSE</code> &#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5176;&#x5B83;&#x5BB9;&#x5668;&#x624D;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x3002;</li>
<li><code>PUBLISH</code> &#x5219;&#x662F;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&#xFF0C;&#x5C06;&#x5BB9;&#x5668;&#x7684;&#x7AEF;&#x53E3;&#x516C;&#x5F00;&#x4E8E;&#x5916;&#x754C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5BBF;&#x4E3B;&#x4E4B;&#x5916;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x5BBF;&#x4E3B;IP&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x8BE5;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#xFF0C;&#x8BBF;&#x95EE;&#x5230;&#x5BB9;&#x5668;&#x5BF9;&#x5E94;&#x7AEF;&#x53E3;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x7528;&#x5BB9;&#x5668;&#x670D;&#x52A1;&#x3002;</li>
</ul>
<p><code>EXPOSE</code> &#x7684;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x4E0D; <code>PUBLISH</code>&#xFF0C;&#x8FD9;&#x6837;&#x53EA;&#x6709;&#x5BB9;&#x5668;&#x95F4;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#xFF0C;&#x5BBF;&#x4E3B;&#x4E4B;&#x5916;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x3002;&#x800C; <code>PUBLISH</code> &#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x4E8B;&#x5148; <code>EXPOSE</code>&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4; <code>PUBLISH</code> &#x7B49;&#x4E8E;&#x540C;&#x65F6;&#x9690;&#x5F0F;&#x5B9A;&#x4E49;&#x4E86;&#x8BE5;&#x7AEF;&#x53E3;&#x8981; <code>EXPOSE</code>&#x3002;</p>
<p><code>docker run</code> &#x547D;&#x4EE4;&#x4E2D;&#x7684; <code>-p</code>, <code>-P</code> &#x53C2;&#x6570;&#xFF0C;&#x4EE5;&#x53CA; <code>docker-compose.yml</code> &#x4E2D;&#x7684;  <code>ports</code> &#x90E8;&#x5206;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5747;&#x662F;&#x6307; <code>PUBLISH</code>&#x3002;</p>
<p>&#x5C0F;&#x5199; <code>-p</code> &#x662F;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A; <code>[&#x5BBF;&#x4E3B;IP:]&lt;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&gt;:&lt;&#x5BB9;&#x5668;&#x7AEF;&#x53E3;&gt;</code>&#xFF0C;&#x5176;&#x4E2D;&#x5BBF;&#x4E3B;&#x7AEF;&#x53E3;&#x548C;&#x5BB9;&#x5668;&#x7AEF;&#x53E3;&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;<code>1000-2000:1000-2000</code>&#x3002;&#x5BF9;&#x4E8E;&#x591A;&#x5BBF;&#x4E3B;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5BBF;&#x4E3B;IP&#xFF0C;&#x4E0D;&#x6307;&#x5B9A;&#x5BBF;&#x4E3B;IP&#x65F6;&#xFF0C;&#x5B88;&#x62A4;&#x6240;&#x6709;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x5927;&#x5199; <code>-P</code> &#x5219;&#x662F;&#x81EA;&#x52A8;&#x6620;&#x5C04;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x5B9A;&#x4E49; <code>EXPOSE</code> &#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x968F;&#x673A;&#x6620;&#x5C04;&#x5230;&#x5BBF;&#x4E3B;&#x7684;&#x67D0;&#x4E2A;&#x7AEF;&#x53E3;&#x3002;</p>
<h3 id="wo-yao-ying-she-hao-ji-bai-ge-duan-kou-nan-dao-yao-yi-ge-ge-p-me"><a href="#&#x6211;&#x8981;&#x6620;&#x5C04;&#x597D;&#x51E0;&#x767E;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x96BE;&#x9053;&#x8981;&#x4E00;&#x4E2A;&#x4E2A;-p-&#x4E48;&#xFF1F;" class="headerlink" title="&#x6211;&#x8981;&#x6620;&#x5C04;&#x597D;&#x51E0;&#x767E;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x96BE;&#x9053;&#x8981;&#x4E00;&#x4E2A;&#x4E2A; -p &#x4E48;&#xFF1F;"></a>&#x6211;&#x8981;&#x6620;&#x5C04;&#x597D;&#x51E0;&#x767E;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x96BE;&#x9053;&#x8981;&#x4E00;&#x4E2A;&#x4E2A; <code>-p</code> &#x4E48;&#xFF1F; <a href="#wo-yao-ying-she-hao-ji-bai-ge-duan-kou-nan-dao-yao-yi-ge-ge-p-me" class="header-anchor">#</a></h3><p><code>-p</code> &#x662F;&#x53EF;&#x4EE5;&#x7528;&#x8303;&#x56F4;&#x7684;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-p 8001-8010:8001-8010</span><br></pre></td></tr></table></figure>
<h3 id="wei-shi-me-p-hou-huan-shi-wu-fa-tong-guo-ying-she-duan-kou-fang-wen-rong-qi-li-mian-de-fu-wu"><a href="#&#x4E3A;&#x4EC0;&#x4E48;-p-&#x540E;&#x8FD8;&#x662F;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#x91CC;&#x9762;&#x7684;&#x670D;&#x52A1;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48; -p &#x540E;&#x8FD8;&#x662F;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#x91CC;&#x9762;&#x7684;&#x670D;&#x52A1;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48; <code>-p</code> &#x540E;&#x8FD8;&#x662F;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#x91CC;&#x9762;&#x7684;&#x670D;&#x52A1;&#xFF1F; <a href="#wei-shi-me-p-hou-huan-shi-wu-fa-tong-guo-ying-she-duan-kou-fang-wen-rong-qi-li-mian-de-fu-wu" class="header-anchor">#</a></h3><p>&#x9996;&#x5148;&#xFF0C;&#x5F53;&#x7136;&#x662F;&#x68C0;&#x67E5;&#x8FD9;&#x4E2A; docker &#x7684;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x542F;&#x52A8;&#x6B63;&#x5E38;&#xFF1A; <code>docker ps</code>&#x3001;<code>docker top &lt;&#x5BB9;&#x5668;ID&gt;</code>&#x3001;<code>docker logs &lt;&#x5BB9;&#x5668;ID&gt;</code>&#x3001;<code>docker exec -it &lt;&#x5BB9;&#x5668;ID&gt; bash</code>&#x7B49;&#xFF0C;&#x8FD9;&#x662F;&#x6BD4;&#x8F83;&#x5E38;&#x7528;&#x7684;&#x6392;&#x969C;&#x7684;&#x547D;&#x4EE4;&#xFF1B;&#x5982;&#x679C;&#x662F; <code>docker-compose</code> &#x4E5F;&#x6709;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x8FD9;&#x4E00;&#x7EC4;&#x547D;&#x4EE4;&#xFF0C;&#x6240;&#x4EE5;&#x6392;&#x969C;&#x5F88;&#x5BB9;&#x6613;&#x3002;</p>
<p>&#x5982;&#x679C;&#x786E;&#x4FDD;&#x670D;&#x52A1;&#x4E00;&#x5207;&#x6B63;&#x5E38;&#xFF0C;&#x751A;&#x81F3;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#xFF0C;<code>docker ps</code> &#x4E5F;&#x663E;&#x793A;&#x51FA;&#x4E86;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x6210;&#x529F;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;<strong>&#x68C0;&#x67E5;&#x9632;&#x706B;&#x5899;</strong>&#x4E86;&#x3002;</p>
<h4 id="ben-ji-fang-huo-qiang"><a href="#&#x672C;&#x673A;&#x9632;&#x706B;&#x5899;" class="headerlink" title="&#x672C;&#x673A;&#x9632;&#x706B;&#x5899;"></a>&#x672C;&#x673A;&#x9632;&#x706B;&#x5899; <a href="#ben-ji-fang-huo-qiang" class="header-anchor">#</a></h4><p>&#x5728; Docker &#x8FD0;&#x884C;&#x7684;&#x7CFB;&#x7EDF;&#x4E0A;<strong>&#x4E0D;&#x5E94;&#x8BE5;&#x8FD0;&#x884C;&#x4EFB;&#x4F55;&#x9632;&#x706B;&#x5899;</strong>&#x2026;&#x2026;&#x6CA1;&#x9519;&#xFF0C;&#x8BF4;&#x4F60;&#x5462;&#xFF0C;CentOS &#x7684; <strong>firewalld</strong> &#x548C; Ubuntu &#x7684; <strong>ufw</strong> &#x540C;&#x5B66;&#x3002;&#x7531;&#x4E8E; Docker &#x4F7F;&#x7528; <code>iptables</code> &#x89C4;&#x5219;&#x6765;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x6D41;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x800C;&#x90A3;&#x4E9B;&#x9632;&#x706B;&#x5899;&#x603B;&#x4EE5;&#x4E3A;&#x53EA;&#x6709;&#x81EA;&#x5DF1;&#x64B0;&#x5199; <code>iptables</code>&#xFF0C;&#x4ECE;&#x800C;&#x7ECF;&#x5E38;&#x4F1A;&#x5BFC;&#x81F4; Docker &#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E9B;&#x89C4;&#x5219;&#xFF0C;&#x7136;&#x540E;&#x8F6C;&#x773C;&#x5C31;&#x88AB; <code>firewalld</code> &#x6216; <code>ufw</code> &#x7ED9;&#x6E05;&#x4E86;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x8D77;&#x3001;&#x505C;&#x9632;&#x706B;&#x5899;&#x670D;&#x52A1;&#x7684;&#x65F6;&#x5019;&#x3002;&#x4ECE;&#x800C;&#x5BFC;&#x81F4; Docker &#x7684;&#x7F51;&#x7EDC;&#x4ECE;&#x5916;&#x754C;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x3002;</p>
<blockquote>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D; <code>iptables</code> &#x7684;&#x89C4;&#x5219;&#x5E72;&#x6270;&#xFF0C;&#x4E0D;&#x8981;&#x5728;&#x8FD0;&#x884C; Docker &#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x8FD0;&#x884C;<strong>&#x4EFB;&#x4F55;&#x9632;&#x706B;&#x5899;</strong>&#x6216;&#x914D;&#x7F6E;&#x81EA;&#x5B9A;&#x4E49;&#x7684; <code>iptables</code> &#x89C4;&#x5219;&#xFF0C;<em>&#x9664;&#x975E;</em>&#x4F60;&#x975E;&#x5E38;&#x6E05;&#x695A;&#x4F60;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x5E76;&#x4E14;&#x77E5;&#x9053;&#x4F1A;&#x4EA7;&#x751F;&#x4EC0;&#x4E48;&#x540E;&#x679C;&#x3002;<br>&#x53E6;&#x5916;&#xFF0C;<strong>&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x540E;&#xFF0C;&#x8BB0;&#x5F97;&#x91CD;&#x542F;&#x7CFB;&#x7EDF;</strong>&#xFF0C;&#x81F3;&#x5C11;&#x662F;&#x91CD;&#x542F; Docker &#x670D;&#x52A1;&#x3002;&#x5426;&#x5219;&#x9632;&#x706B;&#x5899;&#x7684;&#x8D77;&#x3001;&#x505C;&#x3001;&#x5237;&#x65B0;&#x8FD9;&#x7C7B;&#x884C;&#x4E3A;&#x4F1A;&#x5BFC;&#x81F4;&#x6E05;&#x7A7A; Docker &#x8BBE;&#x7F6E;&#x7684;&#x7F51;&#x7EDC;&#x89C4;&#x5219;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x7F51;&#x7EDC;&#x65E0;&#x6CD5;&#x548C;&#x5916;&#x90E8;&#x4E92;&#x8054;&#x3002;</p>
</blockquote>
<h4 id="bian-jie-fang-huo-qiang"><a href="#&#x8FB9;&#x754C;&#x9632;&#x706B;&#x5899;" class="headerlink" title="&#x8FB9;&#x754C;&#x9632;&#x706B;&#x5899;"></a>&#x8FB9;&#x754C;&#x9632;&#x706B;&#x5899; <a href="#bian-jie-fang-huo-qiang" class="header-anchor">#</a></h4><p>&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E91;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x9664;&#x4E86;&#x672C;&#x673A;&#x9632;&#x706B;&#x5899;&#x5916;&#xFF0C;&#x4E91;&#x670D;&#x52A1;&#x7684;&#x670D;&#x52A1;&#x5546;&#x4E00;&#x822C;&#x4F1A;&#x63D0;&#x4F9B;&#x8FB9;&#x754C;&#x9632;&#x706B;&#x5899;&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;&#x5B89;&#x5168;&#x7EC4;&#x3001;&#x5B89;&#x5168;&#x7B56;&#x7565;&#x7C7B;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x6709;&#x4E9B;&#x670D;&#x52A1;&#x5668;&#x4E3A;&#x4E86;&#x5B89;&#x5168;&#x8D77;&#x89C1;&#xFF0C;&#x9ED8;&#x8BA4;&#x53EA;&#x5F00;&#x901A;&#x5FC5;&#x9700;&#x7684; <code>22</code> &#x7AEF;&#x53E3;&#x7ED9; SSH &#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x5176;&#x5B83;&#x7AEF;&#x53E3;&#x5C4F;&#x853D;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x5668; <code>-p</code> &#x7AEF;&#x53E3;&#x5931;&#x8D25;&#x7684;&#x539F;&#x56E0;&#x4E4B;&#x4E00;&#x3002;&#x5982;&#x679C;&#x4F60;&#x53D1;&#x73B0;&#x4F60;&#x5728;&#x670D;&#x52A1;&#x5668;&#x672C;&#x5730;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982; <code>curl localhost</code> &#x6CA1;&#x6709;&#x963B;&#x788D;&#xFF0C;&#x4F46;&#x662F;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x5C31;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x53BB;&#x68C0;&#x67E5;&#x4E91;&#x670D;&#x52A1;&#x5546;&#x7684;&#x5B89;&#x5168;&#x8BBE;&#x7F6E;&#xFF0C;&#x662F;&#x5426;&#x5FD8;&#x8BB0;&#x4E86;&#x5F00;&#x542F;&#x6240;&#x9700;&#x7684;&#x7AEF;&#x53E3;&#x3002;</p>
<h3 id="vethxxxx-zhe-chong-xu-ni-wang-qia-he-rong-qi-de-dui-ying-guan-xi-cong-na-li-kan"><a href="#vethxxxx-&#x8FD9;&#x79CD;&#x865A;&#x62DF;&#x7F51;&#x5361;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x4ECE;&#x54EA;&#x91CC;&#x770B;&#xFF1F;" class="headerlink" title="vethxxxx &#x8FD9;&#x79CD;&#x865A;&#x62DF;&#x7F51;&#x5361;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x4ECE;&#x54EA;&#x91CC;&#x770B;&#xFF1F;"></a><code>vethxxxx</code> &#x8FD9;&#x79CD;&#x865A;&#x62DF;&#x7F51;&#x5361;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x4ECE;&#x54EA;&#x91CC;&#x770B;&#xFF1F; <a href="#vethxxxx-zhe-chong-xu-ni-wang-qia-he-rong-qi-de-dui-ying-guan-xi-cong-na-li-kan" class="header-anchor">#</a></h3><p><code>&#x5317;&#x4EAC;-ZZ-&#x867E;&#x7C73;</code>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x597D;&#x529E;&#x6CD5;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker network ls</span><br><span class="line">NETWORK ID          NAME                       DRIVER</span><br><span class="line">56f04389b8f0        dockerlnmp_backend         bridge</span><br><span class="line">094fcb269385        dockerlnmp_frontend        bridge</span><br></pre></td></tr></table></figure>
<p>&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684; <code>NETWORK ID</code>&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C; <code>ip a | grep veth</code>&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ip a | grep veth</span><br><span class="line">12: veth22996d2@if11: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-56f04389b8f0 state UP group default</span><br><span class="line">14: veth34ace9a@if13: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-56f04389b8f0 state UP group default</span><br><span class="line">16: veth0bb3771@if15: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-56f04389b8f0 state UP group default</span><br><span class="line">22: veth399b874@if21: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-094fcb269385 state UP group default</span><br><span class="line">24: vethf24a0a9@if23: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-094fcb269385 state UP group default</span><br></pre></td></tr></table></figure>
<p>&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684; <code>br-56f04389b8f0</code> &#x4EE5;&#x53CA; <code>br-094fcb269385</code>&#xFF0C;<code>br-</code> &#x540E;&#x9762;&#x7684;&#x662F;&#x4E0A;&#x9762;&#x7684;<code>&#x7F51;&#x7EDC;id</code>&#xFF0C;&#x7531;&#x6B64;&#x53EF;&#x4EE5;&#x770B;&#x51FA; <code>veth</code> &#x548C; Docker &#x7F51;&#x7EDC;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF0C;&#x800C;&#x5BB9;&#x5668;&#x90FD;&#x662F;&#x8FDE;&#x63A5;&#x5230;&#x4E86;&#x67D0;&#x4E2A;Docker&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#xFF0C;&#x4ECE;&#x800C;&#x5C31;&#x6709;&#x4E86;&#x5BB9;&#x5668;&#x548C; <code>veth</code> &#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x67D0;&#x4E2A;&#x7F51;&#x7EDC;&#x51FA;&#x73B0;&#x4E86;&#x591A;&#x4E2A; <code>veth</code> &#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF; <code>veth22996d2@if11</code> &#x540E;&#x9762;&#x7684; <code>if11</code> &#x8FD9;&#x90E8;&#x5206;&#xFF0C;&#x548C;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>ip addr</code> &#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E00;&#x822C; <code>&#x5947;-&#x5076;</code>&#x662F;&#x4E00;&#x5BF9;&#x3002;</p>
<h3 id="ru-he-rang-yi-ge-rong-qi-lian-jie-liang-ge-wang-luo"><a href="#&#x5982;&#x4F55;&#x8BA9;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x8FDE;&#x63A5;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x8BA9;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x8FDE;&#x63A5;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#xFF1F;"></a>&#x5982;&#x4F55;&#x8BA9;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x8FDE;&#x63A5;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#xFF1F; <a href="#ru-he-rang-yi-ge-rong-qi-lian-jie-liang-ge-wang-luo" class="header-anchor">#</a></h3><p>&#x5982;&#x679C;&#x662F;&#x4F7F;&#x7528; <code>docker run</code>&#xFF0C;&#x90A3;&#x5F88;&#x4E0D;&#x5E78;&#xFF0C;&#x4E00;&#x6B21;&#x53EA;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#xFF0C;&#x56E0;&#x4E3A; <code>docker run</code> &#x7684; <code>--network</code> &#x53C2;&#x6570;&#x53EA;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#xFF08;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x591A;&#x6B21;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x4F1A;&#x8986;&#x76D6;&#x4E4B;&#x524D;&#x7684;&#xFF09;&#x3002;&#x4E0D;&#x8FC7;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x547D;&#x4EE4; <code>docker network connect</code> &#x8FDE;&#x63A5;&#x591A;&#x4E2A;&#x7F51;&#x7EDC;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker network create mynet1</span><br><span class="line">$ docker network create mynet2</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x8FDE;&#x63A5;&#x8FD9;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name web --network mynet1 nginx</span><br><span class="line">$ docker network connect mynet2 web</span><br></pre></td></tr></table></figure>
<p>&#x4F46;&#x662F;&#x5982;&#x679C;&#x4F7F;&#x7528; <code>docker-compose</code> &#x90A3;&#x5C31;&#x6CA1;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;<a href="https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-container" target="_blank" rel="noopener"><code>Docker Remote API</code></a> &#x662F;&#x652F;&#x6301;&#x4E00;&#x6B21;&#x6027;&#x6307;&#x5B9A;&#x591A;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x4F30;&#x8BA1;&#x662F;&#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x6240;&#x4EE5; <code>docker run</code> &#x9650;&#x5B9A;&#x4E3A;&#x53EA;&#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x8FDE;&#x4E00;&#x4E2A;&#x3002;<code>docker-compose</code> &#x76F4;&#x63A5;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x670D;&#x52A1;&#x7684;&#x5BB9;&#x5668;&#x8FDE;&#x5165;&#x591A;&#x4E2A;&#x7F51;&#x7EDC;&#xFF0C;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&apos;2&apos;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">mynet1</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">mynet2</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">    <span class="attr">mynet1:</span></span><br><span class="line">    <span class="attr">mynet2:</span></span><br></pre></td></tr></table></figure>
<h3 id="docker-duo-su-zhu-wang-luo-zen-me-pei-zhi"><a href="#Docker-&#x591A;&#x5BBF;&#x4E3B;&#x7F51;&#x7EDC;&#x600E;&#x4E48;&#x914D;&#x7F6E;&#xFF1F;" class="headerlink" title="Docker &#x591A;&#x5BBF;&#x4E3B;&#x7F51;&#x7EDC;&#x600E;&#x4E48;&#x914D;&#x7F6E;&#xFF1F;"></a>Docker &#x591A;&#x5BBF;&#x4E3B;&#x7F51;&#x7EDC;&#x600E;&#x4E48;&#x914D;&#x7F6E;&#xFF1F; <a href="#docker-duo-su-zhu-wang-luo-zen-me-pei-zhi" class="header-anchor">#</a></h3><p>Docker &#x8DE8;&#x8282;&#x70B9;&#x5BB9;&#x5668;&#x7F51;&#x7EDC;&#x4E92;&#x8054;&#xFF0C;&#x6700;&#x901A;&#x7528;&#x7684;&#x662F;&#x4F7F;&#x7528; <code>overlay</code> &#x7F51;&#x7EDC;&#x3002;</p>
<p>&#x4E00;&#x4EE3; Swarm &#x5DF2;&#x7ECF;&#x4E0D;&#x518D;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x8981;&#x6C42;&#x4F7F;&#x7528; <code>overlay</code> &#x7F51;&#x7EDC;&#x524D;&#x5148;&#x51C6;&#x5907;&#x597D;&#x5206;&#x5E03;&#x5F0F;&#x952E;&#x503C;&#x5E93;&#xFF0C;&#x6BD4;&#x5982; <code>etcd</code>, <code>consul</code> &#x6216; <code>zookeeper</code>&#x3002;&#x7136;&#x540E;&#x5728;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x7684; Docker &#x5F15;&#x64CE;&#x4E2D;&#xFF0C;&#x914D;&#x7F6E; <code>--cluster-store</code> &#x548C; <code>--cluster-advertise</code> &#x53C2;&#x6570;&#x3002;&#x8FD9;&#x6837;&#x624D;&#x53EF;&#x4EE5;&#x4E92;&#x8FDE;&#x3002;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x5199;&#x7684; LNMP &#x5BB9;&#x5668;&#x4E92;&#x8054;&#x4F8B;&#x5B50;&#x4E2D;&#x7684; <a href="https://coding.net/u/twang2218/p/docker-lnmp/git/blob/master/run1.sh" target="_blank" rel="noopener"><strong>run1.sh</strong></a> &#x8FD9;&#x4E2A;&#x811A;&#x672C;&#xFF0C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x662F;&#x5229;&#x7528; <code>docker-machine</code>&#x81EA;&#x52A8;&#x5EFA;&#x7ACB; Swarm &#x5E76;&#x4E14;&#x914D;&#x7F6E;&#x597D; <code>overlay</code> &#x7684;&#x811A;&#x672C;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x5176;&#x6D41;&#x7A0B;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x90FD;&#x5728;&#x4F7F;&#x7528;&#x4E8C;&#x4EE3; Swarm&#xFF0C;&#x4E5F;&#x5C31;&#x662F; <code>Docker Swarm Mode</code>&#xFF0C;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x8981; <code>docker swarm init</code> &#x5EFA;&#x7ACB;&#x96C6;&#x7FA4;&#xFF0C;&#x5176;&#x5B83;&#x8282;&#x70B9; <code>docker swarm join</code> &#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x540E;&#xFF0C;&#x96C6;&#x7FA4;&#x5185;&#x7684;&#x670D;&#x52A1;&#x5C31;&#x81EA;&#x52A8;&#x5EFA;&#x7ACB;&#x4E86; <code>overlay</code> &#x7F51;&#x7EDC;&#x4E92;&#x8054;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x662F;<strong>&#x591A;&#x7F51;&#x5361;&#x73AF;&#x5883;</strong>&#xFF0C;&#x65E0;&#x8BBA;&#x662F; <code>docker swarm init</code> &#x8FD8;&#x662F; <code>docker swarm join</code>&#xFF0C;&#x90FD;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x4F7F;&#x7528;&#x53C2;&#x6570; <code>--advertise-addr</code> &#x6307;&#x5B9A;&#x5BA3;&#x544A;&#x5730;&#x5740;&#xFF0C;&#x5426;&#x5219;&#x81EA;&#x52A8;&#x9009;&#x62E9;&#x7684;&#x5730;&#x5740;&#x5F88;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x4F60;&#x671F;&#x671B;&#x7684;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x96C6;&#x7FA4;&#x4E92;&#x8054;&#x5931;&#x8D25;&#x3002;&#x683C;&#x5F0F;&#x4E3A; <code>--advertise-addr &lt;&#x5730;&#x5740;&gt;:&lt;&#x7AEF;&#x53E3;&gt;</code>&#xFF0C;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x662F; IP &#x5730;&#x5740;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x7F51;&#x5361;&#x63A5;&#x53E3;&#xFF0C;&#x6BD4;&#x5982; <code>eth0</code>&#x3002;&#x7AEF;&#x53E3;&#x9ED8;&#x8BA4;&#x4E3A; <code>2377</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6539;&#x52A8;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x8FD9;&#x662F;&#x4F9B;<strong>&#x670D;&#x52A1;</strong>&#x4F7F;&#x7528;&#x7684; <code>overlay</code>&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x6709; <code>docker service create</code> &#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8BE5;&#x7F51;&#x7EDC;&#xFF0C;&#x800C; <code>docker run</code> &#x4E0D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8BE5;&#x7F51;&#x7EDC;&#xFF0C;&#x9664;&#x975E;&#x660E;&#x786E;&#x8BE5;&#x7F51;&#x7EDC;&#x4E3A; <code>--attachable</code>&#x3002;</p>
<p>&#x5173;&#x4E8E; <code>overlay</code> &#x7F51;&#x7EDC;&#x7684;&#x8FDB;&#x4E00;&#x6B65;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/networking/get-started-overlay/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/networking/get-started-overlay/</a></p>
<p>&#x867D;&#x7136;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x4F46;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x552F;&#x4E00;&#x7684;&#x591A;&#x5BBF;&#x4E3B;&#x4E92;&#x8054;&#x65B9;&#x6848;&#x3002;Docker &#x5185;&#x7F6E;&#x4E86;&#x4E00;&#x4E9B;&#x5176;&#x5B83;&#x7684;&#x4E92;&#x8054;&#x65B9;&#x6848;&#xFF0C;&#x6BD4;&#x5982;&#x6548;&#x7387;&#x6BD4;&#x8F83;&#x9AD8;&#x7684; <code>macvlan</code>&#x3002;&#x5982;&#x679C;&#x5728;&#x5C40;&#x57DF;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x5BF9; <code>overlay</code> &#x7684;&#x989D;&#x5916;&#x5F00;&#x9500;&#x4E0D;&#x6EE1;&#x610F;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8003;&#x8651; <code>macvlan</code> &#x4EE5;&#x53CA; <code>ipvlan</code>&#xFF0C;&#x8FD9;&#x662F;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x65B9;&#x6848;&#x3002;<br><a href="https://docs.docker.com/engine/userguide/networking/get-started-macvlan/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/networking/get-started-macvlan/</a></p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x7F51;&#x7EDC;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x8DE8;&#x5BBF;&#x4E3B;&#x4E92;&#x8054;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5B98;&#x7F51;&#x5BF9;&#x5E94;&#x6587;&#x6863;&#x8FDB;&#x4E00;&#x6B65;&#x67E5;&#x770B;&#xFF1A;<a href="https://docs.docker.com/engine/extend/legacy_plugins/#/network-plugins" target="_blank" rel="noopener">https://docs.docker.com/engine/extend/legacy_plugins/#/network-plugins</a></p>
<h3 id="ming-ming-docker-network-ls-zhong-kan-dao-liao-jian-li-de-overlay-wang-luo-zen-me-docker-run-huan-shuo-wang-luo-bu-cun-zai-a"><a href="#&#x660E;&#x660E;-docker-network-ls-&#x4E2D;&#x770B;&#x5230;&#x4E86;&#x5EFA;&#x7ACB;&#x7684;-overlay-&#x7F51;&#x7EDC;&#xFF0C;&#x600E;&#x4E48;-docker-run-&#x8FD8;&#x8BF4;&#x7F51;&#x7EDC;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F;" class="headerlink" title="&#x660E;&#x660E; docker network ls &#x4E2D;&#x770B;&#x5230;&#x4E86;&#x5EFA;&#x7ACB;&#x7684; overlay &#x7F51;&#x7EDC;&#xFF0C;&#x600E;&#x4E48; docker run &#x8FD8;&#x8BF4;&#x7F51;&#x7EDC;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F;"></a>&#x660E;&#x660E; <code>docker network ls</code> &#x4E2D;&#x770B;&#x5230;&#x4E86;&#x5EFA;&#x7ACB;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x600E;&#x4E48; <code>docker run</code> &#x8FD8;&#x8BF4;&#x7F51;&#x7EDC;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F; <a href="#ming-ming-docker-network-ls-zhong-kan-dao-liao-jian-li-de-overlay-wang-luo-zen-me-docker-run-huan-shuo-wang-luo-bu-cun-zai-a" class="header-anchor">#</a></h3><p>&#x5982;&#x679C;&#x5728; <code>docker network ls</code> &#x4E2D;&#x770B;&#x5230;&#x4E86;&#x5982;&#x4E0B;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">...</span><br><span class="line">24pz359114y0        mynet               overlay             swarm</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x540D;&#x4E3A; <code>mynet</code> &#x7684;&#x7F51;&#x7EDC;&#x662F;&#x4E0D;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x5230; <code>docker run</code> &#x7684;&#x5BB9;&#x5668;&#x3002;&#x5982;&#x679C;&#x8BD5;&#x56FE;&#x8FDE;&#x63A5;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x62A5;&#x9519;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F; 1.12 &#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F1A;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm --network mynet busybox</span><br><span class="line">docker: Error response from daemon: network mynet not found.</span><br><span class="line">See <span class="string">&apos;docker run --help&apos;</span>.</span><br></pre></td></tr></table></figure>
<p>&#x62A5;&#x9519;&#x8BF4; <code>mynet</code> &#x7F51;&#x7EDC;&#x627E;&#x4E0D;&#x5230;&#x3002;&#x5176;&#x5B9E;&#x5982;&#x679C;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#xFF0C;&#x4F1A;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x540D;&#x4E3A; <code>mynet</code> &#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x9A71;&#x52A8;&#x662F; <code>overlay</code> &#x6CA1;&#x6709;&#x9519;&#xFF0C;&#x4F46;&#x5B83;&#x7684; <code>Scope</code> &#x662F; <code>swarm</code>&#x3002;&#x8FD9;&#x4E2A;&#x610F;&#x601D;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x662F;&#x5728;&#x4E8C;&#x4EE3; <code>Swarm</code> &#x73AF;&#x5883;&#x4E2D;&#x5EFA;&#x7ACB;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x53EF;&#x4EE5;&#x7531; <code>Swarm</code> &#x73AF;&#x5883;&#x4E0B;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x624D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3002;&#x800C; <code>docker run</code> &#x6240;&#x8FD0;&#x884C;&#x7684;&#x53EA;&#x662F;&#x96F6;&#x6563;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x975E; <code>Service</code>&#xFF0C;&#x56E0;&#x6B64;&#x81EA;&#x7136;&#x5728;&#x96F6;&#x6563;&#x5BB9;&#x5668;&#x6240;&#x80FD;&#x4F7F;&#x7528;&#x7684;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x53EB; <code>mynet</code> &#x7F51;&#x7EDC;&#x3002;</p>
<p><code>docker run</code> &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#x662F; <code>Scope</code> &#x4E3A; <code>global</code> &#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x5916;&#x7F6E;&#x952E;&#x503C;&#x5E93;&#x6240;&#x5EFA;&#x7ACB;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4EE3; <code>Swarm</code> &#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#x3002;</p>
<p>&#x8FD9;&#x70B9;&#x5728; 1.13 &#x540E;&#x7A0D;&#x6709;&#x53D8;&#x5316;&#x3002;&#x5982;&#x679C;&#x662F; 1.13 &#x4EE5;&#x540E;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F1A;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x4FE1;&#x606F;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm --network mynet busybox</span><br><span class="line">docker: Error response from daemon: Could not attach to network mynet: rpc error: code = 7</span><br><span class="line"> desc = network mynet not manually attachable.</span><br></pre></td></tr></table></figure>
<p>&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x4E0D;&#x518D;&#x8BF4;&#x7F51;&#x7EDC;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x800C;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A; <code>mynet</code> &#x7F51;&#x7EDC;&#x65E0;&#x6CD5;&#x8FDE;&#x63A5;&#x3002;&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x4ECE; 1.13 &#x5F00;&#x59CB;&#xFF0C;&#x5141;&#x8BB8;&#x5728;&#x5EFA;&#x7ACB;&#x7F51;&#x7EDC;&#x7684;&#x65F6;&#x5019;&#x58F0;&#x660E;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x88AB;&#x96F6;&#x6563;&#x7684;&#x5BB9;&#x5668;&#x6240;&#x8FDE;&#x63A5;&#x3002;&#x5982;&#x679C; <code>docker network create</code> &#x52A0;&#x4E86; <code>--attachable</code> &#x7684;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x540E;&#x671F;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x666E;&#x901A;&#x5BB9;&#x5668;&#x6240;&#x8FDE;&#x63A5;&#x7684;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x662F;&#x5728;&#x5B89;&#x5168;&#x6A21;&#x578B;&#x4E0A;&#x5F00;&#x4E86;&#x4E00;&#x4E2A;&#x53E3;&#x5B50;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x5141;&#x8BB8;&#x666E;&#x901A;&#x5BB9;&#x5668;&#x94FE;&#x63A5;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x3002;</p>
<h3 id="shi-yong-swarm-mode-de-shi-kan-dao-you-ge-jiao-ingress-de-overlay-wang-luo-ta-he-zi-ji-chuang-jian-de-wang-luo-you-shi-me-qu-bie"><a href="#&#x4F7F;&#x7528;-Swarm-Mode-&#x7684;&#x65F6;&#xFF0C;&#x770B;&#x5230;&#x6709;&#x4E2A;&#x53EB;-ingress-&#x7684;-overlay-&#x7F51;&#x7EDC;&#xFF0C;&#x5B83;&#x548C;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x7F51;&#x7EDC;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="&#x4F7F;&#x7528; Swarm Mode &#x7684;&#x65F6;&#xFF0C;&#x770B;&#x5230;&#x6709;&#x4E2A;&#x53EB; ingress &#x7684; overlay &#x7F51;&#x7EDC;&#xFF0C;&#x5B83;&#x548C;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x7F51;&#x7EDC;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;"></a>&#x4F7F;&#x7528; <code>Swarm Mode</code> &#x7684;&#x65F6;&#xFF0C;&#x770B;&#x5230;&#x6709;&#x4E2A;&#x53EB; <code>ingress</code> &#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x5B83;&#x548C;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x7F51;&#x7EDC;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F; <a href="#shi-yong-swarm-mode-de-shi-kan-dao-you-ge-jiao-ingress-de-overlay-wang-luo-ta-he-zi-ji-chuang-jian-de-wang-luo-you-shi-me-qu-bie" class="header-anchor">#</a></h3><p>&#x5728;&#x542F;&#x7528;&#x4E86;&#x4E8C;&#x4EE3; Swarm &#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x7F51;&#x7EDC;&#x5217;&#x8868;&#x65F6;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>ingress</code> &#x7684; overlay &#x7F51;&#x7EDC;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">6beb824623a4        bridge              bridge              <span class="built_in">local</span></span><br><span class="line">f3f636574c7a        docker_gwbridge     bridge              <span class="built_in">local</span></span><br><span class="line">cfeb2513a4a3        host                host                <span class="built_in">local</span></span><br><span class="line">88smbt683r5p        ingress             overlay             swarm</span><br><span class="line">24pz359114y0        mynet               overlay             swarm</span><br><span class="line">d35d69ece740        none                null                <span class="built_in">local</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E24;&#x4E2A; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x662F;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x7684; <code>mynet</code>&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x5219;&#x662F; Docker &#x5F15;&#x64CE;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684; <code>ingress</code>&#xFF0C;&#x4ECE;&#x9A71;&#x52A8;&#x548C; <code>Scope</code> &#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#x90FD;&#x662F;&#x7ED9; Swarm Mode &#x4F7F;&#x7528;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#x3002;</p>
<p><code>ingress</code> &#x662F; <code>overlay</code> &#x7F51;&#x7EDC;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x662F;&#x666E;&#x901A;&#x7684; <code>overlay network</code>&#xFF0C;&#x5B83;&#x662F;&#x4E3A;&#x8FB9;&#x754C;&#x8FDB;&#x5165;&#x6D41;&#x91CF;&#x7279;&#x6B8A;&#x51C6;&#x5907;&#x7684;&#x7F51;&#x7EDC;&#x3002;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x5B58;&#x5728;&#x4E8E;&#x96C6;&#x7FA4;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;Docker&#x5BBF;&#x4E3B;&#x4E0A;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x5EFA;&#x7ACB;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>docker service create -p 80:80</code> &#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x6C42;&#x6620;&#x5C04;&#x96C6;&#x7FA4;&#x7AEF;&#x53E3; <code>80</code> &#x5230;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x7684; <code>80</code> &#x7AEF;&#x53E3;&#x4E0A;&#x3002;&#x5176;&#x6548;&#x679C;&#x662F;&#x8BBF;&#x95EE;&#x4EFB;&#x4E00;&#x8282;&#x70B9;&#x7684; <code>80</code> &#x7AEF;&#x53E3;&#xFF0C;&#x5373;&#x4F7F;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x6CA1;&#x6709;&#x8FD0;&#x884C;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x4F9D;&#x65E7;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x5BB9;&#x5668;&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x53D6;&#x5F97;&#x7ED3;&#x679C;&#x3002;&#x5B9E;&#x73B0;&#x8FD9;&#x6837;&#x6548;&#x679C;&#x7684;&#x4E00;&#x4E2A;&#x539F;&#x56E0;&#x5C31;&#x662F;&#x56E0;&#x4E3A; <code>ingress</code> &#x7F51;&#x7EDC;&#x7684;&#x5B58;&#x5728;&#x3002;</p>
<p>Swarm &#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;<strong>&#x9690;&#x85CF;&#x7684;&#x6C99;&#x7BB1;&#x5BB9;&#x5668;</strong>&#x76D1;&#x542C;&#x5BBF;&#x4E3B;&#x7684;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#xFF0C;&#x7528;&#x4E8E;&#x63A5;&#x6536;&#x6765;&#x81EA;&#x96C6;&#x7FA4;&#x5916;&#x754C;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>docker network inspect ingress</code> &#x6765;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x6C99;&#x7BB1;&#x5BB9;&#x5668;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ docker network inspect ingress</span><br><span class="line">[</span><br><span class="line">   {</span><br><span class="line">       <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;ingress&quot;</span>,</span><br><span class="line">       <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;88smbt683r5p7c0l7sd0dpniw&quot;</span>,</span><br><span class="line">       <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;swarm&quot;</span>,</span><br><span class="line">       <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;overlay&quot;</span>,</span><br><span class="line">       <span class="string">&quot;EnableIPv6&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">       <span class="string">&quot;IPAM&quot;</span>: {</span><br><span class="line">           <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">           <span class="string">&quot;Options&quot;</span>: null,</span><br><span class="line">           <span class="string">&quot;Config&quot;</span>: [</span><br><span class="line">               {</span><br><span class="line">                   <span class="string">&quot;Subnet&quot;</span>: <span class="string">&quot;10.255.0.0/16&quot;</span>,</span><br><span class="line">                   <span class="string">&quot;Gateway&quot;</span>: <span class="string">&quot;10.255.0.1&quot;</span></span><br><span class="line">               }</span><br><span class="line">           ]</span><br><span class="line">       },</span><br><span class="line">       <span class="string">&quot;Internal&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">       <span class="string">&quot;Containers&quot;</span>: {</span><br><span class="line">           <span class="string">&quot;faff08692b5f916fcb15aa7ac6bc8633a0fa714a52a1fb75e57525c94581c45a&quot;</span>: {</span><br><span class="line">               <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;web.1.1jyunyva6picwsztzrj6t2cio&quot;</span>,</span><br><span class="line">               <span class="string">&quot;EndpointID&quot;</span>: <span class="string">&quot;58240770eb25565b472384731b1b90e36141a633ce184a5163829cf96e9d1195&quot;</span>,</span><br><span class="line">               <span class="string">&quot;MacAddress&quot;</span>: <span class="string">&quot;02:42:0a:ff:00:05&quot;</span>,</span><br><span class="line">               <span class="string">&quot;IPv4Address&quot;</span>: <span class="string">&quot;10.255.0.5/16&quot;</span>,</span><br><span class="line">               <span class="string">&quot;IPv6Address&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">           },</span><br><span class="line">           <span class="string">&quot;ingress-sbox&quot;</span>: {</span><br><span class="line">               <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;ingress-endpoint&quot;</span>,</span><br><span class="line">               <span class="string">&quot;EndpointID&quot;</span>: <span class="string">&quot;fe8f89d4f99d7bacb14c5cb723682c180278d62e9edd10b523cdd81a45695c5d&quot;</span>,</span><br><span class="line">               <span class="string">&quot;MacAddress&quot;</span>: <span class="string">&quot;02:42:0a:ff:00:03&quot;</span>,</span><br><span class="line">               <span class="string">&quot;IPv4Address&quot;</span>: <span class="string">&quot;10.255.0.3/16&quot;</span>,</span><br><span class="line">               <span class="string">&quot;IPv6Address&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">           }</span><br><span class="line">       },</span><br><span class="line">       <span class="string">&quot;Options&quot;</span>: {</span><br><span class="line">           <span class="string">&quot;com.docker.network.driver.overlay.vxlanid_list&quot;</span>: <span class="string">&quot;256&quot;</span></span><br><span class="line">       },</span><br><span class="line">       <span class="string">&quot;Labels&quot;</span>: {}</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x8FD4;&#x56DE;&#x4FE1;&#x606F;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>ingress-endpoint</code> &#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x8FB9;&#x754C;&#x6C99;&#x7BB1;&#x5BB9;&#x5668;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x4E86; <code>-p</code> &#x53C2;&#x6570;&#x540E;&#xFF0C;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x5C31;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x7684;&#x52A0;&#x5165;&#x5230; <code>ingress</code> &#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x4F1A;&#x5728;&#x6C99;&#x7BB1;&#x4E2D;&#x6CE8;&#x518C;&#x6620;&#x5C04;&#x4FE1;&#x606F;&#xFF0C;&#x544A;&#x77E5;&#x54EA;&#x4E2A;&#x670D;&#x52A1;&#x8981;&#x6C42;&#x5B88;&#x62A4;&#x54EA;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x5177;&#x4F53;&#x5BF9;&#x5E94;&#x5BB9;&#x5668;&#x662F;&#x54EA;&#x4E9B;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#x5F53;&#x6C99;&#x7BB1;&#x6536;&#x5230;&#x5916;&#x90E8;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x7AEF;&#x53E3;&#x5C31;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x670D;&#x52A1;&#x5728;&#x5B88;&#x62A4;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A; <code>ingress</code> &#x7F51;&#x7EDC;&#x53BB;&#x5C06;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x5BF9;&#x5E94;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x3002;&#x800C;&#x7531;&#x4E8E; <code>ingress</code> &#x7684;&#x672C;&#x8D28;&#x662F; <code>overlay network</code>&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x65E0;&#x8BBA;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x4E8E;&#x54EA;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x6C99;&#x7BB1;&#x90FD;&#x53EF;&#x4EE5;&#x6210;&#x529F;&#x7684;&#x5C06;&#x8FDE;&#x63A5;&#x8F6C;&#x53D1;&#x7ED9;&#x6B63;&#x786E;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;<code>ingress</code> &#x662F;&#x7279;&#x6B8A;&#x7528;&#x9014;&#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x53EA;&#x8981;&#x670D;&#x52A1;&#x6709; <code>-p</code> &#x9009;&#x9879;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x88AB;&#x52A0;&#x5165;&#x8BE5;&#x7F51;&#x7EDC;&#x3002;&#x56E0;&#x6B64;&#x628A; <code>ingress</code> &#x7F51;&#x7EDC;&#x5F53;&#x505A;&#x666E;&#x901A;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x9664;&#x4E86;&#x4F1A;&#x5E72;&#x6270; Swarm &#x6B63;&#x5E38;&#x7684;&#x8FB9;&#x754C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x4E5F;&#x4F1A;&#x7834;&#x574F;&#x670D;&#x52A1;&#x9694;&#x79BB;&#x7684;&#x5B89;&#x5168;&#x673A;&#x5236;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x5F53;&#x505A;&#x666E;&#x901A;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x63A7;&#x5236;&#x670D;&#x52A1;&#x4E92;&#x8054;&#x548C;&#x9694;&#x79BB;&#x65F6;&#xFF0C;&#x8BF7;&#x7528;&#x81EA;&#x884C;&#x521B;&#x5EFA;&#x7684; <code>overlay</code> &#x7F51;&#x7EDC;&#x3002;</p>
<h3 id="ting-shuo-link-guo-shi-bu-zai-yong-liao-na-rong-qi-hu-lian-fu-wu-fa-xian-zen-me-ban"><a href="#&#x542C;&#x8BF4;-link-&#x8FC7;&#x65F6;&#x4E0D;&#x518D;&#x7528;&#x4E86;&#xFF1F;&#x90A3;&#x5BB9;&#x5668;&#x4E92;&#x8054;&#x3001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x542C;&#x8BF4; --link &#x8FC7;&#x65F6;&#x4E0D;&#x518D;&#x7528;&#x4E86;&#xFF1F;&#x90A3;&#x5BB9;&#x5668;&#x4E92;&#x8054;&#x3001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x542C;&#x8BF4; <code>--link</code> &#x8FC7;&#x65F6;&#x4E0D;&#x518D;&#x7528;&#x4E86;&#xFF1F;&#x90A3;&#x5BB9;&#x5668;&#x4E92;&#x8054;&#x3001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#ting-shuo-link-guo-shi-bu-zai-yong-liao-na-rong-qi-hu-lian-fu-wu-fa-xian-zen-me-ban" class="header-anchor">#</a></h3><p>&#x5728; 1-2 &#x5E74;&#x524D;&#xFF0C;Docker &#x6240;&#x6709;&#x5BB9;&#x5668;&#x90FD;&#x8FDE;&#x63A5;&#x4E8E;&#x9ED8;&#x8BA4;&#x7684;&#x6865;&#x63A5;&#x7F51;&#x7EDC;&#x4E0A;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5F88;&#x591A;&#x8001;&#x6587;&#x7AE0;&#x9F13;&#x6363;&#x7684; <code>docker0</code> &#x6865;&#x63A5;&#x7F51;&#x5361;&#x3002;&#x56E0;&#x6B64;&#x5B9E;&#x9645;&#x4E0A;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x4E92;&#x8054;&#x7684;&#xFF0C;&#x6CA1;&#x6709;&#x9694;&#x79BB;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x6837;&#x5B89;&#x5168;&#x6027;&#x4E0D;&#x597D;&#x3002;&#x800C;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x662F;&#x5728;&#x8FD9;&#x79CD;&#x73AF;&#x5883;&#x4E0B;&#x53D1;&#x5C55;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x901A;&#x8FC7;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#x6765;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x51E1;&#x662F; <code>--link</code> &#x7684;&#x4E3B;&#x673A;&#x7684;&#x522B;&#x540D;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x4E8E; <code>/etc/hosts</code> &#x4E2D;&#xFF0C;&#x5176;&#x5730;&#x5740;&#x7531; Docker &#x5F15;&#x64CE;&#x7EF4;&#x62A4;&#x3002;&#x56E0;&#x6B64;&#x5BB9;&#x5668;&#x95F4;&#x624D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>&#x522B;&#x540D;</strong>&#x4E92;&#x8BBF;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x529E;&#x6CD5;&#x5E76;&#x4E0D;&#x662F;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;Docker &#x65E9;&#x5728;&#x4E00;&#x5E74;&#x591A;&#x4EE5;&#x524D;&#x5C31;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x4E86;&#x3002;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x4E92;&#x8054;&#xFF0C;&#x5E76;&#x4E14;&#xFF0C;Docker &#x5185;&#x7F6E;&#x4E86; DNS&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x540D;&#x3001;&#x5BB9;&#x5668;&#x540D;&#x3001;&#x522B;&#x540D;&#x6765;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x540D;&#x79F0;&#x4F1A;&#x7ECF;&#x7531;&#x5185;&#x7F6E;&#x7684; DNS &#x8FDB;&#x884C;&#x89E3;&#x6790;&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF1B;&#x800C;&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;&#x4E92;&#x8054;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x73B0;&#x5728;&#x65E9;&#x5C31;&#x4E0D;&#x7528; <code>--link</code> &#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x975E;&#x5E38;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x9996;&#x5148;&#x662F;&#x56E0;&#x4E3A;&#x4F7F;&#x7528; <code>--link</code> &#x5C31;&#x5F88;&#x53EF;&#x80FD;&#x8FD8;&#x5728;&#x7528;&#x9ED8;&#x8BA4;&#x6865;&#x63A5;&#x7F51;&#x7EDC;&#xFF0C;&#x8FD9;&#x5F88;&#x4E0D;&#x5B89;&#x5168;&#xFF0C;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x90FD;&#x6CA1;&#x6709;&#x9002;&#x5EA6;&#x9694;&#x79BB;&#xFF0C;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x624D;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#x4E92;&#x8054;&#x9694;&#x79BB;&#x3002;</p>
<p>&#x5176;&#x6B21;&#xFF0C;&#x4FEE;&#x6539; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#x6709;&#x5F88;&#x591A;&#x5F0A;&#x75C5;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x9AD8;&#x9891;&#x7E41;&#x7684;&#x5BB9;&#x5668;&#x542F;&#x505C;&#x73AF;&#x5883;&#x65F6;&#xFF0C;&#x5BB9;&#x6613;&#x4EA7;&#x751F;&#x7ADE;&#x4E89;&#x5192;&#x9669;&#xFF0C;&#x5BFC;&#x81F4; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#x635F;&#x574F;&#xFF0C;&#x51FA;&#x73B0;&#x8BBF;&#x95EE;&#x6545;&#x969C;&#xFF1B;&#x6216;&#x8005;&#x6709;&#x4E9B;&#x5E94;&#x7528;&#x53D1;&#x73B0;&#x662F;&#x6765;&#x81EA;&#x4E8E; <code>/etc/hosts</code> &#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x5C31;&#x5047;&#x5B9A;&#x5176;&#x4E3A;&#x9759;&#x6001;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x7F13;&#x5B58;&#x7ED3;&#x679C;&#x4E0D;&#x518D;&#x67E5;&#x8BE2;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x5BB9;&#x5668;&#x542F;&#x505C; IP &#x53D8;&#x66F4;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x65E7;&#x7684;&#x6761;&#x76EE;&#x800C;&#x65E0;&#x6CD5;&#x8FDE;&#x63A5;&#x5230;&#x6B63;&#x786E;&#x7684;&#x5BB9;&#x5668;&#x7B49;&#x7B49;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x4E00;&#x4EE3; Swarm &#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5728; <code>docker-compose.yml</code> &#x4E2D;&#x4F7F;&#x7528;&#x4E86; <code>links</code> &#x5C31;&#x610F;&#x5473;&#x7740;&#x670D;&#x52A1;&#x95F4;&#x7684;&#x5F3A;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x56E0;&#x6B64;&#x8C03;&#x5EA6;&#x65F6;&#x4E0D;&#x4F1A;&#x5C06;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x4E8E;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#xFF0C;&#x800C;&#x662F;&#x5168;&#x90E8;&#x8FD0;&#x884C;&#x4E8E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x4F7F;&#x5F97;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x5931;&#x8D25;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4E0D;&#x8981;&#x518D;&#x4F7F;&#x7528; <code>--link</code> &#x4EE5;&#x53CA; <code>docker-compose.yml</code> &#x4E2D;&#x7684; <code>links</code> &#x4E86;&#x3002;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>docker network</code>&#xFF0C;&#x5EFA;&#x7ACB;&#x7F51;&#x7EDC;&#xFF0C;&#x800C; <code>docker run --network</code> &#x6765;&#x8FDE;&#x63A5;&#x7279;&#x5B9A;&#x7F51;&#x7EDC;&#x3002;&#x6216;&#x8005;&#x4F7F;&#x7528; <code>version: &apos;2&apos;</code> &#x7684; <code>docker-compose.yml</code> &#x76F4;&#x63A5;&#x5B9A;&#x4E49;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x5E76;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5EFA;&#x8BAE;&#x53BB;&#x770B;&#x4E00;&#x4E0B;&#x6211;&#x5199;&#x7684; <code>LNMP</code> &#x591A;&#x5BB9;&#x5668;&#x4E92;&#x8054;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;<a href="https://coding.net/u/twang2218/p/docker-lnmp/git" target="_blank" rel="noopener">https://coding.net/u/twang2218/p/docker-lnmp/git</a></p>
<h3 id="shi-yong-hbase-hadoop-de-shi-hou-fan-xiang-jie-xi-zong-shi-bu-dui-zen-me-ban"><a href="#&#x4F7F;&#x7528;-HBase-Hadoop-&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x603B;&#x662F;&#x4E0D;&#x5BF9;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x4F7F;&#x7528; HBase/Hadoop &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x603B;&#x662F;&#x4E0D;&#x5BF9;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x4F7F;&#x7528; HBase/Hadoop &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x603B;&#x662F;&#x4E0D;&#x5BF9;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#shi-yong-hbase-hadoop-de-shi-hou-fan-xiang-jie-xi-zong-shi-bu-dui-zen-me-ban" class="header-anchor">#</a></h3><p>Hadoop/HBase &#x8FD9;&#x7C7B;&#x4E1C;&#x897F;&#x603B;&#x559C;&#x6B22;&#x6839;&#x636E;&#x8BBE;&#x5B9A;&#x7684;&#x540D;&#x79F0;&#x6B63;&#x5411;&#x7684;&#x89E3;&#x6790;&#x4E00;&#x904D;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x5019;&#x4F1A;&#x53CD;&#x5411;&#x7684;&#x89E3;&#x6790;&#x4E00;&#x904D;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x4E00;&#x81F4;&#x3002;&#x8FD9;&#x79CD;&#x9ED8;&#x8BA4;&#x5047;&#x5B9A;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x4F1A;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528; <code>/etc/hosts</code> &#x7684;&#x65F6;&#x5019;&#x3002;&#x6B63;&#x5411;&#x89E3;&#x6790;&#x4F1A;&#x4ECE; <code>/etc/hosts</code> &#x4E2D;&#x53D6;&#x5F97;&#xFF0C;&#x800C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x5219;&#x66F4;&#x53EF;&#x80FD;&#x8D70; DNS&#xFF0C;&#x4E8E;&#x662F;&#x51FA;&#x73B0;&#x4E86;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</p>
<p>&#x5BF9;&#x4E8E; Docker &#x800C;&#x8A00;&#xFF0C;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x540E;&#xFF0C;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x6709;&#x5F88;&#x591A;&#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x5185;&#x7F6E; DNS &#x53EF;&#x4EE5;&#x6839;&#x636E;<strong>&#x670D;&#x52A1;&#x540D;</strong>&#x3001;<strong>&#x5BB9;&#x5668;&#x540D;</strong>&#x3001;<strong>&#x7F51;&#x7EDC;&#x522B;&#x540D;</strong>&#x3001;<strong>&lt;&#x5BB9;&#x5668;&#x540D;&gt;.&lt;&#x7F51;&#x7EDC;&#x540D;&gt;</strong> &#x7B49;&#x6765;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x3002;&#x56E0;&#x6B64;&#x6B63;&#x5411;&#x89E3;&#x6790;&#x8BBE;&#x7F6E;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x90FD;&#x4F1A;&#x6307;&#x5411;&#x5BB9;&#x5668;&#x7684; IP&#x3002;</p>
<p>&#x800C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x5219;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED3;&#x679C;&#xFF0C;&#x800C;&#x53EA;&#x8FD4;&#x56DE;<code>&lt;&#x5BB9;&#x5668;&#x540D;&gt;.&lt;&#x7F51;&#x7EDC;&#x540D;&gt;</code>&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x5F53;&#x6709;&#x4EBA;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it --rm \</span><br><span class="line">    --name wombat.example.com \</span><br><span class="line">    --hostname wombat.example.com \</span><br><span class="line">    --network net1 \</span><br><span class="line">    m3adow/nettools</span><br></pre></td></tr></table></figure>
<p>&#x4F1A;&#x53D1;&#x73B0;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x5E76;&#x975E;&#x81EA;&#x5DF1;&#x6240;&#x671F;&#x671B;&#x7684;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># ip a</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">50: eth0@if51: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP</span><br><span class="line">    link/ether 02:42:ac:13:00:02 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.19.0.2/16 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:acff:fe13:2/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">/ <span class="comment"># dig +short wombat.example.com</span></span><br><span class="line">172.19.0.2</span><br><span class="line">/ <span class="comment"># host 172.19.0.2</span></span><br><span class="line">2.0.19.172.in-addr.arpa domain name pointer wombat.example.com.net1.</span><br></pre></td></tr></table></figure>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#xFF0C;&#x7531; <code>wombat.example.com</code> &#x6B63;&#x5411;&#x89E3;&#x6790;&#x7684;&#x8BDD;&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x662F; <code>172.19.0.2</code>&#xFF0C;&#x786E;&#x5B9E;&#x662F;&#x6211;&#x4EEC;&#x7684; IP &#x5730;&#x5740;&#xFF1B;&#x4F46;&#x662F;&#x7531;  <code>172.19.0.2</code> &#x53CD;&#x5411;&#x89E3;&#x6790;&#x7684;&#x8BDD;&#xFF0C;&#x6240;&#x5F97;&#x5230;&#x7684;&#x57DF;&#x540D;&#x786E;&#x5B9E; <code>wombat.example.com.net1</code>&#x3002;&#x591A;&#x4E86;&#x4E00;&#x4E2A; <code>.net1</code> &#x7684;&#x5C3E;&#x5DF4;&#x3002;&#x4ECE;&#x800C;&#x5BFC;&#x81F4; HBase/Hadoop &#x8FD9;&#x7C7B;&#x8F6F;&#x4EF6;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x77E5;&#x9053;&#x53CD;&#x5411;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;&#x683C;&#x5F0F;&#x4E3A; <code>&lt;&#x5BB9;&#x5668;&#x540D;&gt;.&lt;&#x7F51;&#x7EDC;&#x540D;&gt;</code>&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x7F51;&#x7EDC;&#x540D;&#x8BBE;&#x4E3A;&#x57DF;&#x540D;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ docker network create example.com</span><br><span class="line">$ docker run -it --rm \</span><br><span class="line">    --name wombat \</span><br><span class="line">    --hostname wombat.example.com \</span><br><span class="line">    --network example.com \</span><br><span class="line">    m3adow/nettools</span><br><span class="line">/ <span class="comment"># ip a</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">52: eth0@if53: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP</span><br><span class="line">    link/ether 02:42:ac:15:00:02 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.21.0.2/16 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:acff:fe15:2/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">/ <span class="comment"># dig +short wombat.example.com</span></span><br><span class="line">172.21.0.2</span><br><span class="line">/ <span class="comment"># host 172.21.0.2</span></span><br><span class="line">2.0.21.172.in-addr.arpa domain name pointer wombat.example.com.</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x770B;&#x5230;&#xFF0C;&#x6B63;&#x5411;&#x89E3;&#x6790;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x4E5F;&#x5F97;&#x5230;&#x4E86; <code>wombat.example.com</code> &#x8FD9;&#x4E2A;&#x6240;&#x671F;&#x671B;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<blockquote>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x670D;&#x52A1;&#x540D;&#x3001;&#x4E3B;&#x673A;&#x540D;&#x3001;&#x5BB9;&#x5668;&#x540D;&#x8FD9;&#x7C7B;&#x53EF;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x5E94;&#x8BE5;&#x5C3D;&#x91CF;&#x4F7F;&#x7528; <strong>&#x975E; FQDN</strong>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x5305;&#x542B; <code>.</code> &#x7684;&#x5355;&#x4E00;&#x540D;&#x5B57;&#xFF0C;&#x5426;&#x5219;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>
</blockquote>
<h3 id="rong-qi-zen-me-qu-su-zhu-ji-ip-a"><a href="#&#x5BB9;&#x5668;&#x600E;&#x4E48;&#x53D6;&#x5BBF;&#x4E3B;&#x673A;-IP-&#x554A;&#xFF1F;" class="headerlink" title="&#x5BB9;&#x5668;&#x600E;&#x4E48;&#x53D6;&#x5BBF;&#x4E3B;&#x673A; IP &#x554A;&#xFF1F;"></a>&#x5BB9;&#x5668;&#x600E;&#x4E48;&#x53D6;&#x5BBF;&#x4E3B;&#x673A; IP &#x554A;&#xFF1F; <a href="#rong-qi-zen-me-qu-su-zhu-ji-ip-a" class="header-anchor">#</a></h3><h4 id="dan-ji-huan-jing"><a href="#&#x5355;&#x673A;&#x73AF;&#x5883;" class="headerlink" title="&#x5355;&#x673A;&#x73AF;&#x5883;"></a>&#x5355;&#x673A;&#x73AF;&#x5883; <a href="#dan-ji-huan-jing" class="header-anchor">#</a></h4><p>&#x5982;&#x679C;&#x662F;&#x5355;&#x673A;&#x73AF;&#x5883;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E0D;&#x5FC5;&#x7422;&#x78E8;&#x600E;&#x4E48;&#x7A81;&#x7834;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x9650;&#x5236;&#xFF0C;&#x76F4;&#x63A5;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x9001;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -e HOST_IP=&lt;&#x5BBF;&#x4E3B;&#x7684;IP&#x5730;&#x5740;&gt; nginx</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x5BB9;&#x5668;&#x5185;&#x76F4;&#x63A5;&#x8BFB;&#x53D6; <code>HOST_IP</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5373;&#x53EF;&#x3002;</p>
<h4 id="ji-qun-huan-jing"><a href="#&#x96C6;&#x7FA4;&#x73AF;&#x5883;" class="headerlink" title="&#x96C6;&#x7FA4;&#x73AF;&#x5883;"></a>&#x96C6;&#x7FA4;&#x73AF;&#x5883; <a href="#ji-qun-huan-jing" class="header-anchor">#</a></h4><p>&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;<code>docker service create</code> &#x4E2D;&#x7684; <code>-e</code> &#x4EE5;&#x53CA; <code>--env-file</code>&#x662F;&#x5728;&#x670D;&#x52A1;&#x521B;&#x5EFA;&#x65F6;&#x6307;&#x5B9A;&#x3001;&#x8BFB;&#x53D6;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x800C;&#x4E14;&#x76EE;&#x524D;&#x4E0D;&#x5B58;&#x5728; <code>dockerd -e</code> &#x9009;&#x9879;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x8FBE;&#x4E0D;&#x5230;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x6709;&#x53D8;&#x901A;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5BBF;&#x4E3B;&#x4E0A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A; <code>/etc/variables</code> &#x6587;&#x4EF6;&#xFF08;&#x540D;&#x5B57;&#x968F;&#x610F;&#xFF0C;&#x8FD9;&#x91CC;&#x7528;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E3E;&#x4F8B;&#xFF09;&#x3002;&#x5176;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HOST_IP=1.2.3.4</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x4E2D; <code>1.2.3.4</code> &#x662F;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x5BBF;&#x4E3B; IP&#xFF0C;&#x56E0;&#x6B64;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x7684; <code>/etc/variables</code> &#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x540C;&#x3002;</p>
<p>&#x800C;&#x5728;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x6302;&#x8F7D;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x7AEF;&#x672C;&#x5730;&#x6587;&#x4EF6;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker service create --name app \</span><br><span class="line">    --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=/etc/variables,target=/etc/variables:ro \</span><br><span class="line">    myapp</span><br></pre></td></tr></table></figure>
<p>&#x7531;&#x4E8E; <code>--mount</code> &#x662F;&#x53D1;&#x751F;&#x4E8E;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x52A0;&#x8F7D;&#x7684;&#x662F;&#x6240;&#x8FD0;&#x884C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684; <code>/etc/variables</code>&#xFF0C;&#x91CC;&#x9762;&#x6240;&#x5305;&#x542B;&#x7684;&#x4E5F;&#x662F;&#x8BE5;&#x670D;&#x52A1;&#x5668;&#x7684; IP &#x5730;&#x5740;&#x3002;</p>
<p>&#x5728; <code>myapp</code> &#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x7684;&#x5165;&#x53E3;&#x811A;&#x672C;&#x52A0;&#x5165;&#x52A0;&#x8F7D;&#x8BE5;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6587;&#x4EF6;&#x7684;&#x547D;&#x4EE4;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/variables</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837; <code>app</code> &#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x5C31;&#x4F1A;&#x62E5;&#x6709; <code>HOST_IP</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x5176;&#x503C;&#x4E3A;&#x6240;&#x8FD0;&#x884C;&#x7684;&#x5BBF;&#x4E3B; IP&#x3002;</p>
<h2 id="cun-chu-wen-ti-11"><a href="#&#x5B58;&#x50A8;&#x95EE;&#x9898;-11" class="headerlink" title="&#x5B58;&#x50A8;&#x95EE;&#x9898; (11)"></a>&#x5B58;&#x50A8;&#x95EE;&#x9898; <code>(11)</code> <a href="#cun-chu-wen-ti-11" class="header-anchor">#</a></h2><h3 id="rong-qi-ci-pan-ke-yi-xian-zhi-pei-e-me"><a href="#&#x5BB9;&#x5668;&#x78C1;&#x76D8;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x914D;&#x989D;&#x4E48;&#xFF1F;" class="headerlink" title="&#x5BB9;&#x5668;&#x78C1;&#x76D8;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x914D;&#x989D;&#x4E48;&#xFF1F;"></a>&#x5BB9;&#x5668;&#x78C1;&#x76D8;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x914D;&#x989D;&#x4E48;&#xFF1F; <a href="#rong-qi-ci-pan-ke-yi-xian-zhi-pei-e-me" class="header-anchor">#</a></h3><p>&#x5BF9;&#x4E8E; <code>devicemapper</code>, <code>btrfs</code>, <code>zfs</code> &#x6765;&#x8BF4;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>--storage-opt size=100G</code> &#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x9650;&#x5236; <code>rootfs</code> &#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create -it --storage-opt size=120G fedora /bin/bash</span><br></pre></td></tr></table></figure>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/run/#/set-storage-driver-options-per-container" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/run/#/set-storage-driver-options-per-container</a></p>
<h3 id="rong-qi-nei-de-shu-ju-gai-bao-cun-zai-jing-xiang-li-huan-shi-wu-li-ji-li"><a href="#&#x5BB9;&#x5668;&#x5185;&#x7684;&#x6570;&#x636E;&#x8BE5;&#x4FDD;&#x5B58;&#x5728;&#x955C;&#x50CF;&#x91CC;&#x8FD8;&#x662F;&#x7269;&#x7406;&#x673A;&#x91CC;&#xFF1F;" class="headerlink" title="&#x5BB9;&#x5668;&#x5185;&#x7684;&#x6570;&#x636E;&#x8BE5;&#x4FDD;&#x5B58;&#x5728;&#x955C;&#x50CF;&#x91CC;&#x8FD8;&#x662F;&#x7269;&#x7406;&#x673A;&#x91CC;&#xFF1F;"></a>&#x5BB9;&#x5668;&#x5185;&#x7684;&#x6570;&#x636E;&#x8BE5;&#x4FDD;&#x5B58;&#x5728;&#x955C;&#x50CF;&#x91CC;&#x8FD8;&#x662F;&#x7269;&#x7406;&#x673A;&#x91CC;&#xFF1F; <a href="#rong-qi-nei-de-shu-ju-gai-bao-cun-zai-jing-xiang-li-huan-shi-wu-li-ji-li" class="header-anchor">#</a></h3><p>&#x5982;&#x679C;&#x6240;&#x8C13;&#x6570;&#x636E;&#x662F;&#x6307;&#x8FD0;&#x884C;&#x65F6;&#x52A8;&#x6001;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x90E8;&#x5206;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x4E0D;&#x5E94;&#x8BE5;&#x4FDD;&#x5B58;&#x4E8E;&#x955C;&#x50CF;&#x5185;&#x3002;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8981;&#x4FDD;&#x6301;&#x5BB9;&#x5668;&#x57FA;&#x7840;&#x6587;&#x4EF6;&#x4E0D;&#x53EF;&#x53D8;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x800C;&#x53D8;&#x5316;&#x90E8;&#x5206;&#x4F7F;&#x7528;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;&#x6216;&#x8005;&#x6570;&#x636E;&#x5377;&#x6765;&#x89E3;&#x51B3;&#x3002;</p>
<p>&#x5EFA;&#x8BAE;&#x770B;&#x4E00;&#x4E0B;&#x5B98;&#x7F51; <code>docker volume</code> &#x7684;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/tutorials/dockervolumes/" target="_blank" rel="noopener">https://docs.docker.com/engine/tutorials/dockervolumes/</a></p>
<h3 id="kan-dao-zong-shuo-yao-bao-chi-rong-qi-wu-zhuang-tai-na-shi-me-shi-wu-zhuang-tai"><a href="#&#x770B;&#x5230;&#x603B;&#x8BF4;&#x8981;&#x4FDD;&#x6301;&#x5BB9;&#x5668;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4EC0;&#x4E48;&#x662F;&#x65E0;&#x72B6;&#x6001;&#xFF1F;" class="headerlink" title="&#x770B;&#x5230;&#x603B;&#x8BF4;&#x8981;&#x4FDD;&#x6301;&#x5BB9;&#x5668;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4EC0;&#x4E48;&#x662F;&#x65E0;&#x72B6;&#x6001;&#xFF1F;"></a>&#x770B;&#x5230;&#x603B;&#x8BF4;&#x8981;&#x4FDD;&#x6301;&#x5BB9;&#x5668;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4EC0;&#x4E48;&#x662F;&#x65E0;&#x72B6;&#x6001;&#xFF1F; <a href="#kan-dao-zong-shuo-yao-bao-chi-rong-qi-wu-zhuang-tai-na-shi-me-shi-wu-zhuang-tai" class="header-anchor">#</a></h3><p>&#x8FD9;&#x91CC;&#x8BF4;&#x5230;&#x7684;&#x6709;&#x4E24;&#x4E2A;&#x5C42;&#x9762;&#x7684;&#x65E0;&#x72B6;&#x6001;&#xFF1A;</p>
<h4 id="rong-qi-cun-chu-ceng-de-wu-zhuang-tai"><a href="#&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x65E0;&#x72B6;&#x6001;" class="headerlink" title="&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x65E0;&#x72B6;&#x6001;"></a>&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x65E0;&#x72B6;&#x6001; <a href="#rong-qi-cun-chu-ceng-de-wu-zhuang-tai" class="header-anchor">#</a></h4><p>&#x8FD9;&#x91CC;&#x63D0;&#x5230;&#x7684;&#x5B58;&#x50A8;&#x5C42;&#x662F;&#x6307;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x955C;&#x50CF;&#x3001;&#x5BB9;&#x5668;&#x5404;&#x4E2A;&#x5C42;&#x7684;&#x5B58;&#x50A8;&#xFF0C;&#x4E00;&#x822C;&#x662F; <code>Union FS</code>&#xFF0C;&#x5982; <code>AUFS</code>&#xFF0C;&#x6216;&#x8005;&#x662F;&#x4F7F;&#x7528;&#x5757;&#x8BBE;&#x5907;&#x7684;&#x4E00;&#x4E9B;&#x673A;&#x5236;&#xFF08;&#x5982; <code>snapshot</code> &#xFF09;&#x8FDB;&#x884C;&#x6A21;&#x62DF;&#xFF0C;&#x5982; <code>devicemapper</code>&#x3002;</p>
<p><code>Union FS</code> &#x8FD9;&#x7C7B;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x5728;&#x73B0;&#x6709;&#x5B58;&#x50A8;&#x4E0A;&#xFF0C;&#x518D;&#x52A0;&#x4E00;&#x5C42;&#x6216;&#x591A;&#x5C42;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x7C7B;&#x5B58;&#x50A8;&#x7684;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#x5E76;&#x4E0D;&#x597D;&#x3002;&#x5E76;&#x4E14;&#x5BF9;&#x4E8E; <code>CentOS</code> &#x8FD9;&#x7C7B;&#x53EA;&#x80FD;&#x4F7F;&#x7528; <code>devicemapper</code> &#x7684;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#xFF0C;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x8BFB;&#x5199;&#x8FD8;&#x7ECF;&#x5E38;&#x51FA; bug&#x3002;&#x56E0;&#x6B64;&#xFF0C;<strong>&#x5728; Docker &#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8981;&#x907F;&#x514D;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x8BFB;&#x5199;</strong>&#x3002;&#x9891;&#x7E41;&#x8BFB;&#x5199;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;<code>&#x5377;</code>&#x3002;&#x9700;&#x8981;&#x6301;&#x4E45;&#x5316;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>&#x547D;&#x540D;&#x5377;</strong>&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#x3002;&#x7531;&#x4E8E;&#x547D;&#x540D;&#x5377;&#x7684;&#x751F;&#x5B58;&#x5468;&#x671F;&#x548C;&#x5BB9;&#x5668;&#x4E0D;&#x540C;&#xFF0C;&#x5BB9;&#x5668;&#x6D88;&#x4EA1;&#x91CD;&#x5EFA;&#xFF0C;&#x5377;&#x4E0D;&#x4F1A;&#x8DDF;&#x968F;&#x6D88;&#x4EA1;&#x3002;&#x6240;&#x4EE5;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x968F;&#x4FBF;&#x5220;&#x4E86;&#x91CD;&#x65B0;<code>run</code>&#xFF0C;&#x800C;&#x5176;&#x6302;&#x8F7D;&#x7684;<code>&#x5377;</code>&#x5219;&#x4F1A;&#x4FDD;&#x6301;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h4 id="fu-wu-ceng-mian-de-wu-zhuang-tai"><a href="#&#x670D;&#x52A1;&#x5C42;&#x9762;&#x7684;&#x65E0;&#x72B6;&#x6001;" class="headerlink" title="&#x670D;&#x52A1;&#x5C42;&#x9762;&#x7684;&#x65E0;&#x72B6;&#x6001;"></a>&#x670D;&#x52A1;&#x5C42;&#x9762;&#x7684;&#x65E0;&#x72B6;&#x6001; <a href="#fu-wu-ceng-mian-de-wu-zhuang-tai" class="header-anchor">#</a></h4><p>&#x4F7F;&#x7528;&#x5377;&#x6301;&#x4E45;&#x5316;&#x5BB9;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x867D;&#x7136;&#x4ECE;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x89D2;&#x5EA6;&#x770B;&#xFF0C;&#x662F;&#x65E0;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x670D;&#x52A1;&#x5C42;&#x9762;&#x770B;&#xFF0C;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x662F;&#x6709;&#x72B6;&#x6001;&#x7684;&#x3002;</p>
<p>&#x4ECE;&#x670D;&#x52A1;&#x5C42;&#x9762;&#x4E0A;&#x8BF4;&#xFF0C;&#x4E5F;&#x5B58;&#x5728;&#x65E0;&#x72B6;&#x6001;&#x670D;&#x52A1;&#x3002;&#x5C31;&#x662F;&#x8BF4;&#x670D;&#x52A1;&#x672C;&#x8EAB;&#x4E0D;&#x9700;&#x8981;&#x5199;&#x5165;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#x3002;&#x6BD4;&#x5982;&#x524D;&#x7AEF; <code>nginx</code>&#xFF0C;&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x5199;&#x5165;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#xFF08;&#x65E5;&#x5FD7;&#x8D70;Docker&#x65E5;&#x5FD7;&#x9A71;&#x52A8;&#xFF09;&#xFF0C;&#x4E2D;&#x95F4;&#x7684; <code>php</code>, <code>node.js</code> &#x7B49;&#x670D;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x672C;&#x5730;&#x5B58;&#x50A8;&#xFF0C;&#x5B83;&#x4EEC;&#x6240;&#x9700;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5728; <code>redis</code>, <code>mysql</code>, <code>mongodb</code> &#x4E2D;&#x4E86;&#x3002;&#x8FD9;&#x7C7B;&#x670D;&#x52A1;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x9700;&#x8981;&#x5377;&#xFF0C;&#x4E5F;&#x4E0D;&#x53D1;&#x751F;&#x672C;&#x5730;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x5220;&#x9664;&#x3001;&#x91CD;&#x542F;&#x3001;&#x4E0D;&#x4FDD;&#x5B58;&#x81EA;&#x8EAB;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x4E0D;&#x5F71;&#x54CD;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x662F;<code>&#x65E0;&#x72B6;&#x6001;&#x670D;&#x52A1;</code>&#x3002;&#x8FD9;&#x7C7B;&#x670D;&#x52A1;&#x7531;&#x4E8E;&#x4E0D;&#x9700;&#x8981;&#x72B6;&#x6001;&#x8FC1;&#x79FB;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4EEC;&#x7684;&#x96C6;&#x7FA4;&#x8C03;&#x5EA6;&#x66F4;&#x65B9;&#x4FBF;&#x3002;</p>
<p>&#x4E4B;&#x524D;&#x6CA1;&#x6709; <code>docker volume</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6709;&#x4E9B;&#x4EBA;&#x8BF4; Docker &#x53EA;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x65E0;&#x72B6;&#x6001;&#x670D;&#x52A1;&#xFF0C;&#x539F;&#x56E0;&#x5C31;&#x662F;&#x53EA;&#x770B;&#x5230;&#x4E86;&#x5B58;&#x50A8;&#x5C42;&#x9700;&#x6C42;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x6CA1;&#x6709; <code>docker volume</code> &#x7684;&#x6301;&#x4E45;&#x5316;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x8FD9;&#x4E2A;&#x8BF4;&#x6CD5;&#x5DF2;&#x7ECF;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x6709;&#x72B6;&#x6001;&#xFF0C;&#x72B6;&#x6001;&#x6301;&#x4E45;&#x5316;&#x7528; <code>docker volume</code>&#x3002;</p>
<p>&#x5F53;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x6709;&#x72B6;&#x6001;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684; <code>local</code> &#x5377;&#x9A71;&#x52A8;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;<code>&#x672C;&#x5730;&#x5B58;&#x50A8;</code>&#x8FDB;&#x884C;&#x72B6;&#x6001;&#x6301;&#x4E45;&#x5316;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5355;&#x673A;&#x670D;&#x52A1;&#x3001;&#x5BB9;&#x5668;&#x7684;&#x518D;&#x8C03;&#x5EA6;&#x8FD0;&#x884C;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x4F7F;&#x7528;<code>&#x672C;&#x5730;&#x5B58;&#x50A8;</code>&#x7684;&#x5377;&#xFF0C;&#x53EA;&#x53EF;&#x4EE5;&#x4E3A;&#x5F53;&#x524D;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;&#x6301;&#x4E45;&#x5316;&#x7684;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x65E0;&#x6CD5;&#x8DE8;&#x4E3B;&#x673A;&#x3002;</p>
<p>&#x4F46;&#x8FD9;&#x53EA;&#x662F;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684; <code>local</code> &#x9A71;&#x52A8;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528; <code>&#x672C;&#x5730;&#x5B58;&#x50A8;</code> &#x800C;&#x5DF2;&#x3002;&#x4F7F;&#x7528;&#x5206;&#x5E03;&#x5F0F;/&#x5171;&#x4EAB;&#x5B58;&#x50A8;&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8DE8;&#x4E3B;&#x673A;&#x7684;&#x95EE;&#x9898;&#x3002;<code>docker volume</code> &#x81EA;&#x7136;&#x652F;&#x6301;&#x5F88;&#x591A;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x7684;&#x9A71;&#x52A8;&#xFF0C;&#x6BD4;&#x5982; <code>flocker</code>&#x3001;<code>glusterfs</code>&#x3001;<code>ceph</code>&#x3001;<code>ipfs</code> &#x7B49;&#x7B49;&#x3002;&#x5E38;&#x7528;&#x7684;&#x63D2;&#x4EF6;&#x5217;&#x8868;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/extend/legacy_plugins/#/volume-plugins" target="_blank" rel="noopener">https://docs.docker.com/engine/extend/legacy_plugins/#/volume-plugins</a></p>
<h3 id="shu-ju-rong-qi-shu-ju-juan-ming-ming-juan-ni-ming-juan-gua-zai-mu-lu-zhe-xie-du-you-shi-me-qu-bie"><a href="#&#x6570;&#x636E;&#x5BB9;&#x5668;&#x3001;&#x6570;&#x636E;&#x5377;&#x3001;&#x547D;&#x540D;&#x5377;&#x3001;&#x533F;&#x540D;&#x5377;&#x3001;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x8FD9;&#x4E9B;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="&#x6570;&#x636E;&#x5BB9;&#x5668;&#x3001;&#x6570;&#x636E;&#x5377;&#x3001;&#x547D;&#x540D;&#x5377;&#x3001;&#x533F;&#x540D;&#x5377;&#x3001;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x8FD9;&#x4E9B;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;"></a>&#x6570;&#x636E;&#x5BB9;&#x5668;&#x3001;&#x6570;&#x636E;&#x5377;&#x3001;&#x547D;&#x540D;&#x5377;&#x3001;&#x533F;&#x540D;&#x5377;&#x3001;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x8FD9;&#x4E9B;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F; <a href="#shu-ju-rong-qi-shu-ju-juan-ming-ming-juan-ni-ming-juan-gua-zai-mu-lu-zhe-xie-du-you-shi-me-qu-bie" class="header-anchor">#</a></h3><p>&#x9996;&#x5148;&#xFF0C;&#x6302;&#x8F7D;&#x5206;&#x4E3A;<code>&#x6302;&#x8F7D;&#x672C;&#x5730;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;</code> &#x548C; <code>&#x6302;&#x8F7D;&#x6570;&#x636E;&#x5377;(Volume)</code>&#x3002;&#x800C;<code>&#x6570;&#x636E;&#x5377;</code>&#x53C8;&#x5206;&#x4E3A;<code>&#x533F;&#x540D;&#x6570;&#x636E;&#x5377;</code>&#x548C;<code>&#x547D;&#x540D;&#x6570;&#x636E;&#x5377;</code>&#x3002;</p>
<p><strong>&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;</strong>&#x7684;&#x6982;&#x5FF5;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x7ED1;&#x5B9A;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x76EE;&#x5F55;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x6837;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5176;&#x5F62;&#x5F0F;&#x662F;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v /var/www:/app nginx</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x6CE8;&#x610F;&#x5230; <code>-v</code> &#x7684;&#x53C2;&#x6570;&#x4E2D;&#xFF0C;&#x524D;&#x534A;&#x90E8;&#x5206;&#x662F;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;&#x5728; <code>docker run</code> &#x4E2D;&#x5FC5;&#x987B;&#x662F;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x800C;&#x5728; <code>docker-compose</code> &#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x56E0;&#x4E3A; <code>docker-compose</code> &#x4F1A;&#x5E2E;&#x4F60;&#x8865;&#x5168;&#x8DEF;&#x5F84;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x662F;&#x4F7F;&#x7528; <code>Docker Volume</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;<strong>&#x6570;&#x636E;&#x5377;</strong>&#x3002;&#x8FD9;&#x662F;&#x5F88;&#x591A;&#x770B;<em>&#x53E4;&#x8463;&#x4E66;</em>&#x7684;&#x4EBA;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x6982;&#x5FF5;&#xFF0C;<strong>&#x4E0D;&#x8981;&#x8DDF;&#x6570;&#x636E;&#x5BB9;&#x5668;&#xFF08;Data Container&#xFF09;&#x5F04;&#x6DF7;</strong>&#x3002;&#x6570;&#x636E;&#x5377;&#x662F; Docker &#x5F15;&#x64CE;&#x7EF4;&#x62A4;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528; <code>docker volume create</code> &#x547D;&#x4EE4;&#x521B;&#x5EFA;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x5377;&#x9A71;&#x52A8;&#x652F;&#x6301;&#x591A;&#x79CD;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#x3002;&#x5176;&#x9ED8;&#x8BA4;&#x7684;&#x9A71;&#x52A8;&#x4E3A; <code>local</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x672C;&#x5730;&#x5377;&#x9A71;&#x52A8;&#x3002;&#x672C;&#x5730;&#x9A71;&#x52A8;&#x652F;&#x6301;<strong>&#x547D;&#x540D;&#x5377;</strong>&#x548C;<strong>&#x533F;&#x540D;&#x5377;</strong>&#x3002;</p>
<p>&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x547D;&#x540D;&#x5377;&#x5C31;&#x662F;&#x6709;&#x540D;&#x5B57;&#x7684;&#x5377;&#xFF0C;&#x4F7F;&#x7528; <code>docker volume create --name xxx</code> &#x5F62;&#x5F0F;&#x521B;&#x5EFA;&#x5E76;&#x547D;&#x540D;&#x7684;&#x5377;&#xFF1B;&#x800C;&#x533F;&#x540D;&#x5377;&#x5C31;&#x662F;&#x6CA1;&#x540D;&#x5B57;&#x7684;&#x5377;&#xFF0C;&#x4E00;&#x822C;&#x662F; <code>docker run -v /data</code> &#x8FD9;&#x79CD;&#x4E0D;&#x6307;&#x5B9A;&#x5377;&#x540D;&#x7684;&#x65F6;&#x5019;&#x6240;&#x4EA7;&#x751F;&#xFF0C;&#x6216;&#x8005; <code>Dockerfile</code> &#x91CC;&#x9762;&#x7684;&#x5B9A;&#x4E49;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7684;&#x3002;</p>
<p>&#x6709;&#x540D;&#x5B57;&#x7684;&#x5377;&#xFF0C;&#x5728;&#x7528;&#x8FC7;&#x4E00;&#x6B21;&#x540E;&#xFF0C;&#x4EE5;&#x540E;&#x6302;&#x8F7D;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x3002;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x7684;&#x6570;&#x636E;&#x4F7F;&#x7528;&#x547D;&#x540D;&#x5377;&#x4FDD;&#x5B58;&#x3002;</p>
<p>&#x800C;&#x533F;&#x540D;&#x5377;&#x5219;&#x662F;&#x968F;&#x7740;&#x5BB9;&#x5668;&#x5EFA;&#x7ACB;&#x800C;&#x5EFA;&#x7ACB;&#xFF0C;&#x968F;&#x7740;&#x5BB9;&#x5668;&#x6D88;&#x4EA1;&#x800C;&#x6DF9;&#x6CA1;&#x4E8E;&#x5377;&#x5217;&#x8868;&#x4E2D;&#xFF08;&#x5BF9;&#x4E8E; <code>docker run</code> &#x533F;&#x540D;&#x5377;&#x4E0D;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x5220;&#x9664;&#xFF09;&#x3002;<strong>&#x5BF9;&#x4E8E;&#x4E8C;&#x4EE3; Swarm &#x670D;&#x52A1;&#x800C;&#x8A00;&#xFF0C;&#x533F;&#x540D;&#x5377;&#x4F1A;&#x968F;&#x7740;&#x670D;&#x52A1;&#x5220;&#x9664;&#x800C;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x3002;</strong> &#x56E0;&#x6B64;&#x533F;&#x540D;&#x5377;&#x53EA;&#x5B58;&#x653E;&#x65E0;&#x5173;&#x7D27;&#x8981;&#x7684;&#x4E34;&#x65F6;&#x6570;&#x636E;&#xFF0C;&#x968F;&#x7740;&#x5BB9;&#x5668;&#x6D88;&#x4EA1;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x5C06;&#x5931;&#x53BB;&#x5B58;&#x5728;&#x7684;&#x610F;&#x4E49;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x53EB;&#x6570;&#x636E;&#x5BB9;&#x5668; (Data Container) &#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F7F;&#x7528; <code>--volumes-from</code> &#x7684;&#x4E1C;&#x897F;&#x3002;&#x8FD9;&#x65E9;&#x5C31;&#x4E0D;&#x7528;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x770B;&#x4E86;&#x4E66;&#x8FD8;&#x5728;&#x8BF4;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x90A3;&#x8BF4;&#x660E;&#x4E66;&#x5DF2;&#x7ECF;&#x8FC7;&#x65F6;&#x4E86;&#x3002;&#x6309;&#x7167;&#x4ECA;&#x5929;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x8FD9;&#x7C7B;&#x6570;&#x636E;&#x5BB9;&#x5668;&#xFF0C;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x6302;&#x4E86;&#x4E2A;&#x533F;&#x540D;&#x5377;&#x7684;&#x5BB9;&#x5668;&#x7F62;&#x4E86;&#x3002;</p>
<p>&#x5728; <code>Dockerfile</code> &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x6302;&#x8F7D;&#xFF0C;&#x662F;&#x6307; <code>&#x533F;&#x540D;&#x6570;&#x636E;&#x5377;</code>&#x3002;<code>Dockerfile</code> &#x4E2D;&#x6307;&#x5B9A; <code>VOLUME</code> &#x7684;&#x76EE;&#x7684;&#xFF0C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x5C06;&#x67D0;&#x4E2A;&#x8DEF;&#x5F84;&#x786E;&#x5B9A;&#x4E3A;&#x5377;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x6309;&#x7167;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x7684;&#x8981;&#x6C42;&#xFF0C;<strong>&#x4E0D;&#x5E94;&#x8BE5;&#x5728;&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x5C42;&#x5185;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5199;&#x5165;&#x64CD;&#x4F5C;</strong>&#xFF0C;&#x6240;&#x6709;&#x5199;&#x5165;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x5377;&#x3002;&#x5982;&#x679C;&#x5B9A;&#x5236;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x67D0;&#x4E9B;&#x76EE;&#x5F55;&#x4F1A;&#x53D1;&#x751F;&#x9891;&#x7E41;&#x5927;&#x91CF;&#x7684;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;<strong>&#x4E3A;&#x4E86;&#x907F;&#x514D;</strong>&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x7531;&#x4E8E;&#x7528;&#x6237;&#x758F;&#x5FFD;&#x800C;&#x5FD8;&#x8BB0;&#x6307;&#x5B9A;&#x5377;&#xFF0C;&#x5BFC;&#x81F4;&#x5BB9;&#x5668;&#x53D1;&#x751F;&#x5B58;&#x50A8;&#x5C42;&#x5199;&#x5165;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728; <code>Dockerfile</code> &#x4E2D;&#x4F7F;&#x7528; <code>VOLUME</code> &#x6765;&#x6307;&#x5B9A;&#x67D0;&#x4E9B;&#x76EE;&#x5F55;&#x4E3A;&#x533F;&#x540D;&#x5377;&#x3002;&#x8FD9;&#x6837;&#x5373;&#x4F7F;&#x7528;&#x6237;&#x5FD8;&#x8BB0;&#x4E86;&#x6307;&#x5B9A;&#x5377;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x4E0D;&#x826F;&#x7684;&#x540E;&#x679C;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x8BBE;&#x7F6E;&#x53EF;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8986;&#x76D6;&#x3002;&#x901A;&#x8FC7; <code>docker run</code> &#x7684; <code>-v</code> &#x53C2;&#x6570;&#x6216;&#x8005; <code>docker-compose.yml</code> &#x7684; <code>volumes</code> &#x6307;&#x5B9A;&#x3002;&#x4F7F;&#x7528;<code>&#x547D;&#x540D;&#x5377;</code>&#x7684;&#x597D;&#x5904;&#x662F;&#x53EF;&#x4EE5;&#x590D;&#x7528;&#xFF0C;&#x5176;&#x5B83;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;<code>&#x547D;&#x540D;&#x6570;&#x636E;&#x5377;</code>&#x7684;&#x540D;&#x5B57;&#x6765;&#x6307;&#x5B9A;&#x6302;&#x8F7D;&#xFF0C;&#x5171;&#x4EAB;&#x5176;&#x5185;&#x5BB9;&#xFF08;&#x4E0D;&#x8FC7;<strong>&#x8981;&#x6CE8;&#x610F;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#x7684;&#x7ADE;&#x4E89;&#x95EE;&#x9898;</strong>&#xFF09;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;<code>Dockerfile</code> &#x4E2D;&#x8BF4; <code>VOLUME /data</code>&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x76F4;&#x63A5; <code>docker run</code>&#xFF0C;&#x5176; <code>/data</code> &#x5C31;&#x4F1A;&#x88AB;&#x6302;&#x8F7D;&#x4E3A;&#x533F;&#x540D;&#x5377;&#xFF0C;&#x5411; <code>/data</code> &#x5199;&#x5165;&#x7684;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x5199;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x5C42;&#xFF0C;&#x800C;&#x662F;&#x5199;&#x5165;&#x5230;&#x4E86;&#x533F;&#x540D;&#x5377;&#x4E2D;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x8FD0;&#x884C;&#x65F6; <code>docker run -v mydata:/data</code>&#xFF0C;&#x8FD9;&#x5C31;&#x8986;&#x76D6;&#x4E86; <code>/data</code> &#x7684;&#x6302;&#x8F7D;&#x8BBE;&#x7F6E;&#xFF0C;&#x8981;&#x6C42;&#x5C06; <code>/data</code> &#x6302;&#x8F7D;&#x5230;&#x540D;&#x4E3A; <code>mydata</code> &#x7684;&#x547D;&#x540D;&#x5377;&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x8BF4; <code>Dockerfile</code> &#x4E2D;&#x7684; <code>VOLUME</code> &#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x5C42;&#x4FDD;&#x9669;&#xFF0C;&#x786E;&#x4FDD;&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x7684;&#x9075;&#x5FAA;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x4E0D;&#x5411;&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x5C42;&#x5185;&#x8FDB;&#x884C;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x6570;&#x636E;&#x5377;&#x9ED8;&#x8BA4;&#x53EF;&#x80FD;&#x4F1A;&#x4FDD;&#x5B58;&#x4E8E; <code>/var/lib/docker/volumes</code>&#xFF0C;&#x4E0D;&#x8FC7;&#x4E00;&#x822C;&#x4E0D;&#x9700;&#x8981;&#x3001;&#x4E5F;<strong>&#x4E0D;&#x5E94;&#x8BE5;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;</strong>&#x3002;</p>
<h3 id="juan-he-gua-zai-mu-lu-you-shi-me-qu-bie"><a href="#&#x5377;&#x548C;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="&#x5377;&#x548C;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;"></a>&#x5377;&#x548C;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F; <a href="#juan-he-gua-zai-mu-lu-you-shi-me-qu-bie" class="header-anchor">#</a></h3><p>&#x5377; (Docker Volume) &#x662F;&#x53D7;&#x63A7;&#x5B58;&#x50A8;&#xFF0C;&#x662F;&#x7531; Docker &#x5F15;&#x64CE;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x7EF4;&#x62A4;&#x7684;&#x3002;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x5377;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E0D;&#x5FC5;&#x5904;&#x7406; <code>uid</code>&#x3001;<code>SELinux</code> &#x7B49;&#x5404;&#x79CD;&#x6743;&#x9650;&#x95EE;&#x9898;&#xFF0C;Docker &#x5F15;&#x64CE;&#x5728;&#x5EFA;&#x7ACB;&#x5377;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x5B89;&#x5168;&#x89C4;&#x5219;&#xFF0C;&#x4EE5;&#x53CA;&#x6839;&#x636E;&#x6302;&#x8F7D;&#x70B9;&#x8C03;&#x6574;&#x6743;&#x9650;&#x3002;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x5217;&#x8868;&#x3001;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x9664;&#x4E86;&#x672C;&#x5730;&#x5377;&#x5916;&#xFF0C;&#x8FD8;&#x652F;&#x6301;&#x7F51;&#x7EDC;&#x5377;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x5377;&#x3002;</p>
<p>&#x800C;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x90A3;&#x5C31;&#x6CA1;&#x4EBA;&#x7BA1;&#x4E86;&#xFF0C;&#x5C5E;&#x4E8E;&#x7528;&#x6237;&#x81EA;&#x884C;&#x7EF4;&#x62A4;&#x3002;&#x4F60;&#x5C31;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x5904;&#x7406;&#x6240;&#x6709;&#x6743;&#x9650;&#x95EE;&#x9898;&#x3002;&#x7279;&#x522B;&#x662F;&#x5728; <code>CentOS</code> &#x4E0A;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x78B0;&#x5230; <code>Permission Denied</code>&#xFF0C;&#x5C31;&#x662F;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5377;&#xFF0C;&#x800C;&#x662F;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x5BF9; SELinux &#x5B89;&#x5168;&#x6743;&#x9650;&#x4E00;&#x65E0;&#x6240;&#x77E5;&#x5BFC;&#x81F4;&#x3002;</p>
<h3 id="wei-shi-me-bang-ding-liao-su-zhu-de-wen-jian-dao-rong-qi-su-zhu-xiu-gai-liao-wen-jian-rong-qi-nei-kan-dao-de-huan-shi-jiu-de-nei-rong-a"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x7ED1;&#x5B9A;&#x4E86;&#x5BBF;&#x4E3B;&#x7684;&#x6587;&#x4EF6;&#x5230;&#x5BB9;&#x5668;&#xFF0C;&#x5BBF;&#x4E3B;&#x4FEE;&#x6539;&#x4E86;&#x6587;&#x4EF6;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x770B;&#x5230;&#x7684;&#x8FD8;&#x662F;&#x65E7;&#x7684;&#x5185;&#x5BB9;&#x554A;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x7ED1;&#x5B9A;&#x4E86;&#x5BBF;&#x4E3B;&#x7684;&#x6587;&#x4EF6;&#x5230;&#x5BB9;&#x5668;&#xFF0C;&#x5BBF;&#x4E3B;&#x4FEE;&#x6539;&#x4E86;&#x6587;&#x4EF6;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x770B;&#x5230;&#x7684;&#x8FD8;&#x662F;&#x65E7;&#x7684;&#x5185;&#x5BB9;&#x554A;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x7ED1;&#x5B9A;&#x4E86;&#x5BBF;&#x4E3B;&#x7684;&#x6587;&#x4EF6;&#x5230;&#x5BB9;&#x5668;&#xFF0C;&#x5BBF;&#x4E3B;&#x4FEE;&#x6539;&#x4E86;&#x6587;&#x4EF6;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x770B;&#x5230;&#x7684;&#x8FD8;&#x662F;&#x65E7;&#x7684;&#x5185;&#x5BB9;&#x554A;&#xFF1F; <a href="#wei-shi-me-bang-ding-liao-su-zhu-de-wen-jian-dao-rong-qi-su-zhu-xiu-gai-liao-wen-jian-rong-qi-nei-kan-dao-de-huan-shi-jiu-de-nei-rong-a" class="header-anchor">#</a></h3><p>&#x5728;&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x5185;&#x5BB9;&#x7684;&#x5F62;&#x5F0F;&#x4E2D;&#xFF0C;&#x6709;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5C31;&#x662F;<strong>&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x6587;&#x4EF6;</strong>&#xFF0C;&#x65E2;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v <span class="variable">$PWD</span>/myapp.ini:/app/app.ini myapp</span><br></pre></td></tr></table></figure>
<p>&#x5728; <code>myapp.ini</code> &#x6587;&#x4EF6;<strong>&#x4E0D;&#x53D1;&#x751F;&#x6539;&#x53D8;</strong>&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x7ED1;&#x5B9A;&#x662F;&#x548C;&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x6027;&#x8D28;&#x4E00;&#x6837;&#xFF0C;&#x540C;&#x6837;&#x662F;&#x5C06;&#x5BBF;&#x4E3B;&#x6587;&#x4EF6;&#x7ED1;&#x5B9A;&#x5230;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4E00;&#x65E6;&#x6587;&#x4EF6;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x60C5;&#x51B5;&#x5219;&#x6709;&#x4E0D;&#x540C;&#x3002;</p>
<p>&#x7B80;&#x5355;&#x7684;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#xFF0C;&#x6BD4;&#x5982; <code>echo &quot;name = jessie&quot; &gt;&gt; myapp.ini</code>&#xFF0C;&#x8FD9;&#x7C7B;&#x4FEE;&#x6539;&#x4F9D;&#x65E7;&#x8FD8;&#x662F;&#x539F;&#x6765;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5BBF;&#x4E3B;&#xFF08;&#x6216;&#x5BB9;&#x5668;&#xFF09;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x7684;&#x6539;&#x52A8;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x662F;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7684;&#x3002;</p>
<p>&#x800C;&#x590D;&#x6742;&#x7684;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x4F7F;&#x7528; <code>vim</code>&#xFF0C;&#x6216;&#x8005;&#x5176;&#x5B83;&#x7F16;&#x8F91;&#x5668;&#x7F16;&#x8F91;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x65B9;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x770B;&#x4E0D;&#x5230;&#x3002;</p>
<p>&#x5176;&#x539F;&#x56E0;&#x662F;&#x8FD9;&#x7C7B;&#x7F16;&#x8F91;&#x5668;&#x5728;&#x4FDD;&#x5B58;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x91C7;&#x7528;&#x4E00;&#x79CD;&#x907F;&#x514D;&#x5199;&#x5165;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x751F;&#x6545;&#x969C;&#x800C;&#x5BFC;&#x81F4;&#x6587;&#x4EF6;&#x4E22;&#x5931;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x65E2;&#x5148;&#x628A;&#x5185;&#x5BB9;&#x5199;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x53BB;&#xFF0C;&#x5199;&#x597D;&#x4E86;&#x540E;&#xFF0C;&#x518D;&#x5220;&#x9664;&#x65E7;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x65B0;&#x6587;&#x4EF6;&#x6539;&#x540D;&#x4E3A;&#x65E7;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4ECE;&#x800C;&#x5B8C;&#x6210;&#x4FDD;&#x5B58;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x4ECE;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x6D41;&#x7A0B;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x867D;&#x7136;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x5B57;&#x548C;&#x8FC7;&#x53BB;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#x662F;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x4E86;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x867D;&#x7136;&#x662F;&#x540C;&#x540D;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x65E7;&#x7684;&#x6587;&#x4EF6;&#x7684; <code>inode</code> &#x548C;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x7684; <code>inode</code> &#x4E0D;&#x540C;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ls -i</span><br><span class="line">268541 hello.txt</span><br><span class="line">$ vi hello.txt</span><br><span class="line">$ ls -i</span><br><span class="line">268716 hello.txt</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x7ECF;&#x8FC7; <code>vim</code> &#x7F16;&#x8F91;&#x6587;&#x4EF6;&#x540E;&#xFF0C;<code>inode</code> &#x4ECE; <code>268541</code> &#x53D8;&#x4E3A;&#x4E86; <code>268716</code>&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x521A;&#x624D;&#x8BF4;&#x7684;&#xFF0C;&#x540D;&#x5B57;&#x8FD8;&#x662F;&#x90A3;&#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x6587;&#x4EF6;&#x5DF2;&#x4E0D;&#x662F;&#x539F;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x4E86;&#x3002;</p>
<p>&#x800C; Docker &#x7684; <strong>&#x7ED1;&#x5B9A;</strong>&#x5BBF;&#x4E3B;&#x6587;&#x4EF6;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x773C;&#x91CC;&#xFF0C;&#x9488;&#x5BF9;&#x7684;&#x662F; <code>inode</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6587;&#x4EF6;&#x540D;&#x3002;&#x56E0;&#x6B64;&#x5BB9;&#x5668;&#x5185;&#x6240;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x4F9D;&#x65E7;&#x662F;&#x4E4B;&#x524D;&#x65E7;&#x7684; <code>inode</code> &#x5BF9;&#x5E94;&#x7684;&#x90A3;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x65E7;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x8FD9;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x4E4B;&#x524D;&#x7684;&#x90A3;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x5BBF;&#x4E3B;&#x5185;&#x4FEE;&#x6539;&#x7ED1;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x7ED3;&#x679C;&#x53D1;&#x73B0;&#x5BB9;&#x5668;&#x5185;&#x770B;&#x4E0D;&#x5230;&#x6539;&#x53D8;&#xFF0C;&#x5176;&#x539F;&#x56E0;&#x5C31;&#x5728;&#x4E8E;<strong>&#x5BBF;&#x4E3B;&#x7684;&#x90A3;&#x4E2A;&#x6587;&#x4EF6;&#x5DF2;&#x4E0D;&#x662F;&#x539F;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x4E86;</strong>&#x1F602;&#x3002;</p>
<p>&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x6539;&#x53D8;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;<strong>&#x4E0D;&#x8981;&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;</strong>&#xFF0C;&#x8FD9;&#x6837;&#x53EA;&#x8981;&#x76EE;&#x5F55;&#x4E0D;&#x8DD1;&#xFF0C;&#x91CC;&#x9762;&#x6587;&#x4EF6;&#x7231;&#x548B;&#x6539;&#x5C31;&#x548B;&#x6539;&#x1F601;&#x3002;</p>
<h3 id="duo-ge-docker-rong-qi-zhi-jian-gong-xiang-shu-ju-zen-me-ban-nfs"><a href="#&#x591A;&#x4E2A;-Docker-&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x600E;&#x4E48;&#x529E;&#xFF1F;NFS-&#xFF1F;" class="headerlink" title="&#x591A;&#x4E2A; Docker &#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x600E;&#x4E48;&#x529E;&#xFF1F;NFS &#xFF1F;"></a>&#x591A;&#x4E2A; Docker &#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x600E;&#x4E48;&#x529E;&#xFF1F;NFS &#xFF1F; <a href="#duo-ge-docker-rong-qi-zhi-jian-gong-xiang-shu-ju-zen-me-ban-nfs" class="header-anchor">#</a></h3><p>&#x5982;&#x679C;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BBF;&#x4E3B;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5377;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x7A0B;&#x5E8F;&#x4E0A;&#x8981;&#x5904;&#x7406;&#x597D;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;&#x4E0D;&#x540C;&#x5BBF;&#x4E3B;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5377;&#x9A71;&#x52A8;&#xFF0C;&#x8BA9;&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x5BBF;&#x4E3B;&#x7684;&#x5BB9;&#x5668;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x5982;S3&#x4E4B;&#x7C7B;&#xFF1A;</p>
<p><a href="https://docs.docker.com/engine/extend/plugins/#volume-plugins" target="_blank" rel="noopener">https://docs.docker.com/engine/extend/plugins/#volume-plugins</a></p>
<h3 id="ji-ran-yi-ge-rong-qi-yi-ge-ying-yong-na-me-wo-xiang-zai-gai-rong-qi-zhong-yong-ji-hua-ren-wu-cron-zen-me-ban"><a href="#&#x65E2;&#x7136;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x60F3;&#x5728;&#x8BE5;&#x5BB9;&#x5668;&#x4E2D;&#x7528;&#x8BA1;&#x5212;&#x4EFB;&#x52A1;-cron-&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x65E2;&#x7136;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x60F3;&#x5728;&#x8BE5;&#x5BB9;&#x5668;&#x4E2D;&#x7528;&#x8BA1;&#x5212;&#x4EFB;&#x52A1; cron &#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x65E2;&#x7136;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x60F3;&#x5728;&#x8BE5;&#x5BB9;&#x5668;&#x4E2D;&#x7528;&#x8BA1;&#x5212;&#x4EFB;&#x52A1; <code>cron</code> &#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#ji-ran-yi-ge-rong-qi-yi-ge-ying-yong-na-me-wo-xiang-zai-gai-rong-qi-zhong-yong-ji-hua-ren-wu-cron-zen-me-ban" class="header-anchor">#</a></h3><p><code>cron</code> &#x5176;&#x5B9E;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x8BE5;&#x53E6;&#x8D77;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x6765;&#x8FDB;&#x884C;&#xFF0C;&#x5982;&#x9700;&#x8BBF;&#x95EE;&#x8BE5;&#x5E94;&#x7528;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x8BE5;&#x5E94;&#x7528;&#x7684;&#x6570;&#x636E;&#x5377;&#x5373;&#x53EF;&#x3002;&#x800C; <code>cron</code> &#x7684;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;<code>cron</code> &#x4EE5;&#x524D;&#x53F0;&#x8FD0;&#x884C;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x6709;&#x4E2A; <code>python</code> &#x811A;&#x672C;&#x53EF;&#x4EE5;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x3002;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x6784;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x3002;</p>
<p>&#x9996;&#x5148;&#x57FA;&#x4E8E; <code>python</code> &#x7684;&#x955C;&#x50CF;&#x5B9A;&#x5236;&#xFF1A;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.5</span>.<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Shanghai</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y cron \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get autoremove -y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./cronpy /etc/cron.d/cronpy</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;cron&quot;</span>, <span class="string">&quot;-f&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x4E2D;&#x6240;&#x63D0;&#x53CA;&#x7684; <code>cronpy</code> &#x5C31;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BA1;&#x5212;&#x6267;&#x884C;&#x7684; <code>cron</code> &#x811A;&#x672C;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * root /app/task.py &gt;&gt; /var/<span class="built_in">log</span>/task.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x8BA1;&#x5212;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x5B9A;&#x65F6;&#x6267;&#x884C; <code>/app/task.py</code> &#x6587;&#x4EF6;&#xFF0C;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5728; <code>/var/log/task.log</code> &#x4E2D;&#x3002;&#x8FD9;&#x4E2A; <code>task.py</code> &#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x5185;&#x5BB9;&#x53EA;&#x662F;&#x8F93;&#x51FA;&#x4E2A;&#x65F6;&#x95F4;&#x800C;&#x5DF2;&#x3002;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/local/bin/python</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">print(<span class="string">&quot;Cron job has run at {0} with environment variable &quot;</span>.format(str(datetime.now())))</span><br></pre></td></tr></table></figure>
<p>&#x8FD9; <code>task.py</code> &#x53EF;&#x4EE5;&#x5728;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x65F6;&#x653E;&#x8FDB;&#x53BB;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x4E3E;&#x4F8B;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x6784;&#x5EFA;&#x955C;&#x50CF;</span></span><br><span class="line">docker build -t cronjob:latest .</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8FD0;&#x884C;&#x955C;&#x50CF;</span></span><br><span class="line">docker run \</span><br><span class="line">    --name cronjob \</span><br><span class="line">    -d \</span><br><span class="line">    -v $(<span class="built_in">pwd</span>)/task.py:/app/task.py \</span><br><span class="line">    -v $(<span class="built_in">pwd</span>)/<span class="built_in">log</span>/:/var/<span class="built_in">log</span>/ \</span><br><span class="line">    cronjob:latest</span><br></pre></td></tr></table></figure>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5E94;&#x8BE5;&#x5728;&#x6784;&#x5EFA;&#x4E3B;&#x673A;&#x4E0A;&#x8D4B;&#x4E88; <code>task.py</code> &#x6587;&#x4EF6;&#x53EF;&#x6267;&#x884C;&#x6743;&#x9650;&#x3002;</p>
<h3 id="ru-he-chu-shi-hua-juan"><a href="#&#x5982;&#x4F55;&#x521D;&#x59CB;&#x5316;&#x5377;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x521D;&#x59CB;&#x5316;&#x5377;&#xFF1F;"></a>&#x5982;&#x4F55;&#x521D;&#x59CB;&#x5316;&#x5377;&#xFF1F; <a href="#ru-he-chu-shi-hua-juan" class="header-anchor">#</a></h3><p>&#x5377;&#xFF08;<code>Volume</code>&#xFF09;&#xFF0C;&#x662F;&#x7528;&#x4E8E;&#x52A8;&#x6001;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x7684;&#x3002;&#x56E0;&#x6B64;&#x5176;&#x5185;&#x5B58;&#x50A8;&#x7684;&#x90FD;&#x662F;&#x52A8;&#x6001;&#x6570;&#x636E;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x4F1A;&#x53D8;&#x5316;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x91CC;&#x9762;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#x3002;&#x6216;&#x8005;&#x5728;&#x955C;&#x50CF;&#x91CC;&#x52A0;&#x5165;&#x521D;&#x59CB;&#x5316;&#x7684;&#x811A;&#x672C;&#xFF0C;&#x6BD4;&#x5982; <code>mysql</code> &#x955C;&#x50CF;&#x4E2D;&#x7684;&#x521D;&#x59CB;&#x5316;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x811A;&#x672C;&#xFF1B;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x5355;&#x72EC;&#x5236;&#x4F5C;&#x7EAF;&#x7CB9;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x5377;&#x7528;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5355;&#x72EC;&#x4E00;&#x6B21;&#x6027;&#x8FD0;&#x884C;&#x4EE5;&#x5C06;&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x704C;&#x5165;&#x5377;&#x4E2D;&#x3002;</p>
<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x8BF4;&#xFF0C;&#x5047;&#x8BBE;&#x4F60;&#x9700;&#x8981;&#x4E2A;&#x5377; <code>mydata</code>&#xFF0C;&#x7136;&#x540E;&#x91CC;&#x9762;&#x9700;&#x8981;&#x6709;&#x4E2A; <code>hello.txt</code> &#x6587;&#x4EF6;&#x662F;&#x5FC5;&#x987B;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x5426;&#x5219;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5C31;&#x8981;&#x51FA;&#x5927;&#x4E8B;&#x513F;&#x4E86;&#x2026;&#x2026;&#xFF08;&#x8FD9;&#x9700;&#x6C42;&#x5F88;&#x50BB;&#x6211;&#x77E5;&#x9053;&#x2026;&#x2026;&#x1F605;&#x597D;&#x5427;&#xFF0C;&#x5047;&#x8BBE;&#x5982;&#x6B64;&#xFF09;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x5148;&#x6709;&#x8FD9;&#x4E2A;&#x5377;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create --name mydata</span><br></pre></td></tr></table></figure>
<p>&#x90A3;&#x600E;&#x4E48;&#x628A;&#x8FD9;&#x4E2A;&#x8D85;&#x91CD;&#x8981;&#x7684; <code>hello.txt</code> &#x6587;&#x4EF6;&#x653E;&#x5165;&#x5377;&#x4E2D;&#x5462;&#xFF1F;&#x6709;&#x51E0;&#x79CD;&#x529E;&#x6CD5;&#x3002;</p>
<h4 id="zheng-chang-gua-zai-gai-mydata-juan-ran-hou-docker-cp-jin-qu"><a href="#&#x6B63;&#x5E38;&#x6302;&#x8F7D;&#x8BE5;-mydata-&#x5377;&#xFF0C;&#x7136;&#x540E;-docker-cp-&#x8FDB;&#x53BB;" class="headerlink" title="&#x6B63;&#x5E38;&#x6302;&#x8F7D;&#x8BE5; mydata &#x5377;&#xFF0C;&#x7136;&#x540E; docker cp &#x8FDB;&#x53BB;"></a>&#x6B63;&#x5E38;&#x6302;&#x8F7D;&#x8BE5; <code>mydata</code> &#x5377;&#xFF0C;&#x7136;&#x540E; <code>docker cp</code> &#x8FDB;&#x53BB; <a href="#zheng-chang-gua-zai-gai-mydata-juan-ran-hou-docker-cp-jin-qu" class="header-anchor">#</a></h4><p>&#x8FD9;&#x662F;&#x4E2A;&#x5F88;&#x50BB;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x4E0D;&#x8FC7;&#x5982;&#x679C;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5E76;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E; <code>hello.txt</code> &#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name web -v mydata:/data nginx</span><br><span class="line">$ docker cp ./hello.txt web:/data/</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x662F;&#x5148;&#x8BA9;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#xFF0C;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x518D;&#x628A;&#x6240;&#x9700;&#x6570;&#x636E;&#x5BFC;&#x5165;&#x5377;&#x91CC;&#x9762;&#x53BB;&#x3002;&#x4EE5;&#x540E;&#x5BB9;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>/data/hello.txt</code> &#x6587;&#x4EF6;&#x4E86;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x5BB9;&#x5668;&#x662F;&#x4E25;&#x91CD;&#x4F9D;&#x8D56;&#x4E8E;&#x8FD9;&#x4E2A; <code>hello.txt</code> &#x6587;&#x4EF6;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x5C31;&#x4F1A;&#x51FA;&#x95EE;&#x9898;&#x3002;&#x5BB9;&#x5668;&#x4F1A;&#x56E0;&#x4E3A; <code>hello.txt</code> &#x6587;&#x4EF6;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x800C;&#x62A5;&#x9519;&#x9000;&#x51FA;&#xFF0C;&#x5BFC;&#x81F4;&#x6839;&#x672C;&#x6CA1;&#x6709; <code>docker cp</code> &#x7684;&#x673A;&#x4F1A;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D8;&#x901A;&#x4E00;&#x4E0B;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm \</span><br><span class="line">    -v <span class="variable">$PWD</span>:/<span class="built_in">source</span> \</span><br><span class="line">    -v mydata:/data \</span><br><span class="line">    busybox \</span><br><span class="line">    cp /<span class="built_in">source</span>/hello.txt /data/</span><br><span class="line">$ docker run -d --name web -v mydata:/data nginx</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5148;&#x542F;&#x52A8;&#x4E86;&#x4E00;&#x4E2A; <code>busybox</code> &#x5BB9;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x6302;&#x8F7D;&#x8981;&#x590D;&#x5236;&#x7684;&#x6E90;&#x4EE5;&#x53CA;&#x76EE;&#x6807;&#x7684; <code>mydata</code> &#x5377;&#xFF0C;&#x7136;&#x540E;&#x7528; <code>cp</code> &#x547D;&#x4EE4;&#x5C06; <code>hello.txt</code> &#x590D;&#x5236;&#x5230; <code>mydata</code> &#x4E2D;&#x53BB;&#x3002;&#x6570;&#x636E;&#x5BFC;&#x5165;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6B63;&#x5F0F;&#x6302;&#x8F7D; <code>mydata</code> &#x5377;&#x5230;&#x6B63;&#x5F0F;&#x7684;&#x5BB9;&#x5668;&#x4E0A;&#x5E76;&#x542F;&#x52A8;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4E25;&#x91CD;&#x4F9D;&#x8D56; <code>/data/hello.txt</code> &#x7684;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x987A;&#x5229;&#x8FD0;&#x884C;&#x4E86;&#x3002;</p>
<h4 id="zhuan-men-zhi-zuo-chu-shi-hua-jing-xiang"><a href="#&#x4E13;&#x95E8;&#x5236;&#x4F5C;&#x521D;&#x59CB;&#x5316;&#x955C;&#x50CF;" class="headerlink" title="&#x4E13;&#x95E8;&#x5236;&#x4F5C;&#x521D;&#x59CB;&#x5316;&#x955C;&#x50CF;"></a>&#x4E13;&#x95E8;&#x5236;&#x4F5C;&#x521D;&#x59CB;&#x5316;&#x955C;&#x50CF; <a href="#zhuan-men-zhi-zuo-chu-shi-hua-jing-xiang" class="header-anchor">#</a></h4><p>&#x624B;&#x52A8;&#x7684;&#x53BB;&#x6267;&#x884C; <code>docker cp</code>&#xFF0C;&#x6216;&#x8005; <code>docker run ... cp ...</code> &#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x6B63;&#x89C4;&#x3002;&#x53EF;&#x4EE5;&#x5199;&#x4E2A;&#x811A;&#x672C;&#x8BA9;&#x4E00;&#x5207;&#x90FD;&#x6807;&#x51C6;&#x5316;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x9664;&#x4E86;&#x6D41;&#x7A0B;&#x5916;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x5F53;&#x524D;&#x73AF;&#x5883;&#x4E2D;&#x7684;&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x7684;&#x7248;&#x672C;&#x5FC5;&#x987B;&#x662F;&#x6240;&#x671F;&#x671B;&#x7684;&#xFF0C;&#x5426;&#x5219;&#x521D;&#x59CB;&#x5316;&#x4E86;&#x9519;&#x8BEF;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x4F1A;&#x8BA9;&#x8FD0;&#x884C;&#x65F6;&#x72B6;&#x6001;&#x8FBE;&#x4E0D;&#x5230;&#x9884;&#x671F;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x529E;&#x6CD5;&#x662F;&#x4E13;&#x95E8;&#x5236;&#x4F5C;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x5316;&#x5377;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x505A;&#x6CD5;&#x4E5F;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#x5728; CI/CD &#x6D41;&#x7A0B;&#x4E2D;&#x5BF9;&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x786E;&#x8BA4;&#x3002;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> busybox</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> hello.txt /<span class="built_in">source</span>/</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /data</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;cp&quot;</span>, <span class="string">&quot;/source/hello.txt&quot;</span>, <span class="string">&quot;/data/&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x7684;&#x955C;&#x50CF;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x751F;&#x5B58;&#x76EE;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x6302;&#x8F7D; <code>mydata</code> &#x5377;&#xFF0C;&#x5E76;&#x4E14;&#x628A;&#x6570;&#x636E;&#x5BFC;&#x5165;&#x8FDB;&#x53BB;&#x3002;&#x5047;&#x8BBE;&#x6784;&#x5EFA;&#x597D;&#x7684;&#x955C;&#x50CF;&#x540D;&#x4E3A; <code>volume-prepare</code>&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x5BFC;&#x5165;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm -v mydata:/data volume-prepare</span><br></pre></td></tr></table></figure>
<h4 id="zai-jing-xiang-de-dockerfile-zhi-zuo-zhong-jia-ru-chu-shi-hua-bu-fen"><a href="#&#x5728;&#x955C;&#x50CF;&#x7684;-Dockerfile-&#x5236;&#x4F5C;&#x4E2D;&#xFF0C;&#x52A0;&#x5165;&#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206;" class="headerlink" title="&#x5728;&#x955C;&#x50CF;&#x7684; Dockerfile &#x5236;&#x4F5C;&#x4E2D;&#xFF0C;&#x52A0;&#x5165;&#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206;"></a>&#x5728;&#x955C;&#x50CF;&#x7684; <code>Dockerfile</code> &#x5236;&#x4F5C;&#x4E2D;&#xFF0C;&#x52A0;&#x5165;&#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206; <a href="#zai-jing-xiang-de-dockerfile-zhi-zuo-zhong-jia-ru-chu-shi-hua-bu-fen" class="header-anchor">#</a></h4><p>&#x5728;&#x4E4B;&#x524D;&#x7684;&#x95EE;&#x7B54;&#x4E2D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4E86;&#x89E3;&#x5230;&#xFF0C;&#x5B98;&#x65B9;&#x955C;&#x50CF; <code>mysql</code> &#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>Dockerfile</code> &#x6765;&#x6DFB;&#x52A0;&#x521D;&#x59CB;&#x5316;&#x811A;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x7B2C;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x786E;&#x5B9E;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5219;&#x6267;&#x884C;&#x5B9A;&#x5236;&#x7684;&#x521D;&#x59CB;&#x5316;&#x811A;&#x672C;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5C06; <code>hello.txt</code> &#x5728;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x5165;&#x5230; <code>mydata</code> &#x5377;&#x4E2D;&#x53BB;&#x3002;</p>
<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5199;&#x4E00;&#x4E2A;&#x8FDB;&#x5165;&#x70B9;&#x7684;&#x811A;&#x672C;&#xFF0C;&#x7528;&#x4EE5;&#x786E;&#x4FDD;&#x5728;&#x5BB9;&#x5668;&#x6267;&#x884C;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x8FD0;&#x884C;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x5C06;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x6570;&#x636E;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5E76;&#x4E14;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># entrypoint.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="string">&quot;/data/hello.txt&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    cp /<span class="built_in">source</span>/hello.txt /data/</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x540D;&#x4E3A; <code>entrypoint.sh</code> &#x7684;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5224;&#x65AD;&#x4E00;&#x4E0B; <code>/data/hello.txt</code> &#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x5C31;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x3002;&#x521D;&#x59CB;&#x5316;&#x884C;&#x4E3A;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C06;&#x5B9E;&#x73B0;&#x51C6;&#x5907;&#x597D;&#x7684; <code>/source/hello.txt</code> &#x590D;&#x5236;&#x5230; <code>/data/</code> &#x76EE;&#x5F55;&#x4E2D;&#x53BB;&#xFF0C;&#x4EE5;&#x5B8C;&#x6210;&#x521D;&#x59CB;&#x5316;&#x3002;&#x7A0B;&#x5E8F;&#x7684;&#x6700;&#x540E;&#xFF0C;&#x5C06;&#x6267;&#x884C;&#x9001;&#x5165;&#x7684;&#x547D;&#x4EE4;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5199; <code>Dockerfile</code>&#xFF1A;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> hello.txt /<span class="built_in">source</span>/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> entrypoint.sh /</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /data</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;/entrypoint.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;nginx&quot;</span>, <span class="string">&quot;-g&quot;</span>, <span class="string">&quot;daemon off;&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p>&#x5F53;&#x6211;&#x4EEC;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x3001;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0; <code>/data</code> &#x76EE;&#x5F55;&#x4E0B;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86; <code>hello.txt</code> &#x6587;&#x4EF6;&#x4E86;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;&#x4E86;&#x3002;</p>
<h3 id="wei-shi-me-shuo-shu-ju-ku-bu-gua-he-fang-zai-docker-rong-qi-li-yun-xing"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x9002;&#x5408;&#x653E;&#x5728;-Docker-&#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x9002;&#x5408;&#x653E;&#x5728; Docker &#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x9002;&#x5408;&#x653E;&#x5728; Docker &#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C;&#xFF1F; <a href="#wei-shi-me-shuo-shu-ju-ku-bu-gua-he-fang-zai-docker-rong-qi-li-yun-xing" class="header-anchor">#</a></h3><p>&#x4E0D;&#x4E3A;&#x4EC0;&#x4E48;&#xFF0C;<strong>&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x8BF4;&#x6CD5;&#x4E0D;&#x5BF9;</strong>&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x8BA4;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x5FC5;&#x987B;&#x653E;&#x5230;&#x5BB9;&#x5668;&#x5916;&#x8FD0;&#x884C;&#x7684;&#x4EBA;&#x6839;&#x672C;&#x4E0D;&#x77E5;&#x9053; <code>Docker Volume</code> &#x4E3A;&#x4F55;&#x7269;&#x3002;</p>
<p>&#x5728;&#x65E9;&#x5E74; Docker &#x6CA1;&#x6709; <code>Docker Volume</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x662F;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x5DF2;&#x7ECF;&#x5F88;&#x591A;&#x5E74;&#x8FC7;&#x53BB;&#x4E86;&#x3002;&#x73B0;&#x5728;&#x6709; <code>Docker Volume</code> &#x89E3;&#x51B3;&#x6301;&#x4E45;&#x5316;&#x95EE;&#x9898;&#xFF0C;&#x4ECE;&#x672C;&#x5730;&#x76EE;&#x5F55;&#x7ED1;&#x5B9A;&#x3001;&#x53D7;&#x63A7;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3001;&#x5757;&#x8BBE;&#x5907;&#x3001;&#x7F51;&#x7EDC;&#x5B58;&#x50A8;&#x5230;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#xFF0C;<code>Docker Volume</code> &#x90FD;&#x652F;&#x6301;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x6570;&#x636E;&#x8BFB;&#x5199;&#x7C7B;&#x7684;&#x670D;&#x52A1;&#x4E0D;&#x9002;&#x4E8E;&#x8FD0;&#x884C;&#x4E8E;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x8BF4;&#x6CD5;&#x3002;</p>
<p>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;&#x662F;&#x76F4;&#x63A5;&#x5411;&#x5BBF;&#x4E3B;&#x5199;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x6027;&#x80FD;&#x635F;&#x8017;&#x3002;&#x800C;&#x4E14;&#x5377;&#x7684;&#x751F;&#x5B58;&#x5468;&#x671F;&#x72EC;&#x7ACB;&#x4E8E;&#x5BB9;&#x5668;&#xFF0C;&#x5BB9;&#x5668;&#x6D88;&#x4EA1;&#x5377;&#x4E0D;&#x6D88;&#x4EA1;&#xFF0C;&#x91CD;&#x65B0;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x6302;&#x8F7D;&#x6307;&#x5B9A;&#x547D;&#x540D;&#x5377;&#xFF0C;&#x6570;&#x636E;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#xFF0C;&#x4E5F;&#x4E0D;&#x5B58;&#x5728;&#x65E0;&#x6CD5;&#x6301;&#x4E45;&#x5316;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5EFA;&#x8BAE;&#x53BB;&#x9605;&#x8BFB;&#x4E00;&#x4E0B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;</p>
<ul>
<li><a href="https://docs.docker.com/engine/tutorials/dockervolumes/" target="_blank" rel="noopener">https://docs.docker.com/engine/tutorials/dockervolumes/</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/volume_create/</a></li>
<li><a href="https://docs.docker.com/engine/extend/legacy_plugins/#/volume-plugins" target="_blank" rel="noopener">https://docs.docker.com/engine/extend/legacy_plugins/#/volume-plugins</a></li>
</ul>
<h3 id="ru-he-lie-chu-rong-qi-he-suo-shi-yong-de-juan-de-guan-xi"><a href="#&#x5982;&#x4F55;&#x5217;&#x51FA;&#x5BB9;&#x5668;&#x548C;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x5377;&#x7684;&#x5173;&#x7CFB;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5217;&#x51FA;&#x5BB9;&#x5668;&#x548C;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x5377;&#x7684;&#x5173;&#x7CFB;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5217;&#x51FA;&#x5BB9;&#x5668;&#x548C;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x5377;&#x7684;&#x5173;&#x7CFB;&#xFF1F; <a href="#ru-he-lie-chu-rong-qi-he-suo-shi-yong-de-juan-de-guan-xi" class="header-anchor">#</a></h3><p>&#x8981;&#x611F;&#x8C22;&#x5F3A;&#x5927;&#x7684; <code>Go Template</code>&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x663E;&#x793A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format <span class="string">&apos;{{.Name}} =&gt; {{with .Mounts}}{{range .}}</span></span><br><span class="line"><span class="string">    {{.Name}},{{end}}{{end}}&apos;</span> $(docker ps -aq)</span><br></pre></td></tr></table></figure>
<p><em>&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684;&#x6362;&#x884C;&#x548C;&#x7A7A;&#x683C;&#x662F;&#x6709;&#x610F;&#x5982;&#x6B64;&#x7684;</em>&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x518D;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x63A7;&#x5236;&#x7F29;&#x8FDB;&#x683C;&#x5F0F;&#x3002;&#x5176;&#x7ED3;&#x679C;&#x5C06;&#x662F;&#x5982;&#x4E0B;&#x5F62;&#x5F0F;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect --format <span class="string">&apos;{{.Name}} =&gt; {{with .Mounts}}{{range .}}</span></span><br><span class="line"><span class="string">    {{.Name}}{{end}}{{end}}&apos;</span> $(docker ps -aq)</span><br><span class="line">/device_api_1 =&gt;</span><br><span class="line">/device_dashboard-debug_1 =&gt;</span><br><span class="line">/device_redis_1 =&gt;</span><br><span class="line">    device_redis-data</span><br><span class="line">/device_mongo_1 =&gt;</span><br><span class="line">    device_mongo-data</span><br><span class="line">    61453e46c3409f42e938324d7feffc6aeb6b7ce16d2080566e3b128c910c9570</span><br><span class="line">/prometheus_prometheus_1 =&gt;</span><br><span class="line">    fc0185ed3fc637295de810efaff7333e8ff2f6050d7f9368a22e19fb2c1e3c3f</span><br></pre></td></tr></table></figure>
<h2 id="jing-xiang-wen-ti-17"><a href="#&#x955C;&#x50CF;&#x95EE;&#x9898;-17" class="headerlink" title="&#x955C;&#x50CF;&#x95EE;&#x9898; (17)"></a>&#x955C;&#x50CF;&#x95EE;&#x9898; <code>(17)</code> <a href="#jing-xiang-wen-ti-17" class="header-anchor">#</a></h2><h3 id="docker-pull-xia-lai-de-jing-xiang-wen-jian-du-zai-na"><a href="#docker-pull-&#x4E0B;&#x6765;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x90FD;&#x5728;&#x54EA;&#xFF1F;" class="headerlink" title="docker pull &#x4E0B;&#x6765;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x90FD;&#x5728;&#x54EA;&#xFF1F;"></a><code>docker pull</code> &#x4E0B;&#x6765;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x90FD;&#x5728;&#x54EA;&#xFF1F; <a href="#docker-pull-xia-lai-de-jing-xiang-wen-jian-du-zai-na" class="header-anchor">#</a></h3><blockquote>
<p>&#x521D;&#x5B66; Docker &#x8981;&#x53CD;&#x590D;&#x544A;&#x8BEB;&#x81EA;&#x5DF1;&#xFF0C;<strong>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;</strong>&#x3002;</p>
</blockquote>
<p>Docker&#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#xFF0C;Docker &#x955C;&#x50CF;&#x4E5F;&#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#x7684; ISO &#x6587;&#x4EF6;&#x3002;Docker &#x7684;&#x955C;&#x50CF;&#x662F;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x90FD;&#x662F;&#x7531;&#x5F88;&#x591A;&#x5C42;&#xFF0C;&#x5F88;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x7EC4;&#x6210;&#x3002;&#x800C;&#x4E0D;&#x540C;&#x7684;&#x955C;&#x50CF;&#x662F;&#x5171;&#x4EAB;&#x76F8;&#x540C;&#x7684;&#x5C42;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x5177;&#x4F53;&#x54EA;&#x4E2A;&#x6587;&#x4EF6;&#x662F; <code>pull</code> &#x4E0B;&#x6765;&#x7684;&#x955C;&#x50CF;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x955C;&#x50CF;&#x4FDD;&#x5B58;&#x4F4D;&#x7F6E;&#x53D6;&#x51B3;&#x4E8E;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E00;&#x822C;<code>Linux</code>&#x7CFB;&#x7EDF;&#x4E0B;&#xFF0C;&#x5728; <code>/var/lib/docker</code> &#x91CC;&#x3002;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528; <code>Union FS</code> &#x7684;&#x7CFB;&#x7EDF;(<code>Ubuntu</code>)&#xFF0C;&#x5982; <code>aufs</code>, <code>overlay2</code> &#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728; <code>/var/lib/docker/{aufs,overlay2}</code> &#x4E0B;&#x770B;&#x5230;&#x627E;&#x5230;&#x5404;&#x4E2A;&#x955C;&#x50CF;&#x7684;&#x5C42;&#x3001;&#x5BB9;&#x5668;&#x7684;&#x5C42;&#xFF0C;&#x4EE5;&#x53CA;&#x5176;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;<code>CentOS</code>&#x8FD9;&#x7C7B;&#x6CA1;&#x6709;<code>Union FS</code>&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;&#x5982;<code>devicemapper</code>&#x8FD9;&#x7C7B;&#x4E1C;&#x897F;&#x7684;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x529F;&#x80FD;(&#x5982;<code>snapshot</code>)&#x6A21;&#x62DF;&#xFF0C;&#x955C;&#x50CF;&#x4F1A;&#x5B58;&#x50A8;&#x4E8E;&#x5757;&#x8BBE;&#x5907;&#x91CC;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x6CD5;&#x770B;&#x5230;&#x5177;&#x4F53;&#x6BCF;&#x5C42;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x6BCF;&#x5C42;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>CentOS/RHEL</code> &#x4F7F;&#x7528; <code>lvm-loop</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x672C;&#x5730;&#x7A00;&#x758F;&#x6587;&#x4EF6;&#x6A21;&#x62DF;&#x5757;&#x8BBE;&#x5907;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4F1A;&#x4F4D;&#x4E8E; <code>/var/lib/docker/devicemapper/devicemapper/data</code> &#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x662F;&#x975E;&#x5E38;&#x4E0D;&#x63A8;&#x8350;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5F88;&#x5927;&#xFF0C;&#x90A3;&#x5C31;&#x8BF4;&#x660E;&#x4F60;&#x5728;&#x7528; <code>devicemapper + loop</code> &#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x53BB;&#x53C2;&#x7167;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x6362; <code>direct-lvm</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5206;&#x914D;&#x771F;&#x6B63;&#x7684;&#x5757;&#x8BBE;&#x5907;&#x7ED9; <code>devicemapper</code> &#x53BB;&#x7528;&#x3002;</p>
<h3 id="docker-images-ming-ling-xian-shi-de-jing-xiang-zhan-liao-hao-da-de-kong-jian-zen-me-ban-mei-ci-du-shi-xia-zai-zhe-me-da-de-jing-xiang"><a href="#docker-images-&#x547D;&#x4EE4;&#x663E;&#x793A;&#x7684;&#x955C;&#x50CF;&#x5360;&#x4E86;&#x597D;&#x5927;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x4E0B;&#x8F7D;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x955C;&#x50CF;&#xFF1F;" class="headerlink" title="docker images &#x547D;&#x4EE4;&#x663E;&#x793A;&#x7684;&#x955C;&#x50CF;&#x5360;&#x4E86;&#x597D;&#x5927;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x4E0B;&#x8F7D;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x955C;&#x50CF;&#xFF1F;"></a><code>docker images</code> &#x547D;&#x4EE4;&#x663E;&#x793A;&#x7684;&#x955C;&#x50CF;&#x5360;&#x4E86;&#x597D;&#x5927;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x4E0B;&#x8F7D;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x955C;&#x50CF;&#xFF1F; <a href="#docker-images-ming-ling-xian-shi-de-jing-xiang-zhan-liao-hao-da-de-kong-jian-zen-me-ban-mei-ci-du-shi-xia-zai-zhe-me-da-de-jing-xiang" class="header-anchor">#</a></h3><p>&#x8FD9;&#x4E2A;&#x663E;&#x793A;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x8BA1;&#x7B97;&#x540E;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x8981;&#x77E5;&#x9053; docker image &#x662F;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#x7684;&#xFF0C;&#x5728;<code>1.10</code>&#x4E4B;&#x524D;&#xFF0C;&#x4E0D;&#x540C;&#x955C;&#x50CF;&#x65E0;&#x6CD5;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x5C42;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x4E0A;&#x786E;&#x5B9E;&#x662F;&#x4E0B;&#x8F7D;&#x5927;&#x5C0F;&#x3002;&#x4F46;&#x662F;&#x4ECE;<code>1.10</code>&#x4E4B;&#x540E;&#xFF0C;&#x5DF2;&#x6709;&#x7684;&#x5C42;&#xFF08;&#x901A;&#x8FC7;<code>SHA256</code>&#x6765;&#x5224;&#x65AD;&#xFF09;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x4E0B;&#x8F7D;&#x3002;&#x53EA;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x53D8;&#x5316;&#x7684;&#x5C42;&#x3002;&#x6240;&#x4EE5;&#x5B9E;&#x9645;&#x4E0B;&#x8F7D;&#x5927;&#x5C0F;&#x6BD4;&#x8FD9;&#x4E2A;&#x6570;&#x503C;&#x8981;&#x5C0F;&#x3002;&#x800C;&#x4E14;&#x672C;&#x5730;&#x786C;&#x76D8;&#x7A7A;&#x95F4;&#x5360;&#x7528;&#xFF0C;&#x4E5F;&#x6BD4;<code>docker images</code>&#x5217;&#x51FA;&#x6765;&#x7684;&#x4E1C;&#x897F;&#x52A0;&#x8D77;&#x6765;&#x5C0F;&#x5F88;&#x591A;&#xFF0C;&#x5F88;&#x591A;&#x91CD;&#x590D;&#x7684;&#x90E8;&#x5206;&#x5171;&#x4EAB;&#x4E86;&#x3002;</p>
<h3 id="docker-images-a-hou-xian-shi-liao-hao-duo-none-de-jing-xiang-du-shi-shi-me-ya-neng-shan-me"><a href="#docker-images-a-&#x540E;&#x663E;&#x793A;&#x4E86;&#x597D;&#x591A;-lt-none-gt-&#x7684;&#x955C;&#x50CF;&#xFF1F;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x5440;&#xFF1F;&#x80FD;&#x5220;&#x4E48;&#xFF1F;" class="headerlink" title="docker images -a &#x540E;&#x663E;&#x793A;&#x4E86;&#x597D;&#x591A; &lt;none&gt; &#x7684;&#x955C;&#x50CF;&#xFF1F;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x5440;&#xFF1F;&#x80FD;&#x5220;&#x4E48;&#xFF1F;"></a><code>docker images -a</code> &#x540E;&#x663E;&#x793A;&#x4E86;&#x597D;&#x591A; <code>&lt;none&gt;</code> &#x7684;&#x955C;&#x50CF;&#xFF1F;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x5440;&#xFF1F;&#x80FD;&#x5220;&#x4E48;&#xFF1F; <a href="#docker-images-a-hou-xian-shi-liao-hao-duo-none-de-jing-xiang-du-shi-shi-me-ya-neng-shan-me" class="header-anchor">#</a></h3><p>&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;<code>&lt;none&gt;</code> &#x5C31;&#x662F;&#x8BF4;&#x8BE5;&#x955C;&#x50CF;&#x6CA1;&#x6709;&#x6253;&#x6807;&#x7B7E;&#x3002;&#x800C;&#x6CA1;&#x6709;&#x6253;&#x6807;&#x7B7E;&#x955C;&#x50CF;&#x4E00;&#x822C;&#x5206;&#x4E3A;&#x4E24;&#x7C7B;&#xFF0C;&#x4E00;&#x7C7B;&#x662F;<strong>&#x4F9D;&#x8D56;&#x955C;&#x50CF;</strong>&#xFF0C;&#x4E00;&#x7C7B;&#x662F;<strong>&#x4E22;&#x4E86;&#x6807;&#x7B7E;&#x7684;&#x955C;&#x50CF;</strong>&#x3002;</p>
<h4 id="yi-lai-jing-xiang"><a href="#&#x4F9D;&#x8D56;&#x955C;&#x50CF;" class="headerlink" title="&#x4F9D;&#x8D56;&#x955C;&#x50CF;"></a>&#x4F9D;&#x8D56;&#x955C;&#x50CF; <a href="#yi-lai-jing-xiang" class="header-anchor">#</a></h4><p>Docker&#x7684;&#x955C;&#x50CF;&#x3001;&#x5BB9;&#x5668;&#x7684;&#x5B58;&#x50A8;&#x5C42;&#x662F;Union FS&#xFF0C;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#x7ED3;&#x6784;&#x3002;&#x6240;&#x4EE5;&#x4EFB;&#x4F55;&#x955C;&#x50CF;&#x9664;&#x4E86;&#x6700;&#x4E0A;&#x9762;&#x4E00;&#x5C42;&#x6253;&#x4E0A;&#x6807;&#x7B7E;(tag)&#x5916;&#xFF0C;&#x5176;&#x5B83;&#x4E0B;&#x9762;&#x4F9D;&#x8D56;&#x7684;&#x4E00;&#x5C42;&#x5C42;&#x5B58;&#x50A8;&#x4E5F;&#x662F;&#x5B58;&#x5728;&#x7684;&#x3002;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x6CA1;&#x6709;&#x6253;&#x4E0A;&#x4EFB;&#x4F55;&#x6807;&#x7B7E;&#xFF0C;&#x6240;&#x4EE5;&#x5728; <code>docker images -a</code> &#x7684;&#x65F6;&#x5019;&#x4F1A;&#x4EE5; <code>&lt;none&gt;</code> &#x7684;&#x5F62;&#x5F0F;&#x663E;&#x793A;&#x3002;&#x6CE8;&#x610F;&#x89C2;&#x5BDF;&#x4E00;&#x4E0B; <code>docker pull</code> &#x7684;&#x6BCF;&#x4E00;&#x5C42;&#x7684;<code>sha256</code>&#x7684;&#x6821;&#x9A8C;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x6BD4;&#x4E00;&#x4E0B; <code>&lt;none&gt;</code> &#x4E2D;&#x7684;&#x76F8;&#x540C;&#x6821;&#x9A8C;&#x503C;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5B83;&#x4EEC;&#x5C31;&#x662F;&#x4F9D;&#x8D56;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;<strong>&#x4E0D;&#x5E94;&#x5F53;&#x88AB;&#x5220;&#x9664;</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x6807;&#x7B7E;&#x955C;&#x50CF;&#x5728;&#x4F9D;&#x8D56;&#x5B83;&#x4EEC;&#x3002;</p>
<h4 id="diu-liao-biao-qian-de-jing-xiang"><a href="#&#x4E22;&#x4E86;&#x6807;&#x7B7E;&#x7684;&#x955C;&#x50CF;" class="headerlink" title="&#x4E22;&#x4E86;&#x6807;&#x7B7E;&#x7684;&#x955C;&#x50CF;"></a>&#x4E22;&#x4E86;&#x6807;&#x7B7E;&#x7684;&#x955C;&#x50CF; <a href="#diu-liao-biao-qian-de-jing-xiang" class="header-anchor">#</a></h4><p>&#x8FD9;&#x7C7B;&#x955C;&#x50CF;&#x53EF;&#x80FD;&#x672C;&#x6765;&#x6709;&#x6807;&#x7B7E;&#xFF0C;&#x540E;&#x6765;&#x4E22;&#x4E86;&#x3002;&#x539F;&#x56E0;&#x53EF;&#x80FD;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li><code>docker pull</code> &#x4E86;&#x4E00;&#x4E2A;&#x540C;&#x6837;&#x6807;&#x7B7E;&#x4F46;&#x662F;&#x65B0;&#x7248;&#x672C;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x4E8E;&#x662F;&#x8BE5;&#x6807;&#x7B7E;&#x4ECE;&#x65E7;&#x7248;&#x672C;&#x7684;&#x955C;&#x50CF;&#x8F6C;&#x79FB;&#x5230;&#x4E86;&#x65B0;&#x7248;&#x672C;&#x955C;&#x50CF;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x65E7;&#x7248;&#x672C;&#x7684;&#x955C;&#x50CF;&#x4E0A;&#x7684;&#x6807;&#x7B7E;&#x5C31;&#x4E22;&#x4E86;&#xFF1B;</li>
<li><code>docker build</code> &#x65F6;&#x6307;&#x5B9A;&#x7684;&#x6807;&#x7B7E;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x65B0;&#x6784;&#x5EFA;&#x7684;&#x955C;&#x50CF;&#x62E5;&#x6709;&#x8BE5;&#x6807;&#x7B7E;&#xFF0C;&#x800C;&#x4E4B;&#x524D;&#x6784;&#x5EFA;&#x7684;&#x955C;&#x50CF;&#x5C31;&#x4E22;&#x5931;&#x4E86;&#x6807;&#x7B7E;&#x3002;</li>
</ul>
<p>&#x8FD9;&#x7C7B;&#x955C;&#x50CF;&#x88AB;&#x79F0;&#x4E3A; <code>dangling</code> - &#x865A;&#x60AC;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x53EF;&#x4EE5;&#x5220;&#x9664;&#xFF0C;&#x624B;&#x52A8;&#x5220;&#x9664; dangling &#x955C;&#x50CF;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image prune</span><br></pre></td></tr></table></figure>
<p>&#x5BF9;&#x4E8E; 1.13 &#x4EE5;&#x524D;&#x7684;&#x8001;&#x7248;&#x672C;&#xFF0C;&#x4F7F;&#x7528; <code>dangling=true</code> &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;&#x5373;&#x53EF;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#xFF1A;<code>docker rmi $(docker images -aq -f &quot;dangling=true&quot;)</code></p>
<p>&#x5BF9;&#x4E8E;&#x9891;&#x7E41;&#x6784;&#x5EFA;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x6BD4;&#x5982; Jenkins &#x4E4B;&#x7C7B;&#x7684;&#x73AF;&#x5883;&#x3002;&#x624B;&#x52A8;&#x6E05;&#x7406;&#x663E;&#x7136;&#x4E0D;&#x662F;&#x597D;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x5E94;&#x8BE5;&#x5B9A;&#x671F;&#x6267;&#x884C;&#x56FA;&#x5B9A;&#x811A;&#x672C;&#x6765;&#x6E05;&#x7406;&#x8FD9;&#x4E9B;&#x65E0;&#x7528;&#x7684;&#x955C;&#x50CF;&#x3002;&#x5F88;&#x5E78;&#x8FD0;&#xFF0C;Spotify &#x4E5F;&#x9762;&#x4E34;&#x4E86;&#x540C;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x6765;&#x505A;&#x8FD9;&#x4EF6;&#x4E8B;&#x60C5;&#xFF1A;<a href="https://github.com/spotify/docker-gc" target="_blank" rel="noopener">https://github.com/spotify/docker-gc</a></p>
<h3 id="wei-shi-me-docker-hub-de-jing-xiang-chi-cun-he-docker-images-bu-yi-zhi"><a href="#&#x4E3A;&#x4EC0;&#x4E48;-Docker-Hub-&#x7684;&#x955C;&#x50CF;&#x5C3A;&#x5BF8;&#x548C;-docker-images-&#x4E0D;&#x4E00;&#x81F4;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48; Docker Hub &#x7684;&#x955C;&#x50CF;&#x5C3A;&#x5BF8;&#x548C; docker images &#x4E0D;&#x4E00;&#x81F4;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48; Docker Hub &#x7684;&#x955C;&#x50CF;&#x5C3A;&#x5BF8;&#x548C; <code>docker images</code> &#x4E0D;&#x4E00;&#x81F4;&#xFF1F; <a href="#wei-shi-me-docker-hub-de-jing-xiang-chi-cun-he-docker-images-bu-yi-zhi" class="header-anchor">#</a></h3><p>Docker Hub&#x4E0A;&#x663E;&#x793A;&#x7684;&#x662F;&#x7ECF;&#x8FC7; <code>gzip</code> &#x538B;&#x7F29;&#x540E;&#x7684;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5927;&#x5C0F;&#x4E5F;&#x662F;&#x4F60;&#x5C06;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x4E5F;&#x662F; Docker Hub &#x7528;&#x6237;&#x6700;&#x5173;&#x5FC3;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<p>&#x800C; <code>docker images</code> &#x663E;&#x793A;&#x7684;&#x662F;<code>pull</code>&#x4E0B;&#x6765;&#x5E76;&#x89E3;&#x538B;&#x7F29;&#x540E;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;<code>docker images</code>&#x7684;&#x65F6;&#x5019;&#x66F4;&#x5173;&#x5FC3;&#x7684;&#x662F;&#x672C;&#x5730;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5360;&#x7528;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x663E;&#x793A;&#x7684;&#x662F;&#x672A;&#x538B;&#x7F29;&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<h3 id="docker-commit-zen-me-yong-a"><a href="#docker-commit-&#x600E;&#x4E48;&#x7528;&#x554A;&#xFF1F;" class="headerlink" title="docker commit &#x600E;&#x4E48;&#x7528;&#x554A;&#xFF1F;"></a><code>docker commit</code> &#x600E;&#x4E48;&#x7528;&#x554A;&#xFF1F; <a href="#docker-commit-zen-me-yong-a" class="header-anchor">#</a></h3><p>&#x7B80;&#x5355;&#x7684;&#x56DE;&#x7B54;&#x5C31;&#x662F;&#xFF0C;&#x4E0D;&#x8981;&#x7528; <code>commit</code>&#xFF0C;&#x53BB;&#x5199; <code>Dockerfile</code>&#x3002;</p>
<blockquote>
<p>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#x3002;&#x8FD9;&#x53E5;&#x8BDD;&#x8981;&#x5728;&#x5B66;&#x4E60; Docker &#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53CD;&#x590D;&#x63D0;&#x9192;&#x81EA;&#x5DF1;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x8981;&#x628A;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x6982;&#x5FF5;&#x5E26;&#x8FC7;&#x6765;&#x3002;</p>
</blockquote>
<p>Docker &#x63D0;&#x4F9B;&#x4E86;&#x5F88;&#x597D;&#x7684; <code>Dockerfile</code> &#x7684;&#x673A;&#x5236;&#x6765;&#x5E2E;&#x52A9;&#x5B9A;&#x5236;&#x955C;&#x50CF;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; Shell &#x547D;&#x4EE4;&#xFF0C;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x8FD9;&#x6837;&#x5236;&#x4F5C;&#x7684;&#x955C;&#x50CF;&#x66F4;&#x52A0;&#x900F;&#x660E;&#xFF0C;&#x4E5F;&#x5BB9;&#x6613;&#x7EF4;&#x62A4;&#xFF0C;&#x5728;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x5347;&#x7EA7;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x5730;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x5B89;&#x5168;&#x7EF4;&#x62A4;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x4F7F;&#x7528; <code>docker commit</code> &#x5236;&#x4F5C;&#x7684;&#x955C;&#x50CF;&#x88AB;&#x79F0;&#x4E3A;<code>&#x9ED1;&#x7BB1;&#x955C;&#x50CF;</code>&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x91CC;&#x9762;&#x8FDB;&#x884C;&#x7684;&#x662F;&#x9ED1;&#x7BB1;&#x64CD;&#x4F5C;&#xFF0C;&#x9664;&#x672C;&#x4EBA;&#x5916;&#x65E0;&#x4EBA;&#x77E5;&#x6653;&#x3002;&#x5373;&#x4F7F;&#x8FD9;&#x4E2A;&#x5236;&#x4F5C;&#x955C;&#x50CF;&#x7684;&#x4EBA;&#xFF0C;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#x4E5F;&#x4E0D;&#x4F1A;&#x5B8C;&#x6574;&#x7684;&#x8BB0;&#x8D77;&#x91CC;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x90A3;&#x4E48;&#x5F53;&#x6709;&#x4E9B;&#x4E1C;&#x897F;&#x9700;&#x8981;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x6216;&#x8005;&#x56E0;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x66F4;&#x65B0;&#x800C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5236;&#x4F5C;&#x955C;&#x50CF;&#x65F6;&#xFF0C;&#x4F1A;&#x8BA9;&#x4E00;&#x5207;&#x53D8;&#x5F97;&#x5F02;&#x5E38;&#x56F0;&#x96BE;&#xFF0C;&#x5C31;&#x5982;&#x540C;&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8C03;&#x8BD5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x6837;&#xFF0C;&#x5931;&#x53BB;&#x4E86; Docker &#x7684;&#x4F18;&#x52BF;&#x4E86;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5176;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x662F; Union FS&#xFF0C;&#x5206;&#x5C42;&#x5F0F;&#x5B58;&#x50A8;&#xFF0C;&#x6BCF;&#x4E00;&#x6B21; <code>commit</code> &#x90FD;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E00;&#x5C42;&#xFF0C;&#x4E0A;&#x4E00;&#x5C42;&#x7684;&#x6587;&#x4EF6;&#x5E76;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A; <code>rm</code> &#x800C;&#x5220;&#x9664;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x5F53;&#x524D;&#x5C42;&#x6807;&#x8BB0;&#x4E3A;&#x5220;&#x9664;&#x800C;&#x770B;&#x4E0D;&#x5230;&#x4E86;&#x800C;&#x5DF2;&#xFF0C;&#x6BCF;&#x6B21; <code>docker pull</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90A3;&#x4E9B;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x5982;&#x5F71;&#x968F;&#x5F62;&#xFF0C;&#x6240;&#x5F97;&#x5230;&#x7684;&#x955C;&#x50CF;&#x4E5F;&#x5FC5;&#x7136;&#x81C3;&#x80BF;&#x4E0D;&#x582A;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x968F;&#x7740;&#x6587;&#x4EF6;&#x5C42;&#x6570;&#x7684;&#x589E;&#x52A0;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x955C;&#x50CF;&#x66F4;&#x81C3;&#x80BF;&#xFF0C;&#x5176;&#x8FD0;&#x884C;&#x65F6;&#x6027;&#x80FD;&#x4E5F;&#x5FC5;&#x7136;&#x4F1A;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x3002;&#x8FD9;&#x4E00;&#x5207;&#x90FD;&#x8FDD;&#x80CC;&#x4E86; Docker &#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
<p>&#x4F7F;&#x7528; <code>commit</code> &#x7684;&#x573A;&#x5408;&#x662F;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x73AF;&#x5883;&#xFF0C;&#x6BD4;&#x5982;&#x5165;&#x4FB5;&#x540E;&#x4FDD;&#x5B58;&#x73B0;&#x573A;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4E0D;&#x5E94;&#x8BE5;&#x6210;&#x4E3A;&#x5B9A;&#x5236;&#x955C;&#x50CF;&#x7684;&#x6807;&#x51C6;&#x505A;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x8BF7;&#x7528; <code>Dockerfile</code> &#x5B9A;&#x5236;&#x955C;&#x50CF;&#x3002;</p>
<h3 id="wei-shi-me-shuo-bu-yao-shi-yong-import-export-save-load-commit-lai-gou-jian-jing-xiang"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x4E0D;&#x8981;&#x4F7F;&#x7528;-import-export-save-load-commit-&#x6765;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x4E0D;&#x8981;&#x4F7F;&#x7528; import, export, save, load, commit &#x6765;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x4E0D;&#x8981;&#x4F7F;&#x7528; <code>import</code>, <code>export</code>, <code>save</code>, <code>load</code>, <code>commit</code> &#x6765;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF1F; <a href="#wei-shi-me-shuo-bu-yao-shi-yong-import-export-save-load-commit-lai-gou-jian-jing-xiang" class="header-anchor">#</a></h3><p><code>commit</code> &#x547D;&#x4EE4;&#x5728;&#x524D;&#x4E00;&#x4E2A;&#x95EE;&#x7B54;&#x5DF2;&#x7ECF;&#x8BF4;&#x8FC7;&#xFF0C;&#x8FD9;&#x662F;&#x5236;&#x4F5C;<strong>&#x9ED1;&#x7BB1;&#x955C;&#x50CF;</strong>&#xFF0C;&#x65E0;&#x6CD5;&#x7EF4;&#x62A4;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>import</code> &#x548C; <code>export</code> &#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5C06;&#x4E00;&#x4E2A;<em>&#x5BB9;&#x5668;</em>&#x6765;&#x4FDD;&#x5B58;&#x4E3A; <code>tar</code> &#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5BFC;&#x5165;&#x4E3A;<em>&#x955C;&#x50CF;</em>&#x3002;&#x8FD9;&#x6837;&#x5236;&#x4F5C;&#x7684;&#x955C;&#x50CF;&#x540C;&#x6837;&#x662F;<strong>&#x9ED1;&#x7BB1;&#x955C;&#x50CF;</strong>&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x3002;&#x800C;&#x4E14;&#x8FD9;&#x7C7B;&#x5BFC;&#x5165;&#x5BFC;&#x51FA;&#x4F1A;&#x5BFC;&#x81F4;&#x539F;&#x6709;&#x5206;&#x5C42;&#x4E22;&#x5931;&#xFF0C;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x5C42;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x4E22;&#x5931;&#x5F88;&#x591A;&#x76F8;&#x5173;&#x955C;&#x50CF;&#x5143;&#x6570;&#x636E;&#x6216;&#x8005;&#x914D;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982; <code>CMD</code> &#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#xFF0C;&#x5BFC;&#x81F4;&#x955C;&#x50CF;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x3002;</p>
<p><code>save</code> &#x548C; <code>load</code> &#x786E;&#x5B9E;&#x662F;&#x955C;&#x50CF;&#x4FDD;&#x5B58;&#x548C;&#x52A0;&#x8F7D;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x662F;&#x5728;&#x6CA1;&#x6709; <code>registry</code> &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x624B;&#x52A8;&#x628A;&#x955C;&#x50CF;&#x8003;&#x6765;&#x8003;&#x53BB;&#xFF0C;&#x8FD9;&#x662F;&#x56DE;&#x5230;&#x4E86;&#x5341;&#x591A;&#x5E74;&#x7684; U &#x76D8;&#x65F6;&#x4EE3;&#x1F62D;&#x3002;&#x8FD9;&#x540C;&#x6837;&#x662F;&#x4E0D;&#x63A8;&#x8350;&#x7684;&#xFF0C;&#x955C;&#x50CF;&#x7684;&#x53D1;&#x5E03;&#x3001;&#x66F4;&#x65B0;&#x7EF4;&#x62A4;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>registry</code>&#x3002;&#x65E0;&#x8BBA;&#x662F;&#x81EA;&#x5DF1;&#x67B6;&#x8BBE;&#x79C1;&#x6709; <code>registry</code> &#x670D;&#x52A1;&#xFF0C;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x516C;&#x6709; <code>registry</code> &#x670D;&#x52A1;&#xFF0C;&#x5982; <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>&#x3002;</p>
<h3 id="dockerfile-zen-me-xie"><a href="#Dockerfile-&#x600E;&#x4E48;&#x5199;&#xFF1F;" class="headerlink" title="Dockerfile &#x600E;&#x4E48;&#x5199;&#xFF1F;"></a><code>Dockerfile</code> &#x600E;&#x4E48;&#x5199;&#xFF1F; <a href="#dockerfile-zen-me-xie" class="header-anchor">#</a></h3><p>&#x6700;&#x76F4;&#x63A5;&#x4E5F;&#x662F;&#x6700;&#x7B80;&#x5355;&#x7684;&#x529E;&#x6CD5;&#x662F;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;</p>
<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x8BB2;&#x8FF0;&#x5177;&#x4F53; <code>Dockerfile</code> &#x7684;&#x547D;&#x4EE4;&#x8BED;&#x6CD5;&#xFF1A;<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/builder/</a></p>
<p>&#x7136;&#x540E;&#xFF0C;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x5B98;&#x65B9;&#x7684; <code>Dockerfile</code> &#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/</a></p>
<p>&#x6700;&#x540E;&#xFF0C;&#x53BB; Docker Hub &#x5B66;&#x4E60;&#x90A3;&#x4E9B;<strong><a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">&#x5B98;&#x65B9;(Official)&#x955C;&#x50CF;</a></strong> <code>Dockerfile</code> &#x548B;&#x5199;&#x7684;&#x3002;</p>
<h3 id="dockerfile-jiu-shi-shell-jiao-ben-ba-na-wo-dong-yi-xing-xing-ba-xu-yao-zhuang-de-dong-xi-du-xie-jin-qu-bu-jiu-xing-liao"><a href="#Dockerfile-&#x5C31;&#x662F;-shell-&#x811A;&#x672C;&#x5427;&#xFF1F;&#x90A3;&#x6211;&#x61C2;&#xFF0C;&#x4E00;&#x884C;&#x884C;&#x628A;&#x9700;&#x8981;&#x88C5;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x5199;&#x8FDB;&#x53BB;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x3002;" class="headerlink" title="Dockerfile &#x5C31;&#x662F; shell &#x811A;&#x672C;&#x5427;&#xFF1F;&#x90A3;&#x6211;&#x61C2;&#xFF0C;&#x4E00;&#x884C;&#x884C;&#x628A;&#x9700;&#x8981;&#x88C5;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x5199;&#x8FDB;&#x53BB;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x3002;"></a><code>Dockerfile</code> &#x5C31;&#x662F; <code>shell</code> &#x811A;&#x672C;&#x5427;&#xFF1F;&#x90A3;&#x6211;&#x61C2;&#xFF0C;&#x4E00;&#x884C;&#x884C;&#x628A;&#x9700;&#x8981;&#x88C5;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x5199;&#x8FDB;&#x53BB;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x3002; <a href="#dockerfile-jiu-shi-shell-jiao-ben-ba-na-wo-dong-yi-xing-xing-ba-xu-yao-zhuang-de-dong-xi-du-xie-jin-qu-bu-jiu-xing-liao" class="header-anchor">#</a></h3><p>&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x3002;</p>
<blockquote>
<p><code>Dockerfile</code> &#x4E0D;&#x7B49;&#x4E8E; <code>.sh</code> &#x811A;&#x672C;</p>
</blockquote>
<p><code>Dockerfile</code> &#x786E;&#x5B9E;&#x662F;&#x63CF;&#x8FF0;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86; <code>RUN</code> &#x8FD9;&#x6837;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD0;&#x884C; shell &#x547D;&#x4EE4;&#x3002;&#x4F46;&#x662F;&#x548C;&#x666E;&#x901A; shell &#x811A;&#x672C;&#x8FD8;&#x6709;&#x5F88;&#x5927;&#x7684;&#x4E0D;&#x540C;&#x3002;</p>
<p><code>Dockerfile</code> &#x63CF;&#x8FF0;&#x7684;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x955C;&#x50CF;&#x7684;&#x6BCF;&#x4E00;&#x5C42;&#x8981;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E00;&#x4E2A;<code>RUN</code>&#x662F;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x4E00;&#x5C42;&#x3002;&#x6240;&#x4EE5;&#x4E00;&#x5B9A;&#x8981;&#x7406;&#x89E3;&#x201C;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#x201D;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x4E0A;&#x4E00;&#x5C42;&#x7684;&#x4E1C;&#x897F;&#x4E0D;&#x4F1A;&#x88AB;&#x7269;&#x7406;&#x5220;&#x9664;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x4FDD;&#x7559;&#x7ED9;&#x4E0B;&#x4E00;&#x5C42;&#xFF0C;&#x4E0B;&#x4E00;&#x5C42;&#x4E2D;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5220;&#x9664;&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x53EA;&#x662F;&#x8FD9;&#x4E00;&#x5C42;&#x505A;&#x7684;&#x67D0;&#x4E2A;&#x6807;&#x8BB0;&#xFF0C;&#x8BF4;&#x8FD9;&#x4E2A;&#x8DEF;&#x5F84;&#x7684;&#x4E1C;&#x897F;&#x5220;&#x4E86;&#x3002;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x4F1A;&#x53BB;&#x4FEE;&#x6539;&#x4E0A;&#x4E00;&#x5C42;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x6BCF;&#x4E00;&#x5C42;&#x90FD;&#x662F;&#x9759;&#x6001;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x5BB9;&#x5668;&#x672C;&#x8EAB;&#x7684; <code>immutable</code> &#x7279;&#x6027;&#xFF0C;&#x8981;&#x4FDD;&#x6301;&#x81EA;&#x8EAB;&#x7684;&#x9759;&#x6001;&#x7279;&#x6027;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x5F88;&#x591A;&#x65B0;&#x624B;&#x4F1A;&#x5E38;&#x72AF;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x628A; <code>Dockerfile</code> &#x5F53;&#x505A; shell &#x811A;&#x672C;&#x6765;&#x5199;&#x4E86;&#xFF1A;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> yum update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install gcc</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install python</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> jdk-xxxx.tar.gz /tmp</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">cd</span> xxxx &amp;&amp; install</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> xxx &amp;&amp; configure &amp;&amp; make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x662F;&#x76F8;&#x5F53;&#x9519;&#x8BEF;&#x7684;&#x3002;&#x9664;&#x4E86;&#x65E0;&#x754F;&#x7684;&#x589E;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x5C42;&#xFF0C;&#x800C;&#x4E14;&#x5F88;&#x591A;&#x8FD0;&#x884C;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x90FD;&#x88AB;&#x88C5;&#x8FDB;&#x4E86;&#x955C;&#x50CF;&#x91CC;&#xFF0C;&#x6BD4;&#x5982;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x3001;&#x66F4;&#x65B0;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x7B49;&#x7B49;&#x3002;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x4EA7;&#x751F;&#x975E;&#x5E38;&#x81C3;&#x80BF;&#x3001;&#x975E;&#x5E38;&#x591A;&#x5C42;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x589E;&#x52A0;&#x4E86;&#x6784;&#x5EFA;&#x90E8;&#x7F72;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x5F88;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002;</p>
<p>&#x6B63;&#x786E;&#x7684;&#x5199;&#x6CD5;&#x5E94;&#x8BE5;&#x662F;&#x628A;<strong>&#x540C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x7684;&#x547D;&#x4EE4;</strong>&#x653E;&#x5230;&#x4E00;&#x4E2A; <code>RUN</code> &#x4E0B;&#xFF0C;&#x591A;&#x6761;&#x547D;&#x4EE4;&#x5E94;&#x8BE5;&#x7528; <code>&amp;&amp;</code> &#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6700;&#x540E;&#x8981;&#x6253;&#x626B;&#x5E72;&#x51C0;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x73AF;&#x5883;&#x3002;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x6458;&#x81EA;&#x5B98;&#x65B9; <code>redis</code> &#x955C;&#x50CF; <code>Dockerfile</code> &#x7684;&#x90E8;&#x5206;&#xFF1A;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> buildDeps=<span class="string">&apos;gcc libc6-dev make&apos;</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">set</span> -x \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get update &amp;&amp; apt-get install -y <span class="variable">$buildDeps</span> --no-install-recommends \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/* \</span></span><br><span class="line"><span class="bash">    &amp;&amp; wget -O redis.tar.gz <span class="string">&quot;<span class="variable">$REDIS_DOWNLOAD_URL</span>&quot;</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$REDIS_DOWNLOAD_SHA1</span> *redis.tar.gz&quot;</span> | sha1sum -c - \</span></span><br><span class="line"><span class="bash">    &amp;&amp; mkdir -p /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm redis.tar.gz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/redis install \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -r /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get purge -y --auto-remove <span class="variable">$buildDeps</span></span></span><br></pre></td></tr></table></figure>
<h3 id="na-wo-ba-suo-you-ming-ling-du-he-bing-dao-yi-ge-run-jiu-dui-liao-ba"><a href="#&#x90A3;&#x6211;&#x628A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A;-RUN-&#x5C31;&#x5BF9;&#x4E86;&#x5427;&#xFF1F;" class="headerlink" title="&#x90A3;&#x6211;&#x628A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A; RUN &#x5C31;&#x5BF9;&#x4E86;&#x5427;&#xFF1F;"></a>&#x90A3;&#x6211;&#x628A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A; <code>RUN</code> &#x5C31;&#x5BF9;&#x4E86;&#x5427;&#xFF1F; <a href="#na-wo-ba-suo-you-ming-ling-du-he-bing-dao-yi-ge-run-jiu-dui-liao-ba" class="header-anchor">#</a></h3><p>&#x4E0D;&#x662F;&#x628A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x5408;&#x4E3A;&#x4E00;&#x4E2A; <code>RUN</code>&#xFF0C;&#x8981;&#x5408;&#x7406;&#x5206;&#x5C42;&#xFF0C;&#x4EE5;&#x52A0;&#x5FEB;&#x6784;&#x5EFA;&#x548C;&#x90E8;&#x7F72;&#x3002;</p>
<blockquote>
<p>&#x5408;&#x7406;&#x5206;&#x5C42;&#x5C31;&#x662F;&#x5C06;&#x5177;&#x6709;<strong>&#x4E0D;&#x540C;&#x53D8;&#x66F4;&#x9891;&#x7E41;&#x7A0B;&#x5EA6;</strong>&#x7684;&#x5C42;&#xFF0C;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#xFF0C;&#x8BA9;&#x7A33;&#x5B9A;&#x7684;&#x90E8;&#x5206;&#x5728;&#x57FA;&#x7840;&#xFF0C;&#x66F4;&#x5BB9;&#x6613;&#x53D8;&#x66F4;&#x7684;&#x90E8;&#x5206;&#x5728;&#x8868;&#x5C42;&#xFF0C;&#x4F7F;&#x5F97;&#x8D44;&#x6E90;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x5229;&#x7528;&#xFF0C;&#x4EE5;&#x589E;&#x52A0;&#x6784;&#x5EFA;&#x548C;&#x90E8;&#x7F72;&#x7684;&#x901F;&#x5EA6;&#x3002;</p>
</blockquote>
<p>&#x4EE5; <a href="https://coding.net/u/twang2218/p/docker-example/git/blob/master/node/Dockerfile" target="_blank" rel="noopener"><code>node.js</code> &#x7684;&#x5E94;&#x7528;&#x793A;&#x4F8B;&#x955C;&#x50CF;</a>&#x4E3A;&#x4F8B;&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x590D;&#x5236;&#x5E94;&#x7528;&#x548C;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x5982;&#x679C;&#x90FD;&#x5408;&#x5E76;&#x4E00;&#x8D77;&#xFF0C;&#x4F1A;&#x5199;&#x6210;&#x8FD9;&#x6837;&#xFF1A;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> . /usr/src/app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span></span><br></pre></td></tr></table></figure>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5728; <code>node.js</code> &#x5E94;&#x7528;&#x955C;&#x50CF;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x5219;&#x662F;&#x8FD9;&#x4E48;&#x5199;&#x7684;&#xFF1A;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> package.json /usr/src/app/</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /usr/src/app</span></span><br></pre></td></tr></table></figure>
<p>&#x4ECE;&#x5C42;&#x6570;&#x4E0A;&#x770B;&#xFF0C;&#x786E;&#x5B9E;&#x591A;&#x4E86;&#x4E00;&#x5C42;&#x3002;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E09;&#x884C;&#x5206;&#x5F00;&#x662F;&#x6545;&#x610F;&#x8FD9;&#x6837;&#x505A;&#x7684;&#xFF0C;&#x5176;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x5408;&#x7406;&#x5206;&#x5C42;&#xFF0C;&#x5145;&#x5206;&#x5229;&#x7528; Docker &#x5206;&#x5C42;&#x5B58;&#x50A8;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x4EE5;&#x589E;&#x52A0;&#x6784;&#x5EFA;&#x3001;&#x90E8;&#x7F72;&#x7684;&#x6548;&#x7387;&#x3002;</p>
<p>&#x5728; <code>docker build</code> &#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x5C42;&#x4E4B;&#x524D;&#x6784;&#x5EFA;&#x8FC7;&#xFF0C;&#x800C;&#x4E14;&#x8BE5;&#x5C42;&#x672A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90A3;&#x4E48; <code>docker</code> &#x5C31;&#x4F1A;<strong>&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7F13;&#x5B58;</strong>&#xFF0C;&#x4E0D;&#x4F1A;&#x91CD;&#x590D;&#x6784;&#x5EFA;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5408;&#x7406;&#x5206;&#x5C42;&#xFF0C;&#x5145;&#x5206;&#x5229;&#x7528;&#x7F13;&#x5B58;&#xFF0C;&#x4F1A;&#x663E;&#x8457;&#x52A0;&#x901F;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x884C;&#x7684;&#x76EE;&#x7684;&#x662F;&#x5C06; <code>package.json</code> &#x590D;&#x5236;&#x5230;&#x5E94;&#x7528;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x76EE;&#x5F55;&#x3002;&#x8FD9;&#x6837;&#x53EA;&#x6709; <code>pakcage.json</code> &#x53D1;&#x751F;&#x6539;&#x53D8;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x89E6;&#x53D1;&#x7B2C;&#x4E8C;&#x884C; <code>RUN npm install</code>&#x3002;&#x800C;&#x53EA;&#x8981; <code>package.json</code> &#x6CA1;&#x6709;&#x53D8;&#x5316;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x7528;&#x7684;&#x4EE3;&#x7801;&#x6539;&#x53D8;&#x5C31;&#x4E0D;&#x4F1A;&#x5F15;&#x53D1; <code>npm install</code>&#xFF0C;&#x53EA;&#x4F1A;&#x5F15;&#x53D1;&#x7B2C;&#x4E09;&#x884C;&#x7684; <code>COPY . /usr/src/app</code>&#xFF0C;&#x4ECE;&#x800C;&#x52A0;&#x5FEB;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x3002;</p>
<p>&#x800C;&#x5982;&#x679C;&#x6309;&#x7167;&#x524D;&#x9762;&#x6240;&#x63D0;&#x5230;&#x7684;&#xFF0C;&#x5408;&#x5E76;&#x4E3A;&#x4E24;&#x5C42;&#xFF0C;&#x90A3;&#x4E48;&#x4EFB;&#x4F55;&#x4EE3;&#x7801;&#x6539;&#x53D8;&#xFF0C;&#x90FD;&#x4F1A;&#x89E6;&#x53D1; <code>RUN npm install</code>&#xFF0C;&#x4ECE;&#x800C;&#x6D6A;&#x8D39;&#x5927;&#x91CF;&#x7684;&#x5E26;&#x5BBD;&#x548C;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x5408;&#x7406;&#x5206;&#x5C42;&#x9664;&#x4E86;&#x53EF;&#x4EE5;&#x52A0;&#x5FEB;&#x6784;&#x5EFA;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x52A0;&#x5FEB;&#x90E8;&#x7F72;&#xFF0C;&#x8981;&#x77E5;&#x9053;&#xFF0C;<code>docker pull</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x5206;&#x5C42;&#x4E0B;&#x8F7D;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x5C42;&#x5C31;<strong>&#x4E0D;&#x4F1A;&#x91CD;&#x590D;&#x4E0B;&#x8F7D;</strong>&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x8FD9;&#x91CC;&#x7684; <code>RUN npm install</code> &#x8FD9;&#x4E00;&#x5C42;&#xFF0C;&#x5F80;&#x5F80;&#x4F1A;&#x51E0;&#x767E; MB &#x751A;&#x81F3;&#x4E0A; GB&#x3002;&#x800C;&#x5728; <code>package.json</code> &#x672A;&#x53D1;&#x751F;&#x53D8;&#x66F4;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x6709; <code>COPY . /usr/src/app</code> &#x8FD9;&#x4E00;&#x5C42;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#xFF0C;&#x5E76;&#x4E14;&#x4E5F;&#x53EA;&#x6709;&#x8FD9;&#x4E00;&#x5C42;&#x4F1A;&#x5728;&#x5404;&#x4E2A;&#x8282;&#x70B9; <code>docker pull</code> &#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#xFF0C;&#x5F80;&#x5F80;&#x8FD9;&#x4E00;&#x5C42;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x53EA;&#x6709;&#x51E0;&#x5341; MB&#xFF0C;&#x751A;&#x81F3;&#x66F4;&#x5C0F;&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x5E76;&#x884C;&#x90E8;&#x7F72;&#x4E2D;&#xFF0C;&#x6240;&#x8282;&#x7EA6;&#x7684;&#x4E1C;&#x897F;&#x5411;&#x6D41;&#x91CF;&#x662F;&#x975E;&#x5E38;&#x663E;&#x8457;&#x7684;&#x3002;&#x7279;&#x522B;&#x662F;&#x654F;&#x6377;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x4EE3;&#x7801;&#x53D8;&#x66F4;&#x7684;&#x9891;&#x7E41;&#x5EA6;&#x8981;&#x6BD4;&#x4F9D;&#x8D56;&#x53D8;&#x66F4;&#x7684;&#x9891;&#x7E41;&#x5EA6;&#x9AD8;&#x5F88;&#x591A;&#xFF0C;&#x6BCF;&#x6B21;&#x91CD;&#x590D;&#x4E0B;&#x8F7D;&#x4F9D;&#x8D56;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6D41;&#x91CF;&#x548C;&#x65F6;&#x95F4;&#x4E0A;&#x7684;&#x6D6A;&#x8D39;&#x3002;</p>
<h3 id="context-dao-di-shi-yi-ge-shi-me-gai-nian"><a href="#context-&#x5230;&#x5E95;&#x662F;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x6982;&#x5FF5;&#xFF1F;" class="headerlink" title="context &#x5230;&#x5E95;&#x662F;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x6982;&#x5FF5;&#xFF1F;"></a><code>context</code> &#x5230;&#x5E95;&#x662F;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x6982;&#x5FF5;&#xFF1F; <a href="#context-dao-di-shi-yi-ge-shi-me-gai-nian" class="header-anchor">#</a></h3><p><code>context</code>&#xFF0C;<strong>&#x4E0A;&#x4E0B;&#x6587;</strong>&#xFF0C;&#x662F; <code>docker build</code> &#x4E2D;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x6982;&#x5FF5;&#x3002;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x5FC5;&#x987B;&#x6307;&#x5B9A; <code>context</code>&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t xxx &lt;context&#x8DEF;&#x5F84;&gt;</span><br></pre></td></tr></table></figure>
<p>&#x6216;&#x8005; <code>docker-compose.yml</code> &#x4E2D;&#x7684;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">        <span class="attr">context:</span> <span class="string">&lt;context&#x8DEF;&#x5F84;&gt;</span></span><br><span class="line">        <span class="attr">dockerfile:</span> <span class="string">dockerfile</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x90FD;&#x9700;&#x8981;&#x6307;&#x5B9A; <code>context</code>&#x3002;</p>
<p><code>context</code> &#x662F;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#xFF0C;&#x4F46;&#x4E0D;&#x8981;&#x548C;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x7684;<code>Dockerfile</code> &#x4E2D;&#x7684; <code>WORKDIR</code> &#x5F04;&#x6DF7;&#xFF0C;<code>context</code> &#x662F; <code>docker build</code> &#x547D;&#x4EE4;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x3002;</p>
<p><code>docker build</code> &#x547D;&#x4EE4;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x771F;&#x6B63;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x5E76;&#x975E;&#x7531;&#x8BE5;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x5B8C;&#x6210;&#x3002;<code>docker build</code> &#x547D;&#x4EE4;&#x5C06; <code>context</code> &#x7684;&#x76EE;&#x5F55;&#x4E0A;&#x4F20;&#x7ED9; <code>Docker</code> &#x5F15;&#x64CE;&#xFF0C;&#x7531;&#x5B83;&#x8D1F;&#x8D23;&#x5236;&#x4F5C;&#x955C;&#x50CF;&#x3002;</p>
<p>&#x5728; Dockerfile &#x4E2D;&#x5982;&#x679C;&#x5199; <code>COPY ./package.json /app/</code> &#x8FD9;&#x79CD;&#x547D;&#x4EE4;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x610F;&#x601D;&#x5E76;&#x4E0D;&#x662F;&#x6307;&#x6267;&#x884C; <code>docker build</code> &#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x7684; <code>package.json</code>&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x6307; <code>Dockerfile</code> &#x6240;&#x5728;&#x76EE;&#x5F55;&#x4E0B;&#x7684; <code>package.json</code>&#xFF0C;&#x800C;&#x662F;&#x6307; <code>context</code> &#x76EE;&#x5F55;&#x4E0B;&#x7684; <code>package.json</code>&#x3002;</p>
<p>&#x8FD9;&#x5C31;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x4EBA;&#x53D1;&#x73B0; <code>COPY ../package.json /app</code> &#x6216;&#x8005; <code>COPY /opt/xxxx /app</code> &#x65E0;&#x6CD5;&#x5DE5;&#x4F5C;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x90FD;&#x5728; <code>context</code> &#x4E4B;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x771F;&#x6B63;&#x9700;&#x8981;&#xFF0C;&#x5E94;&#x8BE5;&#x5C06;&#x5B83;&#x4EEC;&#x590D;&#x5236;&#x5230; <code>context</code> &#x76EE;&#x5F55;&#x4E0B;&#x518D;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x8BDD;&#x8BF4;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x7F51;&#x6587;&#x751A;&#x81F3;&#x641E;&#x7B11;&#x7684;&#x8BF4;&#x8981;&#x628A; <code>Dockerfile</code> &#x653E;&#x5230;&#x78C1;&#x76D8;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x624D;&#x80FD;&#x6784;&#x5EFA;&#x5982;&#x4F55;&#x5982;&#x4F55;&#x3002;&#x8FD9;&#x90FD;&#x662F;&#x5BF9; <code>context</code> &#x5B8C;&#x5168;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x8868;&#x73B0;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#x628A;&#x6574;&#x4E2A;&#x78C1;&#x76D8;<strong>&#x51E0;&#x5341;&#x4E2A; GB</strong>&#x5F53;&#x505A;&#x4E0A;&#x4E0B;&#x6587;&#x53D1;&#x9001;&#x7ED9; <code>dockerd</code> &#x5F15;&#x64CE;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x1F631;&#x2026;&#x2026;</p>
<p><code>docker build -t xxx .</code> &#x4E2D;&#x7684;&#x8FD9;&#x4E2A;<code>.</code>&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x5728;&#x6307;&#x5B9A; <code>Context</code> &#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x5E76;&#x975E;&#x662F;&#x6307;&#x5B9A; <code>Dockerfile</code> &#x6240;&#x5728;&#x76EE;&#x5F55;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x989D;&#x5916;&#x6307;&#x5B9A; <code>Dockerfile</code> &#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x5C06; <code>Context</code> &#x4E0B;&#x7684;&#x540D;&#x4E3A; <code>Dockerfile</code> &#x7684;&#x6587;&#x4EF6;&#x4F5C;&#x4E3A; <code>Dockerfile</code>&#x3002;&#x6240;&#x4EE5;&#x5F88;&#x591A;&#x4EBA;&#x4F1A;&#x6DF7;&#x6DC6;&#xFF0C;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A; <code>.</code> &#x662F;&#x5728;&#x8BF4; <code>Dockerfile</code> &#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5176;&#x5B9E;&#x4E0D;&#x7136;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;<code>Dockerfile</code> &#x53EF;&#x80FD;&#x88AB;&#x653E;&#x7F6E;&#x4E8E;&#x4E24;&#x4E2A;&#x4F4D;&#x7F6E;&#x3002;</p>
<ul>
<li>&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x662F;&#x653E;&#x7F6E;&#x4E8E;&#x9879;&#x76EE;&#x9876;&#x7EA7;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x597D;&#x5904;&#x662F;&#x5728;&#x9876;&#x7EA7;&#x76EE;&#x5F55;&#x6784;&#x5EFA;&#x65F6;&#xFF0C;&#x9879;&#x76EE;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x90FD;&#x5728;&#x4E0A;&#x4E0B;&#x6587;&#x5185;&#xFF0C;&#x65B9;&#x4FBF;&#x6784;&#x5EFA;&#xFF1B;</li>
<li>&#x53E6;&#x4E00;&#x4E2A;&#x505A;&#x6CD5;&#x662F;&#xFF0C;&#x5C06;&#x6240;&#x6709; Docker &#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x96C6;&#x4E2D;&#x4E8E;&#x67D0;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x6BD4;&#x5982; <code>docker</code> &#x76EE;&#x5F55;&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x6240;&#x6709;&#x4E0D;&#x540C;&#x5206;&#x652F;&#x7684; <code>Dockerfile</code>&#xFF0C;&#x4EE5;&#x53CA; <code>docker-compose.yml</code> &#x7C7B;&#x7684;&#x6587;&#x4EF6;&#x3001;entrypoint &#x7684;&#x811A;&#x672C;&#x7B49;&#x7B49;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x4E0D;&#x518D;&#x662F; <code>Dockerfile</code> &#x6240;&#x5728;&#x76EE;&#x5F55;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x6307;&#x5B9A;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>
</ul>
<p>&#x6B64;&#x5916;&#xFF0C;&#x9879;&#x76EE;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x6784;&#x5EFA;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x53D1;&#x9001;&#x7ED9; <code>dockerd</code> &#x5F15;&#x64CE;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x5904;&#x4E8E;&#x4E0A;&#x4E0B;&#x6587;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>.dockerignore</code> &#x6587;&#x4EF6;&#x6765;&#x8FC7;&#x6EE4;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5185;&#x5BB9;&#x3002;<code>.dockerignore</code> &#x6587;&#x4EF6;&#x5E94;&#x8BE5;&#x653E;&#x7F6E;&#x4E8E;&#x4E0A;&#x4E0B;&#x6587;&#x9876;&#x7EA7;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5185;&#x5BB9;&#x683C;&#x5F0F;&#x548C; <code>.gitignore</code> &#x4E00;&#x6837;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tmp</span><br><span class="line">db</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x5C31;&#x8FC7;&#x6EE4;&#x4E86; <code>tmp</code> &#x548C; <code>db</code> &#x76EE;&#x5F55;&#xFF0C;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x88AB;&#x4F5C;&#x4E3A;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x53D1;&#x7ED9; <code>dockerd</code> &#x5F15;&#x64CE;&#x3002;</p>
<blockquote>
<p>&#x5982;&#x679C;&#x4F60;&#x53D1;&#x73B0;&#x4F60;&#x7684; <code>docker build</code> &#x9700;&#x8981;&#x53D1;&#x9001;&#x5E9E;&#x5927;&#x7684; Context &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x6765;&#x68C0;&#x67E5;&#x662F;&#x4E0D;&#x662F; <code>.dockerignore</code> &#x5FD8;&#x4E86;&#x64B0;&#x5199;&#xFF0C;&#x6216;&#x8005;&#x5FD8;&#x4E86;&#x8FC7;&#x6EE4;&#x67D0;&#x4E9B;&#x4E1C;&#x897F;&#x4E86;&#x3002;</p>
</blockquote>
<h3 id="entrypoint-he-cmd-dao-di-you-shi-me-bu-tong"><a href="#ENTRYPOINT-&#x548C;-CMD-&#x5230;&#x5E95;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x540C;&#xFF1F;" class="headerlink" title="ENTRYPOINT &#x548C; CMD &#x5230;&#x5E95;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x540C;&#xFF1F;"></a><code>ENTRYPOINT</code> &#x548C; <code>CMD</code> &#x5230;&#x5E95;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x540C;&#xFF1F; <a href="#entrypoint-he-cmd-dao-di-you-shi-me-bu-tong" class="header-anchor">#</a></h3><p><code>Dockerfile</code> &#x7684;&#x76EE;&#x7684;&#x662F;&#x5236;&#x4F5C;&#x955C;&#x50CF;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x51C6;&#x5907;&#x7684;&#x662F;&#x4E3B;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x3002;&#x90A3;&#x4E48;&#x51C6;&#x5907;&#x597D;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x624D;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x4E3B;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;&#x542F;&#x52A8;&#x7684;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x8C03;&#x7528; <code>ENTRYPOINT</code>&#xFF0C;&#x5E76;&#x4E14;&#x628A; <code>CMD</code> &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x8FDB;&#x53BB;&#x8FD0;&#x884C;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x6982;&#x5FF5;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENTRYPOINT <span class="string">&quot;CMD&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x5047;&#x8BBE;&#x6709;&#x4E2A; <code>myubuntu</code> &#x955C;&#x50CF; <code>ENTRYPOINT</code> &#x662F; <code>sh -c</code>&#xFF0C;&#x800C;&#x6211;&#x4EEC; <code>docker run -it myubuntu uname -a</code>&#x3002;&#x90A3;&#x4E48; <code>uname -a</code> &#x5C31;&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x6307;&#x5B9A;&#x7684; <code>CMD</code>&#xFF0C;&#x90A3;&#x4E48; Docker &#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x7684;&#x5C31;&#x662F;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x7684;&#x7ED3;&#x679C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;uname -a&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A; <code>ENTRYPOINT</code>&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EA;&#x6267;&#x884C; <code>CMD</code>&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86; <code>ENTRYPOINT</code> &#x800C;&#x6CA1;&#x6709;&#x6307;&#x5B9A; <code>CMD</code>&#xFF0C;&#x81EA;&#x7136;&#x6267;&#x884C; <code>ENTRYPOINT</code>;</li>
<li>&#x5982;&#x679C; <code>ENTRYPOINT</code> &#x548C; <code>CMD</code> &#x90FD;&#x6307;&#x5B9A;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5982;&#x540C;&#x4E0A;&#x9762;&#x6240;&#x8FF0;&#xFF0C;&#x6267;&#x884C; <code>ENTRYPOINT &quot;CMD&quot;</code>&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A; <code>ENTRYPOINT</code>&#xFF0C;&#x800C; <code>CMD</code> &#x7528;&#x7684;&#x662F;&#x4E0A;&#x8FF0;&#x90A3;&#x79CD; shell &#x547D;&#x4EE4;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5219;&#x81EA;&#x52A8;&#x4F7F;&#x7528; <code>sh -c</code> &#x4F5C;&#x4E3A; <code>ENTRYPOINT</code>&#x3002;</li>
</ul>
<p>&#x6CE8;&#x610F;&#x6700;&#x540E;&#x4E00;&#x70B9;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x8FD9;&#x4E2A;&#x533A;&#x522B;&#x5BFC;&#x81F4;&#x4E86;&#x540C;&#x6837;&#x7684;&#x547D;&#x4EE4;&#x653E;&#x5230; <code>CMD</code> &#x548C; <code>ENTRYPOINT</code> &#x4E0B;&#x6548;&#x679C;&#x4E0D;&#x540C;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x53EF;&#x80FD;&#x653E;&#x5728; <code>ENTRYPOINT</code> &#x4E0B;&#x7684;&#x540C;&#x6837;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x7531;&#x4E8E;&#x9700;&#x8981; <code>tty</code> &#x800C;&#x8FD0;&#x884C;&#x65F6;&#x5FD8;&#x8BB0;&#x4E86;&#x7ED9;&#xFF08;&#x6BD4;&#x5982;&#x5FD8;&#x8BB0;&#x4E86;<code>docker-compose.yml</code> &#x7684; <code>tty:true</code>&#xFF09;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x7528;&#x6CD5;&#x53EF;&#x4EE5;&#x5F88;&#x7075;&#x6D3B;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x505A;&#x4E2A; <code>git</code> &#x955C;&#x50CF;&#xFF0C;&#x53EF;&#x4EE5;&#x628A; <code>git</code> &#x547D;&#x4EE4;&#x6307;&#x5B9A;&#x4E3A; <code>ENTRYPOINT</code>&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5728; <code>docker run</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x8DDF;&#x5B50;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x3002;&#x6BD4;&#x5982; <code>docker run git log</code> &#x5C31;&#x662F;&#x663E;&#x793A;&#x65E5;&#x5FD7;&#x3002;</p>
<h3 id="na-dao-yi-ge-jing-xiang-ru-he-huo-de-jing-xiang-de-dockerfile"><a href="#&#x62FF;&#x5230;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5982;&#x4F55;&#x83B7;&#x5F97;&#x955C;&#x50CF;&#x7684;-Dockerfile-&#xFF1F;" class="headerlink" title="&#x62FF;&#x5230;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5982;&#x4F55;&#x83B7;&#x5F97;&#x955C;&#x50CF;&#x7684; Dockerfile &#xFF1F;"></a>&#x62FF;&#x5230;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5982;&#x4F55;&#x83B7;&#x5F97;&#x955C;&#x50CF;&#x7684; <code>Dockerfile</code> &#xFF1F; <a href="#na-dao-yi-ge-jing-xiang-ru-he-huo-de-jing-xiang-de-dockerfile" class="header-anchor">#</a></h3><ul>
<li>&#x76F4;&#x63A5;&#x53BB; Docker Hub &#x4E0A;&#x770B;&#xFF1A;&#x5927;&#x591A;&#x6570; Docker Hub &#x4E0A;&#x7684;&#x955C;&#x50CF;&#x90FD;&#x4F1A;&#x6709; <code>Dockerfile</code>&#xFF0C;&#x76F4;&#x63A5;&#x5728; Docker Hub &#x7684;&#x955C;&#x50CF;&#x9875;&#x9762;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230; <code>Dockerfile</code> &#x7684;&#x94FE;&#x63A5;&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x662F;&#x81EA;&#x5DF1;&#x516C;&#x53F8;&#x505A;&#x7684;&#xFF0C;&#x6700;&#x7B80;&#x5355;&#x7684;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x6253;&#x4E2A;&#x7535;&#x8BDD;&#x3001;&#x53D1;&#x4E2A;&#x6D88;&#x606F;&#x95EE;&#x4E00;&#x4E0B;&#x3002;&#x522B;&#x770B;&#x8FD9;&#x4E2A;&#x8BF4;&#x6CD5;&#x770B;&#x8D77;&#x6765;&#x5F88;&#x50BB;&#xFF0C;&#x4E0D;&#x5C11;&#x4EBA;&#x90FD;&#x5B81;&#x53EF;&#x81EA;&#x5DF1;&#x7422;&#x78E8;&#x4E5F;&#x4E0D;&#x53BB;&#x95EE;&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x6CA1;&#x6709; <code>Dockerfile</code>&#xFF0C;&#x4E00;&#x822C;&#x8FD9;&#x7C7B;&#x955C;&#x50CF;&#x5C31;&#x4E0D;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x8FD9;&#x7C7B;&#x9ED1;&#x7BB1;&#x4F3C;&#x7684;&#x955C;&#x50CF;&#x5F88;&#x5BB9;&#x6709;&#x6709;&#x95EE;&#x9898;&#x3002;&#x5982;&#x679C;&#x662F;&#x4EC0;&#x4E48;&#x7279;&#x6B8A;&#x539F;&#x56E0;&#xFF0C;&#x90A3;&#x7EE7;&#x7EED;&#x5F80;&#x4E0B;&#x770B;&#xFF1B;</li>
<li><code>docker history</code> &#x53EF;&#x4EE5;&#x770B;&#x5230;&#x955C;&#x50CF;&#x6BCF;&#x4E00;&#x5C42;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x547D;&#x4EE4;&#xFF0C;&#x5F53;&#x7136;&#x9ED1;&#x7BB1;&#x955C;&#x50CF;&#x7684; <code>commit</code> &#x770B;&#x4E0D;&#x89C1;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li><code>docker inspect</code> &#x53EF;&#x4EE5;&#x5206;&#x6790;&#x955C;&#x50CF;&#x5F88;&#x591A;&#x7EC6;&#x8282;&#x3002;</li>
<li>&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x955C;&#x50CF;&#xFF0C;&#x8FDB;&#x5165;<code>shell</code>&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#x7ED3;&#x679C;&#x53BB;&#x8FDB;&#x4E00;&#x6B65;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#x3001;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x53CA;&#x53D8;&#x5316;&#x3002;</li>
<li>&#x7ECF;&#x8FC7;&#x5206;&#x6790;&#x540E;&#xFF0C;&#x81EA;&#x5DF1;&#x5199; <code>Dockerfile</code> &#x8FD8;&#x539F;&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<h3 id="zai-ni-de-lnmp-de-li-zi-zhong-php-de-dockerfile-li-mian-de-gou-jian-yi-lai-he-yun-xing-yi-lai-du-shi-shi-me-yi-si"><a href="#&#x5728;&#x4F60;&#x7684;-LNMP-&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;PHP-&#x7684;-Dockerfile-&#x91CC;&#x9762;&#x7684;-&#x201C;&#x6784;&#x5EFA;&#x4F9D;&#x8D56;&#x201D;-&#x548C;-&#x201C;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&#x201D;-&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F;" class="headerlink" title="&#x5728;&#x4F60;&#x7684; LNMP &#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;PHP &#x7684; Dockerfile &#x91CC;&#x9762;&#x7684; &#x201C;&#x6784;&#x5EFA;&#x4F9D;&#x8D56;&#x201D; &#x548C; &#x201C;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&#x201D; &#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F;"></a>&#x5728;&#x4F60;&#x7684; LNMP &#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;PHP &#x7684; <code>Dockerfile</code> &#x91CC;&#x9762;&#x7684; &#x201C;&#x6784;&#x5EFA;&#x4F9D;&#x8D56;&#x201D; &#x548C; &#x201C;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&#x201D; &#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F; <a href="#zai-ni-de-lnmp-de-li-zi-zhong-php-de-dockerfile-li-mian-de-gou-jian-yi-lai-he-yun-xing-yi-lai-du-shi-shi-me-yi-si" class="header-anchor">#</a></h3><p>&#x8FD9;&#x91CC;&#x6240;&#x63D0;&#x5230;&#x7684;&#x662F;&#x6211;&#x7684;&#x90A3;&#x4E2A; LNMP &#x4F8B;&#x5B50;&#x7684; <code>php</code> &#x670D;&#x52A1;&#x7684; <code>Dockerfile</code>&#xFF1A;<a href="https://coding.net/u/twang2218/p/docker-lnmp/git/blob/master/php/Dockerfile" target="_blank" rel="noopener">https://coding.net/u/twang2218/p/docker-lnmp/git/blob/master/php/Dockerfile</a></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> php:<span class="number">7</span>-fpm</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -xe \</span></span><br><span class="line"><span class="bash"><span class="comment"># &quot;&#x6784;&#x5EFA;&#x4F9D;&#x8D56;&quot;</span></span></span><br><span class="line">    &amp;&amp; buildDeps=<span class="string">&quot; \</span></span><br><span class="line"><span class="string">        build-essential \</span></span><br><span class="line"><span class="string">        php5-dev \</span></span><br><span class="line"><span class="string">        libfreetype6-dev \</span></span><br><span class="line"><span class="string">        libjpeg62-turbo-dev \</span></span><br><span class="line"><span class="string">        libmcrypt-dev \</span></span><br><span class="line"><span class="string">        libpng12-dev \</span></span><br><span class="line"><span class="string">    &quot;</span> \</span><br><span class="line"><span class="comment"># &quot;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&quot;</span></span><br><span class="line">    &amp;&amp; runtimeDeps=<span class="string">&quot; \</span></span><br><span class="line"><span class="string">        libfreetype6 \</span></span><br><span class="line"><span class="string">        libjpeg62-turbo \</span></span><br><span class="line"><span class="string">        libmcrypt4 \</span></span><br><span class="line"><span class="string">        libpng12-0 \</span></span><br><span class="line"><span class="string">    &quot;</span> \</span><br><span class="line"><span class="comment"># &quot;&#x5B89;&#x88C5; php &#x4EE5;&#x53CA;&#x7F16;&#x8BD1;&#x6784;&#x5EFA;&#x7EC4;&#x4EF6;&#x6240;&#x9700;&#x5305;&quot;</span></span><br><span class="line">    &amp;&amp; apt-get update \</span><br><span class="line">    &amp;&amp; apt-get install -y ${runtimeDeps} ${buildDeps} --no-install-recommends \</span><br><span class="line"><span class="comment"># &quot;&#x7F16;&#x8BD1;&#x5B89;&#x88C5; php &#x7EC4;&#x4EF6;&quot;</span></span><br><span class="line">    &amp;&amp; docker-php-ext-install iconv mcrypt mysqli pdo pdo_mysql zip \</span><br><span class="line">    &amp;&amp; docker-php-ext-configure gd \</span><br><span class="line">        --with-freetype-dir=/usr/include/ \</span><br><span class="line">        --with-jpeg-dir=/usr/include/ \</span><br><span class="line">    &amp;&amp; docker-php-ext-install gd \</span><br><span class="line"><span class="comment"># &quot;&#x6E05;&#x7406;&quot;</span></span><br><span class="line">    &amp;&amp; apt-get purge -y --auto-remove \</span><br><span class="line">        -o APT::AutoRemove::RecommendsImportant=false \</span><br><span class="line">        -o APT::AutoRemove::SuggestsImportant=false \</span><br><span class="line">        $buildDeps \</span><br><span class="line">    &amp;&amp; rm -rf /var/cache/apt/* \</span><br><span class="line">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x662F;&#x9488;&#x5BF9; <code>php</code> &#x955C;&#x50CF;&#x8FDB;&#x884C;&#x5B9A;&#x5236;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; <code>php:7-fpm</code> &#x4E2D;&#x6CA1;&#x6709;&#x5B89;&#x88C5;&#x6240;&#x9700;&#x7684; <code>mysqli</code>, <code>pdo_mysql</code>, <code>gd</code> &#x7B49;&#x7EC4;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5B89;&#x88C5;&#xFF0C;&#x800C;&#x4E14;&#xFF0C;&#x90E8;&#x5206;&#x7EC4;&#x4EF6;&#x8FD8;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x6D89;&#x53CA;&#x4E86;&#x4E24;&#x7C7B;&#x4F9D;&#x8D56;&#x5E93;/&#x5DE5;&#x5177;&#xFF0C;&#x4E00;&#x7C7B;&#x662F;&#x5B89;&#x88C5;&#x3001;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x6240;&#x9700;&#x8981;&#x7684;&#x4F9D;&#x8D56;&#xFF1B;&#x53E6;&#x4E00;&#x7C7B;&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x6240;&#x9700;&#x7684;&#x4F9D;&#x8D56;&#x3002;&#x8981;&#x8BB0;&#x4F4F; <code>Dockerfile</code> &#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x4E2D;&#x8981;&#x6C42;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x53EA;&#x5E94;&#x8BE5;&#x4FDD;&#x7559;&#x6700;&#x5C0F;&#x7684;&#x6240;&#x9700;&#x4F9D;&#x8D56;&#xFF0C;&#x56E0;&#x6B64;&#x5B89;&#x88C5;&#x6784;&#x5EFA;&#x7684;&#x4F9D;&#x8D56;&#x5E94;&#x8BE5;&#x5728;&#x5B89;&#x88C5;&#x7ED3;&#x675F;&#x540E;&#x6E05;&#x9664;&#xFF0C;&#x8FD9;&#x4E00;&#x5C42;&#x53EA;&#x4FDD;&#x7559;&#x771F;&#x6B63;&#x9700;&#x8981;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x4F9D;&#x8D56;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x9075;&#x5FAA;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x8FD9;&#x91CC;&#x533A;&#x5206;&#x4E86; <code>buildDeps</code> &#x548C; <code>runtimeDeps</code> &#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5B89;&#x88C5;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x5378;&#x8F7D;&#x3001;&#x6E05;&#x7406; <code>buildDeps</code> &#x7684;&#x4F9D;&#x8D56;&#x3002;&#x8FD9;&#x6837;&#x786E;&#x4FDD;&#x6CA1;&#x6709;&#x65E0;&#x5173;&#x7684;&#x4E1C;&#x897F;&#x8FD8;&#x5728;&#x8BE5;&#x5C42;&#x4E2D;&#x3002;</p>
<h3 id="ying-yong-dai-ma-shi-ying-gai-gua-zai-su-zhu-mu-lu-huan-shi-fang-ru-jing-xiang-nei"><a href="#&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x662F;&#x5E94;&#x8BE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x8FD8;&#x662F;&#x653E;&#x5165;&#x955C;&#x50CF;&#x5185;&#xFF1F;" class="headerlink" title="&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x662F;&#x5E94;&#x8BE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x8FD8;&#x662F;&#x653E;&#x5165;&#x955C;&#x50CF;&#x5185;&#xFF1F;"></a>&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x662F;&#x5E94;&#x8BE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x8FD8;&#x662F;&#x653E;&#x5165;&#x955C;&#x50CF;&#x5185;&#xFF1F; <a href="#ying-yong-dai-ma-shi-ying-gai-gua-zai-su-zhu-mu-lu-huan-shi-fang-ru-jing-xiang-nei" class="header-anchor">#</a></h3><p>&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x90FD;&#x53EF;&#x4EE5;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4EE3;&#x7801;&#x53D8;&#x52A8;&#x975E;&#x5E38;&#x9891;&#x7E41;&#xFF0C;&#x6BD4;&#x5982;&#x5F00;&#x53D1;&#x9636;&#x6BB5;&#xFF0C;&#x4EE3;&#x7801;&#x51E0;&#x4E4E;&#x6BCF;&#x51E0;&#x5206;&#x949F;&#x5C31;&#x9700;&#x8981;&#x53D8;&#x52A8;&#x8C03;&#x8BD5;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>--volume</code> &#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x7684;&#x529E;&#x6CD5;&#x3002;&#x8FD9;&#x6837;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x6784;&#x5EFA;&#x65B0;&#x955C;&#x50CF;&#xFF0C;&#x76F4;&#x63A5;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x5C31;&#x53EF;&#x4EE5;&#x52A0;&#x8F7D;&#x6700;&#x65B0;&#x4EE3;&#x7801;&#xFF0C;&#x751A;&#x81F3;&#x6709;&#x4E9B;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x6587;&#x4EF6;&#x53D8;&#x5316;&#x4ECE;&#x800C;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x9891;&#x7E41;&#x53D8;&#x52A8;&#xFF0C;&#x6BD4;&#x5982;&#x53D1;&#x5E03;&#x9636;&#x6BB5;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5E94;&#x8BE5;&#x5C06;&#x6784;&#x5EFA;&#x597D;&#x7684;&#x5E94;&#x7528;&#x653E;&#x5165;&#x955C;&#x50CF;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x662F;&#x4F7F;&#x7528; CI/CD &#x5DE5;&#x5177;&#xFF0C;&#x5982; <code>Jenkins</code>, <code>Drone.io</code>, <code>Gitlab CI</code> &#x7B49;&#xFF0C;&#x8FDB;&#x884C;&#x6784;&#x5EFA;&#x3001;&#x6D4B;&#x8BD5;&#x3001;&#x5236;&#x4F5C;&#x955C;&#x50CF;&#x3001;&#x53D1;&#x5E03;&#x955C;&#x50CF;&#x3001;&#x4EE5;&#x53CA;&#x5206;&#x6B65;&#x53D1;&#x5E03;&#x4E0A;&#x7EBF;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E5F;&#x662F;&#x540C;&#x6837;&#x7684;&#x9053;&#x7406;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x9891;&#x7E41;&#x53D8;&#x66F4;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#xFF0C;&#x6216;&#x8005;&#x52A8;&#x6001;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5377;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x5E76;&#x975E;&#x9891;&#x7E41;&#x53D8;&#x66F4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5E94;&#x8BE5;&#x5C06;&#x5176;&#x7EB3;&#x5165;&#x7248;&#x672C;&#x63A7;&#x5236;&#x4E2D;&#xFF0C;&#x8D70; CI/CD &#x6D41;&#x7A0B;&#x8FDB;&#x884C;&#x90E8;&#x7F72;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x867D;&#x7136;&#x65B9;&#x4FBF;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x5229;&#x4E8E;&#x96C6;&#x7FA4;&#x90E8;&#x7F72;&#xFF0C;&#x56E0;&#x4E3A;&#x96C6;&#x7FA4;&#x90E8;&#x7F72;&#x524D;&#x8FD8;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x96C6;&#x7FA4;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x540C;&#x6B65;&#x5B58;&#x5728;&#x6240;&#x6302;&#x8F7D;&#x7684;&#x76EE;&#x5F55;&#x53CA;&#x5176;&#x5185;&#x5BB9;&#x3002;&#x56E0;&#x6B64;&#x96C6;&#x7FA4;&#x90E8;&#x7F72;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x5C06;&#x5E94;&#x7528;&#x6253;&#x5165;&#x955C;&#x50CF;&#xFF0C;&#x65B9;&#x4FBF;&#x90E8;&#x7F72;&#x3002;</p>
<h3 id="wei-shi-me-zai-dockerfile-zhong-zhi-xing-dao-ru-sql-service-xxx-start-bu-guan-yong"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x5728;-Dockerfile-&#x4E2D;&#x6267;&#x884C;&#xFF08;&#x5BFC;&#x5165;-sql&#x3001;service-xxx-start&#xFF09;&#x4E0D;&#x7BA1;&#x7528;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x5728; Dockerfile &#x4E2D;&#x6267;&#x884C;&#xFF08;&#x5BFC;&#x5165; .sql&#x3001;service xxx start&#xFF09;&#x4E0D;&#x7BA1;&#x7528;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x5728; <code>Dockerfile</code> &#x4E2D;&#x6267;&#x884C;&#xFF08;&#x5BFC;&#x5165; <code>.sql</code>&#x3001;<code>service xxx start</code>&#xFF09;&#x4E0D;&#x7BA1;&#x7528;&#xFF1F; <a href="#wei-shi-me-zai-dockerfile-zhong-zhi-xing-dao-ru-sql-service-xxx-start-bu-guan-yong" class="header-anchor">#</a></h3><p>&#x8FD9;&#x662F;&#x5178;&#x578B;&#x7684;&#x5BF9; <code>Dockerfile</code> &#x4EE5;&#x53CA;&#x955C;&#x50CF;&#x3001;&#x5BB9;&#x5668;&#x7684;&#x57FA;&#x672C;&#x6982;&#x5FF5;&#x4E0D;&#x4E86;&#x89E3;&#x3002;</p>
<blockquote>
<p><code>Dockerfile</code> &#x4E0D;&#x662F; <code>shell</code> &#x811A;&#x672C;&#xFF0C;&#x800C;&#x662F;&#x5B9A;&#x5236; <code>rootfs</code> &#x7684;&#x811A;&#x672C;&#x3002;&#x5B83;&#x5E76;&#x4E0D;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x6784;&#x5EFA;&#x65F6;&#x8FD0;&#x884C;&#x7684;&#x3002;</p>
</blockquote>
<p>&#x5BFC;&#x5165; <code>.sql</code> &#x6587;&#x4EF6;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x4FEE;&#x6539;&#x7684;&#x662F;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x4E8E;&#x5377;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x533F;&#x540D;&#x5377;&#xFF0C;&#x56E0;&#x6B64;&#x5F53;&#x5BFC;&#x5165;&#x884C;&#x4E3A;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x6784;&#x5EFA;&#x8BE5;&#x5C42;&#x7684;&#x5BB9;&#x5668;&#x505C;&#x6B62;&#x8FD0;&#x884C;&#xFF0C;&#x533F;&#x540D;&#x5377;&#x88AB;&#x629B;&#x5F03;&#xFF0C;&#x6240;&#x6709;&#x5BFC;&#x5165;&#x884C;&#x4E3A;&#x90FD;&#x4F1A;&#x4E22;&#x5931;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x8C13;&#x7684;&#x5BFC;&#x5165; <code>.sql</code> &#x7684;&#x884C;&#x4E3A;&#x5728; <code>Dockerfile</code> &#x91CC;&#x5B9E;&#x9645;&#x4E0A;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x3002;</p>
<p>&#x800C; <code>service xxxx start</code> &#x4E5F;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#xFF0C;&#x8FD9;&#x662F;&#x542F;&#x52A8;&#x540E;&#x53F0;&#x670D;&#x52A1;&#xFF0C;&#x4E14;&#x4E0D;&#x8BF4; Docker &#x4E2D;&#x4E0D;&#x7528;&#x540E;&#x53F0;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x79CD;&#x542F;&#x52A8;&#x884C;&#x4E3A;&#x5BF9;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6839;&#x672C;&#x6CA1;&#x5F71;&#x54CD;&#xFF0C;&#x8FD9;&#x4EC5;&#x4EC5;&#x662F;&#x8BA9;&#x540E;&#x53F0;&#x5728;&#x6784;&#x5EFA;&#x6240;&#x7528;&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;&#xFF0C;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x3002;&#x6700;&#x540E;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E86;&#xFF0C;&#x8BE5;&#x6CA1;&#x542F;&#x52A8;&#x7684;&#x4E1C;&#x897F;&#x8FD8;&#x662F;&#x4E0D;&#x4F1A;&#x542F;&#x52A8;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x4E0D;&#x8981;&#x56E0;&#x6B64;&#x5C31;&#x76F2;&#x76EE;&#x7684;&#x5F97;&#x51FA; <code>Dockerfile</code> &#x65E0;&#x6CD5;&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7ED3;&#x8BBA;&#x3002;&#x6240;&#x6709;&#x5B98;&#x65B9;&#x955C;&#x50CF;&#x90FD;&#x8003;&#x8651;&#x5230;&#x4E86;&#x5B9A;&#x5236;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x53BB;&#x770B;&#x7279;&#x5B9A;&#x5B98;&#x65B9;&#x955C;&#x50CF;&#x7684;&#x6587;&#x6863;&#xFF0C;&#x57FA;&#x672C;&#x90FD;&#x4F1A;&#x770B;&#x5230;&#x5B9A;&#x5236;&#x3001;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x5B98;&#x65B9; <code>mysql</code> &#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x521D;&#x59CB;&#x5316;&#x7684; <code>.sql</code> &#x811A;&#x672C;&#x6587;&#x4EF6;&#x5728; <code>Dockerfile</code> &#x4E2D; <code>COPY</code> &#x81F3; <code>/docker-entrypoint-initdb.d/</code> &#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x7B2C;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x6240;&#x6302;&#x8F7D;&#x7684;&#x5377;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x4F9D;&#x6B21;<a href="https://github.com/docker-library/mysql/blob/4dd33136c4739667a223d39b6f829beb27b235cf/5.7/docker-entrypoint.sh#L151" target="_blank" rel="noopener">&#x6267;&#x884C;&#x8BE5;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6587;&#x4EF6;</a>&#xFF0C;&#x4ECE;&#x800C;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x5E93;&#x521D;&#x59CB;&#x5316;&#x3001;&#x5BFC;&#x5165;&#x7B49;&#x529F;&#x80FD;&#x3002;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> mysql:<span class="number">5.7</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> mysql-data-backup.sql /docker-entrypoint-initdb.d/</span></span><br></pre></td></tr></table></figure>
<h3 id="wei-shi-me-ji-yu-alpine-de-jing-xiang-na-me-xiao-wo-ke-yi-du-huan-cheng-ji-yu-alpine-de-jing-xiang-me"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x57FA;&#x4E8E;-Alpine-&#x7684;&#x955C;&#x50CF;&#x90A3;&#x4E48;&#x5C0F;&#xFF1F;&#x6211;&#x53EF;&#x4EE5;&#x90FD;&#x6362;&#x6210;&#x57FA;&#x4E8E;-Alpine-&#x7684;&#x955C;&#x50CF;&#x4E48;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x57FA;&#x4E8E; Alpine &#x7684;&#x955C;&#x50CF;&#x90A3;&#x4E48;&#x5C0F;&#xFF1F;&#x6211;&#x53EF;&#x4EE5;&#x90FD;&#x6362;&#x6210;&#x57FA;&#x4E8E; Alpine &#x7684;&#x955C;&#x50CF;&#x4E48;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x57FA;&#x4E8E; Alpine &#x7684;&#x955C;&#x50CF;&#x90A3;&#x4E48;&#x5C0F;&#xFF1F;&#x6211;&#x53EF;&#x4EE5;&#x90FD;&#x6362;&#x6210;&#x57FA;&#x4E8E; Alpine &#x7684;&#x955C;&#x50CF;&#x4E48;&#xFF1F; <a href="#wei-shi-me-ji-yu-alpine-de-jing-xiang-na-me-xiao-wo-ke-yi-du-huan-cheng-ji-yu-alpine-de-jing-xiang-me" class="header-anchor">#</a></h3><p><code>Alpine Linux</code> &#x4F53;&#x79EF;&#x5C0F;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x57FA;&#x7840;&#x547D;&#x4EE4;&#x6765;&#x81EA;&#x7CBE;&#x7B80;&#x7684; <code>busybox</code>&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x7B80;&#x5316;&#x5B9E;&#x73B0;&#x7684; <code>musl</code> &#x4F5C;&#x4E3A;&#x5E93;&#x652F;&#x6301;&#xFF0C;&#x800C;&#x5E76;&#x975E;&#x5B8C;&#x6574;&#x7684; <code>glibc</code>&#x3002;<code>musl</code> &#x4F53;&#x79EF;&#x5C0F;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x53EF;&#x80FD;&#x6709;&#x4E0D;&#x517C;&#x5BB9;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x822C;&#x4E0D;&#x7528; <code>Alpine</code> &#x7684;&#x955C;&#x50CF;&#xFF0C;&#x9664;&#x975E;&#x7A7A;&#x95F4;&#x53D7;&#x9650;&#xFF0C;&#x4F53;&#x79EF;&#x5927;&#x5C0F;&#x5F88;&#x5173;&#x952E;&#x65F6;&#x624D;&#x4F1A;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x8FC7;&#x53BB;&#x51FA;&#x73B0;&#x8FC7;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x968F;&#x7740; <code>Docker</code> &#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5BF9; <code>Alpine</code> &#x7684;&#x9700;&#x6C42;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x66F4;&#x591A;&#x7684;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#x4F1A;&#x88AB;&#x53D1;&#x73B0;&#x3001;&#x4FEE;&#x590D;&#xFF0C;&#x6240;&#x4EE5;&#x76F8;&#x4FE1;&#x5728;&#x672A;&#x6765;&#x8FD9;&#x5E94;&#x8BE5;&#x662F;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x73B0;&#x5728;&#x5C31;&#x8981;&#x4F7F;&#x7528;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x8FDB;&#x884C;&#x91CD;&#x590D;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x786E;&#x4FDD;&#x6CA1;&#x6709;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x81EA;&#x5DF1;&#x7684; <code>bug</code>&#x3002;</p>
<h3 id="ke-yi-kan-dao-jing-xiang-ge-ceng-de-yi-lai-guan-xi-me"><a href="#&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x955C;&#x50CF;&#x5404;&#x5C42;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x4E48;&#xFF1F;" class="headerlink" title="&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x955C;&#x50CF;&#x5404;&#x5C42;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x4E48;&#xFF1F;"></a>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x955C;&#x50CF;&#x5404;&#x5C42;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x4E48;&#xFF1F; <a href="#ke-yi-kan-dao-jing-xiang-ge-ceng-de-yi-lai-guan-xi-me" class="header-anchor">#</a></h3><p>&#x955C;&#x50CF;&#x662F;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#x7684;&#xFF0C;&#x955C;&#x50CF;&#x4E4B;&#x95F4;&#x4E5F;&#x53EF;&#x4EE5;&#x4F9D;&#x8D56;&#xFF0C;&#x56E0;&#x6B64;&#x5229;&#x7528; Docker &#x955C;&#x50CF;&#x5F88;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x91CD;&#x590D;&#x7684;&#x90E8;&#x5206;&#x590D;&#x7528;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6709;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x53EF;&#x4EE5;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x770B;&#x5230;&#x955C;&#x50CF;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5462;&#xFF1F;</p>
<p>&#x5F88;&#x65E9;&#x4EE5;&#x524D;&#xFF0C;Docker &#x6709;&#x4E2A; <code>docker images --tree</code> &#x7684;&#x547D;&#x4EE4;&#x7684;&#xFF0C;&#x540E;&#x6765;&#x968F;&#x7740;&#x955C;&#x50CF;&#x5206;&#x5C42;&#x5E73;&#x9762;&#x5316;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5C31;&#x53D6;&#x6D88;&#x4E86;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C;Nate Jones &#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x7528;&#x4E8E;&#x53EF;&#x89C6;&#x5316;&#x955C;&#x50CF;&#x5206;&#x5C42;&#x4F9D;&#x8D56;&#xFF0C;&#x53EB;&#x505A; <strong>dockviz</strong>&#xFF1A;<a href="https://github.com/justone/dockviz" target="_blank" rel="noopener">https://github.com/justone/dockviz</a></p>
<p>&#x5BF9;&#x4E8E; Mac &#x5E73;&#x53F0;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528; <code>brew</code> &#x6765;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install dockviz</span><br></pre></td></tr></table></figure>
<p>&#x5BF9;&#x4E8E;&#x5176;&#x5B83;&#x5E73;&#x53F0;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x53BB;<a href="https://github.com/justone/dockviz/releases" target="_blank" rel="noopener">&#x53D1;&#x5E03;&#x9875;&#x9762;</a>&#x4E0B;&#x8F7D;&#x3002;</p>
<p>&#x5B89;&#x88C5;&#x597D;&#x540E;&#xFF0C;&#x76F4;&#x63A5;&#x6267;&#x884C; <code>dockviz images --tree</code> &#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$ dockviz images --tree</span><br><span class="line">&#x251C;&#x2500;&lt;missing&gt; Virtual Size: 55.3 MB</span><br><span class="line">&#x2502; &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 55.3 MB</span><br><span class="line">&#x2502;   &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 55.3 MB</span><br><span class="line">&#x2502;     &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 55.3 MB</span><br><span class="line">&#x2502;       &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 55.3 MB</span><br><span class="line">&#x2502;         &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 108.3 MB</span><br><span class="line">&#x2502;           &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 108.3 MB</span><br><span class="line">&#x2502;             &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 108.3 MB</span><br><span class="line">&#x2502;               &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 108.3 MB</span><br><span class="line">&#x2502;                 &#x2514;&#x2500;0b5dec81616c Virtual Size: 108.3 MB Tags: nginx:latest</span><br><span class="line">&#x2514;&#x2500;&lt;missing&gt; Virtual Size: 100.1 MB</span><br><span class="line">  &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 100.1 MB</span><br><span class="line">    &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 123.9 MB</span><br><span class="line">      &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 131.2 MB</span><br><span class="line">        &#x251C;&#x2500;&lt;missing&gt; Virtual Size: 272.8 MB</span><br><span class="line">        &#x2502; &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;   &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;     &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;       &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;         &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;           &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;             &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;               &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 274.2 MB</span><br><span class="line">        &#x2502;                 &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 737.9 MB</span><br><span class="line">        &#x2502;                   &#x2514;&#x2500;4551430cfe80 Virtual Size: 738.3 MB Tags: openjdk:latest</span><br><span class="line">        &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 132.4 MB</span><br><span class="line">          &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 132.4 MB</span><br><span class="line">            &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 132.4 MB</span><br><span class="line">...</span><br><span class="line">                            &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 276.0 MB</span><br><span class="line">                                &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 292.4 MB</span><br><span class="line">                                &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 292.4 MB</span><br><span class="line">                                    &#x2514;&#x2500;&lt;missing&gt; Virtual Size: 292.4 MB</span><br><span class="line">                                    &#x2514;&#x2500;72d2be374029 Virtual Size: 292.4 MB Tags: tomcat:latest</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x89C9;&#x5F97;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x592A;&#x7E41;&#x6742;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x751F;&#x6210; <a href="https://en.wikipedia.org/wiki/DOT_(graph_description_language" target="_blank" rel="noopener">DOT &#x56FE;</a>)&#xFF0C;&#x4F7F;&#x7528;&#x547D;&#x4EE4; <code>dockviz images -d | dot -Tpng -o image_tree.png</code> &#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x4F60;&#x7684;&#x955C;&#x50CF;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7ED8;&#x5236;&#x6210;&#x56FE;&#xFF08;<a href="https://imagebin.ca/v/3ZhFvSPeqAi0" target="_blank" rel="noopener">https://imagebin.ca/v/3ZhFvSPeqAi0</a>&#xFF09;&#x3002;</p>
<h2 id="ri-zhi-wen-ti-2"><a href="#&#x65E5;&#x5FD7;&#x95EE;&#x9898;-2" class="headerlink" title="&#x65E5;&#x5FD7;&#x95EE;&#x9898; (2)"></a>&#x65E5;&#x5FD7;&#x95EE;&#x9898; <code>(2)</code> <a href="#ri-zhi-wen-ti-2" class="header-anchor">#</a></h2><h3 id="docker-ri-zhi-du-zai-na-li-zen-me-shou-ji"><a href="#Docker-&#x65E5;&#x5FD7;&#x90FD;&#x5728;&#x54EA;&#x91CC;&#xFF1F;&#x600E;&#x4E48;&#x6536;&#x96C6;&#xFF1F;" class="headerlink" title="Docker &#x65E5;&#x5FD7;&#x90FD;&#x5728;&#x54EA;&#x91CC;&#xFF1F;&#x600E;&#x4E48;&#x6536;&#x96C6;&#xFF1F;"></a>Docker &#x65E5;&#x5FD7;&#x90FD;&#x5728;&#x54EA;&#x91CC;&#xFF1F;&#x600E;&#x4E48;&#x6536;&#x96C6;&#xFF1F; <a href="#docker-ri-zhi-du-zai-na-li-zen-me-shou-ji" class="header-anchor">#</a></h3><p>&#x65E5;&#x5FD7;&#x5206;&#x4E24;&#x7C7B;&#xFF0C;&#x4E00;&#x7C7B;&#x662F; <code>Docker &#x5F15;&#x64CE;&#x65E5;&#x5FD7;</code>&#xFF1B;&#x53E6;&#x4E00;&#x7C7B;&#x662F; <code>&#x5BB9;&#x5668;&#x65E5;&#x5FD7;</code>&#x3002;</p>
<h4 id="docker-yin-qing-ri-zhi"><a href="#Docker-&#x5F15;&#x64CE;&#x65E5;&#x5FD7;" class="headerlink" title="Docker &#x5F15;&#x64CE;&#x65E5;&#x5FD7;"></a>Docker &#x5F15;&#x64CE;&#x65E5;&#x5FD7; <a href="#docker-yin-qing-ri-zhi" class="header-anchor">#</a></h4><p><code>Docker &#x5F15;&#x64CE;&#x65E5;&#x5FD7;</code> &#x4E00;&#x822C;&#x662F;&#x4EA4;&#x7ED9;&#x4E86; <code>Upstart</code>(Ubuntu 14.04) &#x6216;&#x8005; <code>systemd</code> (CentOS 7, Ubuntu 16.04)&#x3002;&#x524D;&#x8005;&#x4E00;&#x822C;&#x4F4D;&#x4E8E; <code>/var/log/upstart/docker.log</code> &#x4E0B;&#xFF0C;&#x540E;&#x8005;&#x4E00;&#x822C;&#x901A;&#x8FC7; <code>jounarlctl -u docker</code> &#x6765;&#x8BFB;&#x53D6;&#x3002;&#x4E0D;&#x540C;&#x7CFB;&#x7EDF;&#x7684;&#x4F4D;&#x7F6E;&#x90FD;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;SO&#x4E0A;&#x6709;&#x4EBA;&#x603B;&#x7ED3;&#x4E86;&#x4E00;&#x4EFD;&#x5217;&#x8868;&#xFF0C;&#x6211;&#x4FEE;&#x6B63;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x7CFB;&#x7EDF;</th>
<th>&#x65E5;&#x5FD7;&#x4F4D;&#x7F6E;</th>
</tr>
</thead>
<tbody>
<tr>
<td> Ubuntu(14.04)</td>
<td><code>/var/log/upstart/docker.log</code></td>
</tr>
<tr>
<td> Ubuntu(16.04)</td>
<td><code>journalctl -u docker.service</code></td>
</tr>
<tr>
<td> CentOS 7/RHEL 7/Fedora</td>
<td><code>journalctl -u docker.service</code></td>
</tr>
<tr>
<td> CoreOS</td>
<td><code>journalctl -u docker.service</code></td>
</tr>
<tr>
<td> OpenSuSE</td>
<td><code>journalctl -u docker.service</code></td>
</tr>
<tr>
<td> OSX</td>
<td><code>~/Library/Containers/com.docker.docker/Data/com.docker.driver.amd64-linux/log/d&#x200C;&#x200B;ocker.log</code></td>
</tr>
<tr>
<td> Debian GNU/Linux 7</td>
<td><code>/var/log/daemon.log</code></td>
</tr>
<tr>
<td> Debian GNU/Linux 8</td>
<td><code>journalctl -u docker.service</code></td>
</tr>
<tr>
<td> Boot2Docker</td>
<td><code>/var/log/docker.log</code></td>
</tr>
</tbody>
</table>
<h4 id="rong-qi-ri-zhi"><a href="#&#x5BB9;&#x5668;&#x65E5;&#x5FD7;" class="headerlink" title="&#x5BB9;&#x5668;&#x65E5;&#x5FD7;"></a>&#x5BB9;&#x5668;&#x65E5;&#x5FD7; <a href="#rong-qi-ri-zhi" class="header-anchor">#</a></h4><p><code>&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;</code> &#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>docker logs</code> &#x547D;&#x4EE4;&#x6765;&#x8BBF;&#x95EE;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x50CF; <code>tail -f</code> &#x4E00;&#x6837;&#xFF0C;&#x4F7F;&#x7528; <code>docker logs -f</code> &#x6765;&#x5B9E;&#x65F6;&#x67E5;&#x770B;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528; Docker Compose&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>docker-compose logs &lt;&#x670D;&#x52A1;&#x540D;&gt;</code> &#x6765;&#x67E5;&#x770B;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6DF1;&#x7A76;&#x5176;&#x65E5;&#x5FD7;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x9ED8;&#x8BA4;&#x90FD;&#x4F1A;&#x4EE5; <code>json-file</code> &#x7684;&#x683C;&#x5F0F;&#x5B58;&#x50A8;&#x4E8E; <code>/var/lib/docker/containers/&lt;&#x5BB9;&#x5668;id&gt;/&lt;&#x5BB9;&#x5668;id&gt;-json.log</code> &#x4E0B;&#xFF0C;&#x4E0D;&#x8FC7;&#x5E76;&#x4E0D;&#x5EFA;&#x8BAE;&#x53BB;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x8BFB;&#x53D6;&#x5185;&#x5BB9;&#xFF0C;&#x56E0;&#x4E3A; Docker &#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x5B8C;&#x5584;&#x5730;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x65B9;&#x5F0F; - <code>Docker &#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x9A71;&#x52A8;</code>&#x3002;</p>
<p>&#x5173;&#x4E8E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#xFF0C;<code>Docker</code> &#x5185;&#x7F6E;&#x4E86;&#x5F88;&#x591A;&#x65E5;&#x5FD7;&#x9A71;&#x52A8;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7C7B;&#x4F3C;&#x4E8E; <code>fluentd</code>, <code>syslog</code> &#x8FD9;&#x7C7B;&#x670D;&#x52A1;&#x6536;&#x96C6;&#x65E5;&#x5FD7;&#x3002;&#x65E0;&#x8BBA;&#x662F; <code>Docker</code> &#x5F15;&#x64CE;&#xFF0C;&#x8FD8;&#x662F;&#x5BB9;&#x5668;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x65E5;&#x5FD7;&#x9A71;&#x52A8;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x6253;&#x7B97;&#x7528; <code>fluentd</code> &#x6536;&#x96C6;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x65E5;&#x5FD7;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    --<span class="built_in">log</span>-driver=fluentd \</span><br><span class="line">    --<span class="built_in">log</span>-opt fluentd-address=10.2.3.4:24224 \</span><br><span class="line">    --<span class="built_in">log</span>-opt tag=<span class="string">&quot;docker.{{.Name}}&quot;</span> \</span><br><span class="line">    nginx</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x4E2D; <code>10.2.3.4:24224</code> &#x662F; <code>fluentd</code> &#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x5B9E;&#x9645;&#x73AF;&#x5883;&#x4E2D;&#x5E94;&#x8BE5;&#x6362;&#x6210;&#x771F;&#x5B9E;&#x7684;&#x5730;&#x5740;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x4F7F;&#x7528; <code>fluentd</code> &#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8BF7;&#x53C2;&#x8003;&#x6211;&#x5199;&#x7684;&#x4E00;&#x7EC4; <code>fluentd</code> &#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<p><a href="https://coding.net/u/twang2218/p/docker-example/git/tree/master/fluentd" target="_blank" rel="noopener">https://coding.net/u/twang2218/p/docker-example/git/tree/master/fluentd</a></p>
<h3 id="bu-tong-rong-qi-de-ri-zhi-hui-ju-dao-fluentd-hou-ru-he-qu-fen"><a href="#&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x6C47;&#x805A;&#x5230;-fluentd-&#x540E;&#x5982;&#x4F55;&#x533A;&#x5206;&#xFF1F;" class="headerlink" title="&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x6C47;&#x805A;&#x5230; fluentd &#x540E;&#x5982;&#x4F55;&#x533A;&#x5206;&#xFF1F;"></a>&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x6C47;&#x805A;&#x5230; <code>fluentd</code> &#x540E;&#x5982;&#x4F55;&#x533A;&#x5206;&#xFF1F; <a href="#bu-tong-rong-qi-de-ri-zhi-hui-ju-dao-fluentd-hou-ru-he-qu-fen" class="header-anchor">#</a></h3><p>&#x6709;&#x4E24;&#x79CD;&#x6982;&#x5FF5;&#x7684;&#x533A;&#x5206;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x533A;&#x5206;&#x5F00;<code>&#x4E0D;&#x540C;&#x5BB9;&#x5668;</code>&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x662F;&#x533A;&#x5206;&#x5F00;&#x6765;<code>&#x4E0D;&#x540C;&#x670D;&#x52A1;</code>&#x7684;&#x65E5;&#x5FD7;&#x3002;</p>
<p>&#x533A;&#x5206;&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x662F;&#x5F88;&#x76F4;&#x89C2;&#x7684;&#x60F3;&#x6CD5;&#x3002;&#x8FD0;&#x884C;&#x4E86;&#x51E0;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x65E5;&#x5FD7;&#x90FD;&#x9001;&#x5411;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#xFF0C;&#x90A3;&#x4E48;&#x663E;&#x7136;&#x4E0D;&#x5E0C;&#x671B; <code>nginx</code> &#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x548C; <code>MySQL</code> &#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x6DF7;&#x6742;&#x5728;&#x4E00;&#x8D77;&#x770B;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5728; Swarm &#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x533A;&#x5206;&#x5BB9;&#x5668;&#x5C31;&#x5DF2;&#x7ECF;&#x4E0D;&#x518D;&#x662F;&#x5408;&#x7406;&#x7684;&#x505A;&#x6CD5;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x53EF;&#x80FD;&#x6709;&#x8BB8;&#x591A;&#x526F;&#x672C;&#xFF0C;&#x800C;&#x53C8;&#x6709;&#x5F88;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x5BB9;&#x5668;&#x533A;&#x5206;&#x53BB;&#x5206;&#x6790;&#xFF0C;&#x5F88;&#x96BE;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x4E0A;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x670D;&#x52A1;&#x72B6;&#x6001;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x5BB9;&#x5668;&#x662F;&#x77ED;&#x751F;&#x5B58;&#x5468;&#x671F;&#x7684;&#xFF0C;&#x5728;&#x7EF4;&#x62A4;&#x671F;&#x95F4;&#x5BB9;&#x5668;&#x751F;&#x5B58;&#x6B7B;&#x4EA1;&#x662F;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x5982;&#x679C;&#x662F;&#x50CF;&#x4F20;&#x7EDF;&#x865A;&#x62DF;&#x673A;&#x90A3;&#x6837;&#x5B50;&#x4EE5;&#x5BB9;&#x5668;&#x4E3A;&#x5355;&#x5143;&#x53BB;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x5F88;&#x96BE;&#x5177;&#x6709;&#x4EF7;&#x503C;&#x3002;&#x56E0;&#x6B64;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x5019;&#x662F;&#x5BF9;&#x67D0;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x65E5;&#x5FD7;&#x6574;&#x4F53;&#x5206;&#x6790;&#xFF0C;&#x65E0;&#x9700;&#x533A;&#x522B;&#x65E5;&#x5FD7;&#x5177;&#x4F53;&#x6765;&#x81EA;&#x4E8E;&#x54EA;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x5BB9;&#x5668;&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#x95F4;&#x4EA7;&#x751F;&#x4EE5;&#x53CA;&#x662F;&#x5426;&#x6D88;&#x4EA1;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4EE5;&#x670D;&#x52A1;&#x4E3A;&#x5355;&#x5143;&#x53BB;&#x533A;&#x5206;&#x65E5;&#x5FD7;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x8FD9;&#x4E24;&#x7C7B;&#x7684;&#x533A;&#x5206;&#x65E5;&#x5FD7;&#x7684;&#x529E;&#x6CD5;&#xFF0C;Docker &#x90FD;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4EE5; <code>fluentd</code> &#x4E3A;&#x4F8B;&#x8BF4;&#x660E;&#x3002;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&apos;2&apos;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.11-alpine</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;3000:80&quot;</span></span><br><span class="line">        <span class="attr">labels:</span></span><br><span class="line">            <span class="attr">section:</span> <span class="string">frontend</span></span><br><span class="line">            <span class="attr">group:</span> <span class="string">alpha</span></span><br><span class="line">            <span class="attr">service:</span> <span class="string">web</span></span><br><span class="line">            <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">            <span class="attr">base_os:</span> <span class="string">alpine</span></span><br><span class="line">        <span class="attr">logging:</span></span><br><span class="line">            <span class="attr">driver:</span> <span class="string">fluentd</span></span><br><span class="line">            <span class="attr">options:</span></span><br><span class="line">                <span class="attr">fluentd-address:</span> <span class="string">&quot;localhost:24224&quot;</span></span><br><span class="line">                <span class="attr">tag:</span> <span class="string">&quot;frontend.web.nginx.<span class="template-variable">{{.Name}}</span>&quot;</span></span><br><span class="line">                <span class="attr">labels:</span> <span class="string">&quot;section,group,service,image,base_os&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A; <code>nginx:alpine</code> &#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x670D;&#x52A1;&#x540D;&#x4E3A; <code>web</code>&#x3002;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x4F7F;&#x7528; <code>fluentd</code> &#x8FDB;&#x884C;&#x6536;&#x96C6;&#xFF0C;&#x5E76;&#x4E14;&#x9644;&#x4E0A;&#x6807;&#x7B7E; <code>frontend.web.nginx.&lt;&#x5BB9;&#x5668;&#x540D;&gt;</code>&#x3002;&#x9664;&#x6B64;&#x4EE5;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x7EC4; <code>labels</code>&#xFF0C;&#x5E76;&#x4E14;&#x5728; <code>logging</code> &#x7684; <code>options</code> &#x4E2D;&#x7684; <code>labels</code> &#x4E2D;&#x6307;&#x660E;&#x5E0C;&#x671B;&#x54EA;&#x4E9B;&#x6807;&#x7B7E;&#x968F;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x3002;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x4E2D;&#x5F88;&#x591A;&#x4E00;&#x90E8;&#x5206;&#x90FD;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x6240;&#x6536;&#x96C6;&#x7684;&#x65E5;&#x5FD7;&#x91CC;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B; <code>fluentd</code> &#x6536;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;&#x3002;</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">&quot;frontend.web.nginx.service_web_1&quot;</span>: {</span><br><span class="line">    <span class="attr">&quot;image&quot;</span>: <span class="string">&quot;nginx&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;base_os&quot;</span>: <span class="string">&quot;alpine&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;container_id&quot;</span>: <span class="string">&quot;f7212f7108de033045ddc22858569d0ac50921b043b97a2c8bf83b1b1ee50e34&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;section&quot;</span>: <span class="string">&quot;frontend&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;service&quot;</span>: <span class="string">&quot;web&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;log&quot;</span>: <span class="string">&quot;172.20.0.1 - - [09/Dec/2016:15:02:45 +0000] \&quot;GET / HTTP/1.1\&quot; 200 612 \&quot;-\&quot; \&quot;curl/7.49.1\&quot; \&quot;-\&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;group&quot;</span>: <span class="string">&quot;alpha&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;container_name&quot;</span>: <span class="string">&quot;/service_web_1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;source&quot;</span>: <span class="string">&quot;stdout&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;remote&quot;</span>: <span class="string">&quot;172.20.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;method&quot;</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;code&quot;</span>: <span class="string">&quot;200&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;size&quot;</span>: <span class="string">&quot;612&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;referer&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;agent&quot;</span>: <span class="string">&quot;curl/7.49.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;forward&quot;</span>: <span class="string">&quot;-&quot;</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x53BB;&#x9664; <code>nginx</code> &#x6B63;&#x5E38;&#x7684;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x9879;&#x76EE;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x66F4;&#x6E05;&#x6670;&#x7684;&#x770B;&#x5230;&#x6709;&#x54EA;&#x4E9B;&#x5143;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x4E86;&#x3002;</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">&quot;frontend.web.nginx.service_web_1&quot;</span>: {</span><br><span class="line">    <span class="attr">&quot;image&quot;</span>: <span class="string">&quot;nginx&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;base_os&quot;</span>: <span class="string">&quot;alpine&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;container_id&quot;</span>: <span class="string">&quot;f7212f7108de033045ddc22858569d0ac50921b043b97a2c8bf83b1b1ee50e34&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;section&quot;</span>: <span class="string">&quot;frontend&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;service&quot;</span>: <span class="string">&quot;web&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;group&quot;</span>: <span class="string">&quot;alpha&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;container_name&quot;</span>: <span class="string">&quot;/service_web_1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;source&quot;</span>: <span class="string">&quot;stdout&quot;</span>,</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6211;&#x4EEC;&#x5728; <code>logging</code> &#x4E0B;&#x6240;&#x6709;&#x6307;&#x5B9A;&#x7684; <code>labels</code> &#x90FD;&#x5728;&#x3002;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x5BF9;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x8BBE;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x6807;&#x7B7E;&#xFF0C;&#x901A;&#x8FC7;&#x6807;&#x7B7E;&#x6765;&#x533A;&#x5206;&#x670D;&#x52A1;&#x3002;&#x6BD4;&#x5982;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9; <code>web</code> &#x670D;&#x52A1;&#x6307;&#x5B9A;&#x4E86; <code>service=web</code> &#x7684;&#x6807;&#x7B7E;&#xFF0C;&#x6211;&#x4EEC;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x670D;&#x52A1;&#x8BBE;&#x5B9A;&#x6807;&#x7B7E;&#x4E3A; <code>service=mysql</code>&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x6C47;&#x603B;&#x540E;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5BF9; <code>service</code> &#x6807;&#x7B7E;&#x5206;&#x7EC4;&#x8FC7;&#x6EE4;&#x5373;&#x53EF;&#xFF0C;&#x5206;&#x79BB;&#x805A;&#x5408;&#x4E0D;&#x540C;&#x670D;&#x52A1;&#x7684;&#x65E5;&#x5FD7;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0D;&#x6B62;&#x4E00;&#x4E2A;&#x6807;&#x7B7E;&#xFF0C;&#x6BD4;&#x5982;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x591A;&#x7EC4;&#x4E0D;&#x540C;&#x9897;&#x7C92;&#x5EA6;&#x7684;&#x6807;&#x7B7E;&#xFF0C;&#x5728;&#x540E;&#x671F;&#x5206;&#x7EC4;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x7075;&#x6D3B;&#x7684;&#x8FDB;&#x884C;&#x7EC4;&#x5408;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x4E0D;&#x540C;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x6CE8;&#x610F; <code>frontend.web.nginx.service_web_1</code>&#xFF0C;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5229;&#x7528; <code>--log-opt tag=frontend.web.nginx.&lt;&#x5BB9;&#x5668;&#x540D;&gt;</code> &#x8FDB;&#x884C;&#x8BBE;&#x5B9A;&#x7684;&#xFF0C;&#x5176;&#x4E2D; <code>&lt;&#x5BB9;&#x5668;&#x540D;&gt;</code> &#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F; Go &#x6A21;&#x677F;&#x8868;&#x8FBE;&#x5F0F; <em>{{.Name}}</em>&#x3002;Go &#x6A21;&#x677F;&#x5F88;&#x5F3A;&#x5927;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x5B83;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x6807;&#x7B7E;&#x3002;&#x5728; <code>fluentd</code> &#x4E2D;&#xFF0C;<code>&lt;match&gt;</code> &#x9879;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6807;&#x7B7E;&#x6765;&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x552F;&#x4E00;&#x8868;&#x793A;&#x5BB9;&#x5668;&#x7684;&#xFF0C;&#x6709;&#x5BB9;&#x5668; ID <code>container_id</code>&#xFF0C;&#x800C;&#x5BB9;&#x5668;&#x540D; <code>container_name</code> &#x4E5F;&#x4ECE;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x4E0A;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x3002;&#x56E0;&#x6B64;&#x8FDB;&#x884C;&#x5BB9;&#x5668;&#x533A;&#x5206;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E24;&#x9879;&#x3002;</p>
<p>&#x8FD8;&#x6709;&#x4E00;&#x4E2A; <code>source</code>&#xFF0C;&#x8FD9;&#x8868;&#x793A;&#x4E86;&#x65E5;&#x5FD7;&#x662F;&#x4ECE;<code>&#x6807;&#x51C6;&#x8F93;&#x51FA;</code>&#x8FD8;&#x662F;<code>&#x6807;&#x51C6;&#x9519;&#x8BEF;&#x8F93;&#x51FA;</code>&#x5F97;&#x5230;&#x7684;&#xFF0C;&#x7531;&#x6B64;&#x53EF;&#x4EE5;&#x533A;&#x5206;<code>&#x6B63;&#x5E38;&#x65E5;&#x5FD7;</code>&#x548C;<code>&#x9519;&#x8BEF;&#x65E5;&#x5FD7;</code>&#x3002;</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x9664;&#x4E86;&#x5BB9;&#x5668;&#x81EA;&#x8EAB;&#x8F93;&#x51FA;&#x7684;&#x4FE1;&#x606F;&#x5916;&#xFF0C;Docker &#x8FD8;&#x53EF;&#x4EE5;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x6DFB;&#x52A0;&#x5F88;&#x591A;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x5E2E;&#x52A9;&#x540E;&#x671F;&#x7684;&#x65E5;&#x5FD7;&#x5904;&#x7406;&#x4E2D;&#x5E94;&#x5BF9;&#x4E0D;&#x540C;&#x9700;&#x6C42;&#x7684;&#x641C;&#x7D22;&#x548C;&#x8FC7;&#x6EE4;&#x3002;</p>
<p>&#x5728;&#x540E;&#x671F;&#x5904;&#x7406;&#x4E2D;&#xFF0C;<code>fluentd</code> &#x4E2D;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>&lt;match&gt;</code> &#x6216;&#x8005; <code>&lt;filter&gt;</code> &#x63D2;&#x4EF6;&#x6839;&#x636E; <code>tag</code> &#x6216;&#x8005;&#x5176;&#x5B83;&#x5143;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5206;&#x522B;&#x5904;&#x7406;&#x3002;&#x800C;&#x65E5;&#x5FD7;&#x5230;&#x4E86; ElasticSearch &#x8FD9;&#x7C7B;&#x7CFB;&#x7EDF;&#x540E;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x3001;&#x805A;&#x5408;&#x3002;</p>
<h2 id="shi-yong-wen-ti-11"><a href="#&#x4F7F;&#x7528;&#x95EE;&#x9898;-11" class="headerlink" title="&#x4F7F;&#x7528;&#x95EE;&#x9898; (11)"></a>&#x4F7F;&#x7528;&#x95EE;&#x9898; <code>(11)</code> <a href="#shi-yong-wen-ti-11" class="header-anchor">#</a></h2><h3 id="wei-shi-me-rong-qi-yi-yun-xing-jiu-tui-chu-a"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x5BB9;&#x5668;&#x4E00;&#x8FD0;&#x884C;&#x5C31;&#x9000;&#x51FA;&#x554A;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x5BB9;&#x5668;&#x4E00;&#x8FD0;&#x884C;&#x5C31;&#x9000;&#x51FA;&#x554A;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x5BB9;&#x5668;&#x4E00;&#x8FD0;&#x884C;&#x5C31;&#x9000;&#x51FA;&#x554A;&#xFF1F; <a href="#wei-shi-me-rong-qi-yi-yun-xing-jiu-tui-chu-a" class="header-anchor">#</a></h3><p>&#x8FD9;&#x662F;&#x521D;&#x5B66; Docker &#x5E38;&#x5E38;&#x78B0;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6B64;&#x65F6;&#x8FD8;&#x4EE5;&#x865A;&#x62DF;&#x673A;&#x6765;&#x7406;&#x89E3; Docker&#xFF0C;&#x8BA4;&#x4E3A;&#x542F;&#x52A8; Docker &#x5C31;&#x662F;&#x542F;&#x52A8;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x641E;&#x660E;&#x767D;&#x524D;&#x53F0;&#x548C;&#x540E;&#x53F0;&#x7684;&#x533A;&#x522B;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x78B0;&#x5230;&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#x5E94;&#x8BE5;&#x67E5;&#x65E5;&#x5FD7;&#x548C;&#x5BB9;&#x5668;&#x4E3B;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x7801;&#x3002;</p>
<p>&#x68C0;&#x67E5;&#x5BB9;&#x5668;&#x65E5;&#x5FD7;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;&#x5BB9;&#x5668;ID&gt;</span><br></pre></td></tr></table></figure>
<p>&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x7801;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE                           COMMAND             CREATED             STATUS                      PORTS                                                                  NAMES</span><br><span class="line">cc2aa3f4745f        ubuntu                          <span class="string">&quot;/bin/bash&quot;</span>         23 hours ago        Exited (0) 22 hours ago                                                                            clever_lewin</span><br><span class="line">25510a2cb171        twang2218/gitlab-ce-zh:8.15.3   <span class="string">&quot;/assets/wrapper&quot;</span>   2 days ago          Exited (127) 2 days ago                                                                            determined_mirzakhani</span><br></pre></td></tr></table></figure>
<p>&#x5728; <code>STATUS</code> &#x4E00;&#x680F;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x9000;&#x51FA;&#x7801;&#x662F;&#x591A;&#x5C11;&#x3002;</p>
<ul>
<li>&#x5982;&#x679C;&#x770B;&#x5230;&#x4E86; <code>Exited (127)</code> &#x90A3;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x7531;&#x4E8E;&#x5185;&#x5B58;&#x8D85;&#x6807;&#x5BFC;&#x81F4;&#x89E6;&#x53D1; <code>Out Of Memory</code> &#x7136;&#x540E;&#x88AB;&#x5F3A;&#x5236;&#x7EC8;&#x6B62;&#x4E86;&#x3002;</li>
<li>&#x5982;&#x679C;&#x770B;&#x5230;&#x4E86; <code>Exited (0)</code>&#xFF0C;&#x8FD9;&#x8BF4;&#x660E;&#x5BB9;&#x5668;&#x4E3B;&#x8FDB;&#x7A0B;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x4E86;&#x3002;</li>
<li>&#x5982;&#x679C;&#x662F;&#x5176;&#x4ED6;&#x60C5;&#x51B5;&#xFF0C;&#x5E94;&#x8BE5;&#x68C0;&#x67E5;&#x5BB9;&#x5668;&#x65E5;&#x5FD7;&#x3002;</li>
</ul>
<p>&#x521D;&#x5B66; Docker &#x7684;&#x4EBA;&#x5E38;&#x5E38;&#x4F1A;&#x4E0D;&#x7406;&#x89E3;&#x65E2;&#x7136;&#x6B63;&#x5E38;&#x600E;&#x4E48;&#x4F1A;&#x9000;&#x51FA;&#x7684;&#x610F;&#x601D;&#x3002;&#x4E0D;&#x5F97;&#x4E0D;&#x5728;&#x5F3A;&#x8C03;&#x4E00;&#x904D;&#xFF0C;Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5BB9;&#x5668;&#x53EA;&#x662F;&#x8FDB;&#x7A0B;&#x3002;&#x56E0;&#x6B64;&#x5F53;&#x6267;&#x884C; <code>docker run</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B9E;&#x9645;&#x6240;&#x505A;&#x7684;&#x53EA;&#x662F;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x5BB9;&#x5668;&#x81EA;&#x7136;&#x5C31;&#x7EC8;&#x6B62;&#x4E86;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x8FDB;&#x7A0B;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x9000;&#x51FA;&#xFF1F;</p>
<ul>
<li>&#x5982;&#x679C;&#x662F;&#x6267;&#x884C; <code>service nginx start</code> &#x8FD9;&#x7C7B;&#x542F;&#x52A8;&#x540E;&#x53F0;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x90A3;&#x8BF4;&#x660E;&#x8FD8;&#x662F;&#x628A; Docker &#x5F53;&#x505A;&#x865A;&#x62DF;&#x673A;&#x4E86;&#x3002;Docker &#x542F;&#x52A8;&#x7684;&#x662F;&#x8FDB;&#x7A0B;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x8C13;&#x7684;&#x540E;&#x53F0;&#x670D;&#x52A1;&#x5E94;&#x8BE5;&#x653E;&#x5230;&#x524D;&#x53F0;&#xFF0C;&#x6BD4;&#x5982;&#x5E94;&#x8BE5; <code>nginx -g &apos;daemon off;&apos;</code> &#x8FD9;&#x6837;&#x76F4;&#x63A5;&#x524D;&#x53F0;&#x542F;&#x52A8;&#x5E94;&#x7528;&#x624D;&#x5BF9;&#x3002;</li>
<li>&#x5982;&#x679C;&#x53D1;&#x73B0; <code>COMMAND</code> &#x4E00;&#x680F;&#x662F; <code>/bin/bash</code>&#xFF0C;&#x90A3;&#x8FD8;&#x662F;&#x8BF4;&#x660E;&#x628A; Docker &#x5F53;&#x865A;&#x62DF;&#x673A;&#x4E86;&#x3002;<code>COMMAND</code> &#x5E94;&#x8BE5;&#x662F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x800C;&#x4E0D;&#x4EA4;&#x4E92;&#x5F0F;&#x64CD;&#x4F5C;&#x754C;&#x9762;&#xFF0C;&#x5BB9;&#x5668;&#x4E0D;&#x9700;&#x8981;&#x4EA4;&#x4E92;&#x5F0F;&#x64CD;&#x4F5C;&#x754C;&#x9762;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528; <code>/bin/bash</code> &#x5E0C;&#x671B;&#x8D77;&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x5F0F;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#x7ED9;&#x5176;&#x8F93;&#x5165;&#x548C;&#x7EC8;&#x7AEF;&#xFF0C;&#x56E0;&#x6B64;&#x5FC5;&#x987B;&#x52A0; <code>-it</code> &#x9009;&#x9879;&#xFF0C;&#x6BD4;&#x5982; <code>docker run -it ubuntu /bin/bash</code></li>
</ul>
<h3 id="ru-he-zai-docker-rong-qi-nei-shi-yong-docker-ming-ling-bi-ru-zai-jenkins-rong-qi-zhong"><a href="#&#x5982;&#x4F55;&#x5728;-Docker-&#x5BB9;&#x5668;&#x5185;&#x4F7F;&#x7528;-docker-&#x547D;&#x4EE4;-&#x6BD4;&#x5982;&#x5728;-Jenkins-&#x5BB9;&#x5668;&#x4E2D;-&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5728; Docker  &#x5BB9;&#x5668;&#x5185;&#x4F7F;&#x7528; docker &#x547D;&#x4EE4;(&#x6BD4;&#x5982;&#x5728; Jenkins &#x5BB9;&#x5668;&#x4E2D;)&#xFF1F;"></a>&#x5982;&#x4F55;&#x5728; Docker  &#x5BB9;&#x5668;&#x5185;&#x4F7F;&#x7528; <code>docker</code> &#x547D;&#x4EE4;(&#x6BD4;&#x5982;&#x5728; Jenkins &#x5BB9;&#x5668;&#x4E2D;)&#xFF1F; <a href="#ru-he-zai-docker-rong-qi-nei-shi-yong-docker-ming-ling-bi-ru-zai-jenkins-rong-qi-zhong" class="header-anchor">#</a></h3><p>&#x9996;&#x5148;&#xFF0C;&#x4E0D;&#x8981;&#x5728; Docker &#x5BB9;&#x5668;&#x4E2D;&#x5B89;&#x88C5;&#x3001;&#x8FD0;&#x884C; Docker &#x5F15;&#x64CE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684; Docker In Docker (DIND)&#xFF0C;&#x53C2;&#x8003;&#x6587;&#x7AE0;&#xFF1A;</p>
<p><a href="https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/" target="_blank" rel="noopener">https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/</a></p>
<p>&#x4E3A;&#x4E86;&#x8BA9;&#x5BB9;&#x5668;&#x5185;&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>Docker Remote API</code> &#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5BBF;&#x4E3B;&#x7684; Docker Engine&#x3002;&#x53EF;&#x4EE5;&#x662F;&#x539F;&#x751F;&#x7684; Docker CLI &#xFF08;<code>docker</code> &#x547D;&#x4EE4;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;<a href="https://docs.docker.com/engine/reference/api/remote_api_client_libraries/" target="_blank" rel="noopener">&#x5176;&#x5B83;&#x8BED;&#x8A00;&#x7684;&#x5E93;</a>&#x3002;</p>
<h4 id="wei-jenkins-tian-jia-docker-ming-ling-xing"><a href="#&#x4E3A;-Jenkins-&#x6DFB;&#x52A0;-Docker-&#x547D;&#x4EE4;&#x884C;" class="headerlink" title="&#x4E3A; Jenkins &#x6DFB;&#x52A0; Docker &#x547D;&#x4EE4;&#x884C;"></a>&#x4E3A; Jenkins &#x6DFB;&#x52A0; Docker &#x547D;&#x4EE4;&#x884C; <a href="#wei-jenkins-tian-jia-docker-ming-ling-xing" class="header-anchor">#</a></h4><p>&#x4E0B;&#x9762;&#x4EE5;&#x5B9A;&#x5236; <code>jenkins</code> &#x955C;&#x50CF;&#x4E3A;&#x4F8B;&#xFF0C;&#x4F7F;&#x7528; <code>Dockerfile</code> &#x6DFB;&#x52A0; <code>docker</code> &#x547D;&#x4EE4;&#x884C;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x8C03;&#x6574;&#x6743;&#x9650;&#x3002;</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> jenkins:alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;Docker CLI</span></span><br><span class="line"><span class="keyword">USER</span> root</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> curl -O https://get.docker.com/builds/Linux/x86_64/docker-latest.tgz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; tar zxvf docker-latest.tgz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; cp docker/docker /usr/<span class="built_in">local</span>/bin/ \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf docker docker-latest.tgz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5C06; `jenkins` &#x7528;&#x6237;&#x7684;&#x7EC4; ID &#x6539;&#x4E3A;&#x5BBF;&#x4E3B; `docker` &#x7EC4;&#x7684;&#x7EC4;ID&#xFF0C;&#x4ECE;&#x800C;&#x5177;&#x6709;&#x6267;&#x884C; `docker` &#x547D;&#x4EE4;&#x7684;&#x6743;&#x9650;&#x3002;</span></span><br><span class="line"><span class="keyword">ARG</span> DOCKER_GID=<span class="number">999</span></span><br><span class="line"><span class="keyword">USER</span> jenkins:${DOCKER_GID}</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4E0B;&#x8F7D;&#x4E86;&#x9759;&#x6001;&#x7F16;&#x8BD1;&#x7684; <code>docker</code> &#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x63D0;&#x53D6;&#x547D;&#x4EE4;&#x884C;&#x5B89;&#x88C5;&#x5230;&#x7CFB;&#x7EDF;&#x76EE;&#x5F55;&#x4E0B;&#x3002;&#x7136;&#x540E;&#x8C03;&#x6574;&#x4E86; <code>jenkins</code> &#x7528;&#x6237;&#x7684;&#x7EC4; ID&#xFF0C;&#x8C03;&#x6574;&#x4E3A;&#x5BBF;&#x4E3B; <code>docker</code> &#x7EC4;ID&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5176;&#x5177;&#x6709;&#x6267;&#x884C; <code>docker</code> &#x547D;&#x4EE4;&#x7684;&#x6743;&#x9650;&#x3002;</p>
<p>&#x7EC4; ID &#x4F7F;&#x7528;&#x4E86; <code>DOCKER_GID</code> &#x53C2;&#x6570;&#x6765;&#x5B9A;&#x4E49;&#xFF0C;&#x4EE5;&#x65B9;&#x4FBF;&#x8FDB;&#x4E00;&#x6B65;&#x5B9A;&#x5236;&#x3002;&#x6784;&#x5EFA;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>--build-arg</code> &#x6765;&#x6539;&#x53D8; <code>DOCKER_GID</code> &#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>--user jenkins:1234</code> &#x6765;&#x6539;&#x53D8;&#x8FD0;&#x884C;&#x7528;&#x6237;&#x7684;&#x8EAB;&#x4EFD;&#x3002;</p>
<p><em>&#x8FD9;&#x91CC;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>jenkins:alpine</code>&#xFF0C;&#x6362;&#x4E3A;&#x975E; <code>alpine</code> &#x7684;&#x955C;&#x50CF; <code>jenkins:latest</code> &#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</em></p>
<p>&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF08;&#x5047;&#x8BBE;&#x955C;&#x50CF;&#x540D;&#x4E3A; <code>jenkins-docker</code>&#xFF09;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t jenkins-docker .</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x6784;&#x5EFA;&#x65F6;&#x8C03;&#x6574; <code>docker</code> &#x7EC4; ID&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>--build-arg</code> &#x6765;&#x8986;&#x76D6;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t jenkins-docker --build-arg DOCKER_GID=1234 .</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C06;&#x5BBF;&#x4E3B;&#x7684; <code>/var/run/docker.sock</code> &#x6587;&#x4EF6;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x540C;&#x6837;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE;&#x800C;&#x8BA9;&#x5BB9;&#x5668;&#x5185;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <a href="https://en.wikipedia.org/wiki/Unix_domain_socket" target="_blank" rel="noopener">unix socket</a> &#x8C03;&#x7528;&#x5BBF;&#x4E3B;&#x7684; Docker &#x5F15;&#x64CE;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x542F;&#x52A8; <code>jenkins</code>&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name jenkins \</span><br><span class="line">    -d \</span><br><span class="line">    -p 8080:8080 \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    jenkins-docker</span><br></pre></td></tr></table></figure>
<p>&#x5728; <code>jenkins</code> &#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x5C31;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x6267;&#x884C; <code>docker</code> &#x547D;&#x4EE4;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>docker exec</code> &#x6765;&#x9A8C;&#x8BC1;&#x8FD9;&#x4E2A;&#x7ED3;&#x679C;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it jenkins sh</span><br><span class="line">/ $ id</span><br><span class="line">uid=1000(jenkins) gid=999(ping) groups=999(ping)</span><br><span class="line">/ $ docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:      1.12.3</span><br><span class="line"> API version:  1.24</span><br><span class="line"> Go version:   go1.6.3</span><br><span class="line"> Git commit:   6b644ec</span><br><span class="line"> Built:        Wed Oct 26 23:26:11 2016</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      1.13.0-rc2</span><br><span class="line"> API version:  1.25</span><br><span class="line"> Go version:   go1.7.3</span><br><span class="line"> Git commit:   1f9b3ef</span><br><span class="line"> Built:        Wed Nov 23 06:32:39 2016</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line">/ $</span><br></pre></td></tr></table></figure>
<h3 id="docker-rong-qi-ru-he-sui-xi-tong-yi-tong-qi-dong"><a href="#Docker-&#x5BB9;&#x5668;&#x5982;&#x4F55;&#x968F;&#x7CFB;&#x7EDF;&#x4E00;&#x540C;&#x542F;&#x52A8;&#xFF1F;" class="headerlink" title="Docker &#x5BB9;&#x5668;&#x5982;&#x4F55;&#x968F;&#x7CFB;&#x7EDF;&#x4E00;&#x540C;&#x542F;&#x52A8;&#xFF1F;"></a>Docker &#x5BB9;&#x5668;&#x5982;&#x4F55;&#x968F;&#x7CFB;&#x7EDF;&#x4E00;&#x540C;&#x542F;&#x52A8;&#xFF1F; <a href="#docker-rong-qi-ru-he-sui-xi-tong-yi-tong-qi-dong" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--restart=always</span><br></pre></td></tr></table></figure>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/run/#restart-policies-restart" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/run/#restart-policies-restart</a></p>
<h3 id="docker-stats-xian-shi-de-zhi-you-rong-qi-id-zen-me-cai-neng-xian-shi-rong-qi-ming-zi"><a href="#docker-stats-&#x663E;&#x793A;&#x7684;&#x53EA;&#x6709;&#x5BB9;&#x5668;ID&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x663E;&#x793A;&#x5BB9;&#x5668;&#x540D;&#x5B57;&#xFF1F;" class="headerlink" title="docker stats &#x663E;&#x793A;&#x7684;&#x53EA;&#x6709;&#x5BB9;&#x5668;ID&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x663E;&#x793A;&#x5BB9;&#x5668;&#x540D;&#x5B57;&#xFF1F;"></a><code>docker stats</code> &#x663E;&#x793A;&#x7684;&#x53EA;&#x6709;&#x5BB9;&#x5668;ID&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x663E;&#x793A;&#x5BB9;&#x5668;&#x540D;&#x5B57;&#xFF1F; <a href="#docker-stats-xian-shi-de-zhi-you-rong-qi-id-zen-me-cai-neng-xian-shi-rong-qi-ming-zi" class="header-anchor">#</a></h3><p>&#x5BF9;&#x4E8E;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684; <code>docker stats</code> &#x91CC;&#x53EA;&#x663E;&#x793A;&#x5BB9;&#x5668; ID&#xFF0C;&#x540E;&#x6765;&#x5373;&#x4F7F;&#x652F;&#x6301;&#x4E86; <code>--format</code>&#xFF0C;&#x4E3A;&#x4E86;&#x5411;&#x540E;&#x517C;&#x5BB9;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x5C06;&#x5176;&#x53D8;&#x4E3A;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x3002;<code>17.10</code> &#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF0C;<code>docker container stats</code> &#x9ED8;&#x8BA4;&#x5C06;&#x663E;&#x793A;&#x5BB9;&#x5668;&#x540D;&#x79F0;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x5BA2;&#x6237;&#x7AEF;&#x672C;&#x5730;&#x7684; <code>~/.docker/config.json</code> &#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x5165;&#x4E00;&#x884C;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">&quot;statsFormat&quot;</span>: <span class="string">&quot;table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.MemPerc}}\t{{.NetIO}}\t{{.BlockIO}}\t{{.PIDs}}&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x9ED8;&#x8BA4;&#x683C;&#x5F0F;&#x5C31;&#x4F1A;&#x6539;&#x4E3A;&#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x7684;&#x683C;&#x5F0F;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4E0D;&#x652F;&#x6301;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>--format</code> &#x6765;&#x6307;&#x5B9A;&#x663E;&#x793A;&#x683C;&#x5F0F;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats --format <span class="string">&quot;table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.MemPerc}}\t{{.NetIO}}\t{{.BlockIO}}\t{{.PIDs}}&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x4E3A;&#x4E00;&#x4E2A; <code>alias</code>&#xFF0C;&#x65B9;&#x4FBF;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4E0D;&#x652F;&#x6301; <code>--format</code> &#x7684;&#x8001;&#x7248;&#x672C;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats $(docker ps --format=<span class="string">&apos;{{.Names}}&apos;</span>)</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x7F3A;&#x70B9;&#x662F;&#x4E0D;&#x652F;&#x6301;&#x52A8;&#x6001;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x4F5C;&#x4E3A;&#x6301;&#x7EED;&#x89C2;&#x5BDF;&#x3002;</p>
<h3 id="wo-yong-de-shi-a-li-yun-ubuntu-14-04-zhu-ji-nei-he-huan-shi-3-13-zen-me-ban"><a href="#&#x6211;&#x7528;&#x7684;&#x662F;&#x963F;&#x91CC;&#x4E91;-Ubuntu-14-04-&#x4E3B;&#x673A;&#xFF0C;&#x5185;&#x6838;&#x8FD8;&#x662F;3-13&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x6211;&#x7528;&#x7684;&#x662F;&#x963F;&#x91CC;&#x4E91; Ubuntu 14.04 &#x4E3B;&#x673A;&#xFF0C;&#x5185;&#x6838;&#x8FD8;&#x662F;3.13&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x6211;&#x7528;&#x7684;&#x662F;&#x963F;&#x91CC;&#x4E91; <code>Ubuntu 14.04</code> &#x4E3B;&#x673A;&#xFF0C;&#x5185;&#x6838;&#x8FD8;&#x662F;<code>3.13</code>&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#wo-yong-de-shi-a-li-yun-ubuntu-14-04-zhu-ji-nei-he-huan-shi-3-13-zen-me-ban" class="header-anchor">#</a></h3><p>&#x5176;&#x5B9E; <code>Ubuntu 14.04</code> &#x5B98;&#x65B9;&#x7EF4;&#x62A4;&#x7684;&#x5185;&#x6838;&#x5DF2;&#x7ECF;&#x5230; <code>4.4</code> &#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5347;&#x7EA7;&#x5185;&#x6838;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y --install-recommends linux-generic-lts-xenial</span><br></pre></td></tr></table></figure>
<h3 id="ru-he-dong-tai-xiu-gai-nei-cun-xian-zhi"><a href="#&#x5982;&#x4F55;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF1F;"></a>&#x5982;&#x4F55;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF1F; <a href="#ru-he-dong-tai-xiu-gai-nei-cun-xian-zhi" class="header-anchor">#</a></h3><p><code>Docker 1.10</code> &#x4E4B;&#x540E;&#x652F;&#x6301;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#xFF0C;&#x4F7F;&#x7528; <code>docker update</code> &#x547D;&#x4EE4;&#xFF0C;&#x5982;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker update -m 300m</span><br></pre></td></tr></table></figure>
<h3 id="jing-chang-zai-ge-chong-docker-ming-ling-li-kan-dao-label-label-shi-shi-me-gan-shi-me-yong-de"><a href="#&#x7ECF;&#x5E38;&#x5728;&#x5404;&#x79CD;-Docker-&#x547D;&#x4EE4;&#x91CC;&#x770B;&#x5230;-label&#xFF0C;label-&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x5E72;&#x4EC0;&#x4E48;&#x7528;&#x7684;&#xFF1F;" class="headerlink" title="&#x7ECF;&#x5E38;&#x5728;&#x5404;&#x79CD; Docker &#x547D;&#x4EE4;&#x91CC;&#x770B;&#x5230; --label&#xFF0C;label &#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x5E72;&#x4EC0;&#x4E48;&#x7528;&#x7684;&#xFF1F;"></a>&#x7ECF;&#x5E38;&#x5728;&#x5404;&#x79CD; <code>Docker</code> &#x547D;&#x4EE4;&#x91CC;&#x770B;&#x5230; <code>--label</code>&#xFF0C;<code>label</code> &#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x5E72;&#x4EC0;&#x4E48;&#x7528;&#x7684;&#xFF1F; <a href="#jing-chang-zai-ge-chong-docker-ming-ling-li-kan-dao-label-label-shi-shi-me-gan-shi-me-yong-de" class="header-anchor">#</a></h3><p><code>Label</code> &#x662F;<code>&#x952E;&#x503C;&#x5BF9;</code>&#xFF0C;&#x662F; <code>metadata</code>&#xFF0C;&#x662F;&#x8D2F;&#x7A7F;&#x4E8E; <code>Docker</code> &#x5404;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x5305;&#x62EC;&#x5F15;&#x64CE;&#x3001;&#x955C;&#x50CF;&#x3001;&#x5BB9;&#x5668;&#x3001;&#x5377;&#x3001;&#x7F51;&#x7EDC;&#x3001;Swarm &#x8282;&#x70B9;&#x3001;&#x670D;&#x52A1;&#x7B49;&#x3002;</p>
<ul>
<li>&#x952E; <code>key</code>&#xFF1A;&#x683C;&#x5F0F;&#x8981;&#x6C42;&#x53EA;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x5B57;&#x6BCD;&#x548C;&#x6570;&#x5B57;&#xFF0C;&#x4EE5;&#x53CA;<code>.</code>&#xFF0C;<code>-</code>&#x3002;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C;&#x4E8E; <code>Java</code> &#x90A3;&#x79CD;&#x53CD;&#x5411;&#x57DF;&#x540D;&#x683C;&#x5F0F;&#xFF0C;&#x5982; <code>com.example.mytag</code>&#x3002;</li>
<li>&#x503C; <code>value</code>&#xFF1A;&#x683C;&#x5F0F;&#x5FC5;&#x987B;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x9664;&#x4E86;&#x666E;&#x901A;&#x5B57;&#x7B26;&#x4E32;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x662F; <code>JSON</code>, <code>XML</code>, <code>CSV</code> &#x6216;&#x8005; <code>YAML</code>&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x3002;</li>
</ul>
<p>&#x5F53;&#x8D44;&#x6E90;&#x5F88;&#x5C11;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BF9;&#x4E00;&#x4E2A;&#x4E2A;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x7BA1;&#x7406;&#x5F88;&#x591A;&#x8D44;&#x6E90;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E48;&#x505A;&#x5C31;&#x53D8;&#x5F97;&#x4E0D;&#x5927;&#x73B0;&#x5B9E;&#x3002;&#x7ECF;&#x5E38;&#x7684;&#x9700;&#x6C42;&#x662F;&#x9488;&#x5BF9;&#x67D0;&#x4E00;&#x7C7B;&#x7684;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x4F7F;&#x7528; <code>label</code> &#x6765;&#x5E2E;&#x52A9;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x5F53;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x8D44;&#x6E90;&#x7684; <code>label</code>&#xFF08;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x53EF;&#x4EE5;&#x6709;&#x5F88;&#x591A;&#x4E2A; <code>label</code>&#xFF09;&#xFF0C;&#x800C;&#x5F53;&#x521B;&#x5EFA;&#x4E86;&#x5F88;&#x591A;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FC7;&#x6EE4; <code>label</code> &#x7684;&#x952E;&#x3001;&#x503C;&#x6765;&#x5F97;&#x5230;&#x6240;&#x9700;&#x7684;&#x8D44;&#x6E90;&#x5217;&#x8868;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>docker run</code> &#x8FD0;&#x884C;&#x4E00;&#x5806;&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x901A;&#x8FC7; <code>label</code> &#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x662F;&#x67B6;&#x6784;&#x4E2D;&#x7684;&#x54EA;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<ul>
<li>&#x524D;&#x7AEF;&#xFF1A;<code>--label type=frontend</code></li>
<li>&#x4E2D;&#x95F4;&#x4EF6;&#xFF1A;<code>--label type=middleware</code></li>
<li>&#x5B58;&#x50A8;&#xFF1A;<code>--label type=storage</code></li>
</ul>
<p>&#x5728;&#x540E;&#x671F;&#x7EF4;&#x62A4;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FC7;&#x6EE4;&#x663E;&#x793A;&#x60F3;&#x8981;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x53EA;&#x60F3;&#x770B;&#x524D;&#x7AEF;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x60C5;&#x51B5;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps --filter label=<span class="built_in">type</span>=frontend</span><br></pre></td></tr></table></figure>
<p>&#x800C;&#x4E14;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x548C;&#x5176;&#x5B83;&#x547D;&#x4EE4;&#x914D;&#x5408;&#x64CD;&#x4F5C;&#x8FD9;&#x7EC4;&#x5BB9;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505C;&#x6B62;&#x6240;&#x6709;&#x524D;&#x7AEF;&#x5BB9;&#x5668;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker ps -f label=<span class="built_in">type</span>=frontend)</span><br></pre></td></tr></table></figure>
<p>&#x4F7F;&#x7528; <code>label</code> &#x5728;&#x96C6;&#x7FA4;&#x8C03;&#x5EA6;&#x4E2D;&#x4E5F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x540C;&#x7684; Docker &#x4E3B;&#x673A;&#x7684;&#x5F15;&#x64CE; <code>dockerd</code> &#x53C2;&#x6570;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7; <code>label</code> &#x6765;&#x52A0;&#x5165;&#x5B58;&#x50A8;&#x7C7B;&#x578B;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x5B58;&#x50A8;&#x7C7B;&#x578B;&#x4E3A; <code>SSD</code>&#xFF1A;<code>--label storage=ssd</code></li>
<li>&#x5B58;&#x50A8;&#x7C7B;&#x578B;&#x4E3A; <code>HDD</code>&#xFF1A;<code>--label storage=hdd</code></li>
</ul>
<p>&#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x6211;&#x4EEC;&#x81EA;&#x7136;&#x5E0C;&#x671B;&#x8DD1;&#x5728; <code>SSD</code> &#x4E0A;&#x4EE5;&#x83B7;&#x5F97;&#x66F4;&#x5927;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x800C;&#x65E5;&#x5FD7;&#x3001;&#x5907;&#x4EFD;&#x670D;&#x52A1;&#x5219;&#x5E0C;&#x671B;&#x8DD1;&#x5728; <code>HDD</code> &#x4E0A;&#x83B7;&#x5F97;&#x66F4;&#x9AD8;&#x7684;&#x5BB9;&#x91CF;&#x3002;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x505A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker service create \</span><br><span class="line">    --name mysql \</span><br><span class="line">    --constraint <span class="string">&apos;engine.labels.storage == ssd&apos;</span> \</span><br><span class="line">    mysql</span><br></pre></td></tr></table></figure>
<h4 id="tian-jia-label-yi-ji-guo-lu"><a href="#&#x6DFB;&#x52A0;label&#x4EE5;&#x53CA;&#x8FC7;&#x6EE4;" class="headerlink" title="&#x6DFB;&#x52A0;label&#x4EE5;&#x53CA;&#x8FC7;&#x6EE4;"></a>&#x6DFB;&#x52A0;<code>label</code>&#x4EE5;&#x53CA;&#x8FC7;&#x6EE4; <a href="#tian-jia-label-yi-ji-guo-lu" class="header-anchor">#</a></h4><p>&#x6DFB;&#x52A0; <code>label</code> &#x5927;&#x591A;&#x683C;&#x5F0F;&#x90FD;&#x662F;&#x5728;&#x521B;&#x5EFA;&#x3001;&#x4FEE;&#x6539;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; <code>--label &lt;key&gt;=&lt;value&gt;</code> &#x53C2;&#x6570;&#xFF08;&#x90E8;&#x5206;&#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x4E86; <code>-l</code> &#x7F29;&#x5199;&#x5F62;&#x5F0F;&#xFF09;&#x3002;<code>value</code> &#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A; <code>--label &lt;key&gt;</code>&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x591A;&#x7EC4; <code>label</code>&#xFF0C;&#x53EA;&#x9700;&#x591A;&#x7EC4; <code>--label</code> &#x5373;&#x53EF;&#x3002;</p>
<p>&#x8FC7;&#x6EE4; <code>label</code> &#x5219;&#x5927;&#x591A;&#x53D1;&#x751F;&#x5728;&#x5217;&#x8868;&#x547D;&#x4EE4;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528; <code>--filter label=&lt;key&gt;=&lt;value&gt;</code>&#xFF0C;&#x6216;&#x8005;&#x5BF9;&#x4E8E;&#x4E0D;&#x5173;&#x5FC3; <code>value</code> &#x7684;&#x60C5;&#x51B5;&#xFF0C;<code>--filter label=&lt;key&gt;</code>&#xFF08;&#x90E8;&#x5206;&#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x4E86; <code>-f</code> &#x7684;&#x7F29;&#x5199;&#x5F62;&#x5F0F;&#xFF09;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x5217;&#x51FA;&#x4E86;&#x652F;&#x6301; <code>label</code> &#x7684;&#x547D;&#x4EE4;&#xFF08;&#x9664;&#x975E;&#x7279;&#x6B8A;&#x58F0;&#x660E;&#xFF0C;&#x201D;&#x6DFB;&#x52A0;&#x201D;&#x547D;&#x4EE4;&#x4F7F;&#x7528; <code>--label</code> &#x9009;&#x9879;&#x6DFB;&#x52A0; <code>label</code>&#xFF1B;&#x201D;&#x8FC7;&#x6EE4;&#x201D;&#x547D;&#x4EE4;&#x4F7F;&#x7528; <code>--filter</code> &#x8FC7;&#x6EE4;<code>label</code>&#xFF09;&#xFF1A;</p>
<ul>
<li>Docker &#x5F15;&#x64CE;<ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>dockerd</code>&#xFF1A; <a href="https://docs.docker.com/engine/reference/commandline/dockerd/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/dockerd/</a></li>
</ul>
</li>
<li>&#x955C;&#x50CF;<ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<ul>
<li><code>docker build</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/build/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/build/</a></li>
<li><code>Dockerfile</code> &#x4E2D;&#x7684; <code>LABEL</code>&#xFF08;&#x4F1A;&#x7EE7;&#x627F;<code>FROM</code>&#x955C;&#x50CF;&#x7684;<code>LABEL</code>&#xFF09;&#xFF1A;<a href="https://docs.docker.com/engine/reference/builder/#/label" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/builder/#/label</a></li>
</ul>
</li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker images</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/images/#/filtering" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/images/#/filtering</a></li>
</ul>
</li>
<li>&#x5BB9;&#x5668;<ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>docker create</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/create/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/create/</a><ul>
<li>&#x9664;&#x4E86; <code>--label</code> &#x5916;&#xFF0C;<code>docker create</code> &#x8FD8;&#x652F;&#x6301;&#x4F7F;&#x7528;&#x9009;&#x9879; <code>--label-file</code> &#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x8F7D; <code>label</code></li>
</ul>
</li>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>docker run</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/run/#/set-metadata-on-container--l---label---label-file" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/run/#/set-metadata-on-container--l---label---label-file</a><ul>
<li>&#x9664;&#x4E86; <code>--label</code> &#x5916;&#xFF0C;<code>docker run</code> &#x8FD8;&#x652F;&#x6301;&#x4F7F;&#x7528;&#x9009;&#x9879; <code>--label-file</code> &#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x8F7D; <code>label</code></li>
</ul>
</li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker ps</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/ps/#/label" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/ps/#/label</a></li>
</ul>
</li>
<li>&#x5377;<ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>docker volume create</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/volume_create/</a></li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker volume ls</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/volume_ls/#/filtering" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/volume_ls/#/filtering</a></li>
</ul>
</li>
<li>&#x7F51;&#x7EDC;<ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>docker network create</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/network_create/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/network_create/</a></li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker network ls</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/network_ls/#/filtering" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/network_ls/#/filtering</a></li>
</ul>
</li>
<li>Swarm &#x8282;&#x70B9;<ul>
<li><code>docker node update</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/node_update/#/add-label-metadata-to-a-node" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/node_update/#/add-label-metadata-to-a-node</a><ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>--label-add</code></li>
<li>&#x5220;&#x9664;&#xFF1A;<code>--label-rm</code></li>
</ul>
</li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker node ls</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/node_ls/#/filtering" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/node_ls/#/filtering</a></li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker node ps</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/node_ps/#/label" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/node_ps/#/label</a></li>
</ul>
</li>
<li>&#x670D;&#x52A1;<ul>
<li>&#x6DFB;&#x52A0;&#xFF1A;<code>docker service create</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/service_create/#/set-metadata-on-a-service--l---label" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/service_create/#/set-metadata-on-a-service--l---label</a><ul>
<li>&#x9664;&#x4E86; <code>--label</code> &#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>--container-label</code> &#x6765;&#x6DFB;&#x52A0;&#x5BB9;&#x5668; <code>label</code></li>
</ul>
</li>
<li><code>docker service update</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/service_update/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/service_update/</a><ul>
<li>&#x6DFB;&#x52A0;&#x5BB9;&#x5668; <code>label</code>&#xFF1A;<code>--container-label-add</code></li>
<li>&#x5220;&#x9664;&#x5BB9;&#x5668; <code>label</code>&#xFF1A;<code>--container-label-rm</code></li>
<li>&#x6DFB;&#x52A0;&#x670D;&#x52A1; <code>label</code>&#xFF1A;<code>--label-add</code></li>
<li>&#x5220;&#x9664;&#x670D;&#x52A1; <code>label</code>&#xFF1A;<code>--label-rm</code></li>
</ul>
</li>
<li>&#x8FC7;&#x6EE4;&#xFF1A;<code>docker service ls</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/service_ls/#/label" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/service_ls/#/label</a></li>
</ul>
</li>
</ul>
<p>&#x9664;&#x4E86;&#x4E0A;&#x8FF0;&#x8D44;&#x6E90;&#x5916;&#xFF0C;<code>docker events</code> &#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>label</code> &#x8FC7;&#x6EE4;&#x7ED3;&#x679C;&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/events/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/events/</a></p>
<h4 id="ji-qun-diao-du-yue-shu"><a href="#&#x96C6;&#x7FA4;&#x8C03;&#x5EA6;&#x7EA6;&#x675F;" class="headerlink" title="&#x96C6;&#x7FA4;&#x8C03;&#x5EA6;&#x7EA6;&#x675F;"></a>&#x96C6;&#x7FA4;&#x8C03;&#x5EA6;&#x7EA6;&#x675F; <a href="#ji-qun-diao-du-yue-shu" class="header-anchor">#</a></h4><ul>
<li>&#x4E00;&#x4EE3; Swarm&#xFF1A;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6DFB;&#x52A0;&#x7EA6;&#x675F;<ul>
<li><code>docker run</code>&#xFF1A;<code>-e constraint:storage==sdd</code>&#xFF1A;<a href="https://docs.docker.com/swarm/scheduler/filter/#/how-to-write-filter-expressions" target="_blank" rel="noopener">https://docs.docker.com/swarm/scheduler/filter/#/how-to-write-filter-expressions</a></li>
<li><code>docker-compose.yml</code>&#xFF1A;&#x4F7F;&#x7528; <code>environment</code> &#x6765;&#x8FDB;&#x884C;&#x7EA6;&#x675F;&#xFF1A;<a href="https://docs.docker.com/compose/swarm/#/manual-scheduling" target="_blank" rel="noopener">https://docs.docker.com/compose/swarm/#/manual-scheduling</a></li>
</ul>
</li>
</ul>
<p>&#x5982;&#xFF1A;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;2&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">        <span class="attr">environment:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;constraint:storage==ssd&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&#x4E8C;&#x4EE3; Swarm<ul>
<li><code>docker service create</code>&#xFF1A;<code>--constraint value</code>&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/service_create/#/specify-service-constraints---constraint" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/service_create/#/specify-service-constraints---constraint</a></li>
</ul>
</li>
</ul>
<p>&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528; <code>Swarm &#x8282;&#x70B9;</code> &#x7684; <code>label</code> &#x8FDB;&#x884C;&#x7EA6;&#x675F;&#xFF08;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x6B21;&#x7528;&#x7684;&#x4E0D;&#x662F;<code>&#x5F15;&#x64CE;</code>&#x7684;<code>label</code>&#xFF09;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker service create \</span><br><span class="line">    --name web \</span><br><span class="line">    --constraint <span class="string">&apos;node.labels.type == frontend&apos;</span> \</span><br><span class="line">    nginx</span><br></pre></td></tr></table></figure>
<h3 id="du-shuo-bu-yao-yong-root-qu-yun-xing-fu-wu-dan-wo-kan-dao-de-dockerfile-du-shi-yong-root-qu-yun-xing-zhe-bu-an-quan-ba"><a href="#&#x90FD;&#x8BF4;&#x4E0D;&#x8981;&#x7528;-root-&#x53BB;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x6211;&#x770B;&#x5230;&#x7684;-Dockerfile-&#x90FD;&#x662F;&#x7528;-root-&#x53BB;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x5427;&#xFF1F;" class="headerlink" title="&#x90FD;&#x8BF4;&#x4E0D;&#x8981;&#x7528; root &#x53BB;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x6211;&#x770B;&#x5230;&#x7684; Dockerfile &#x90FD;&#x662F;&#x7528; root &#x53BB;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x5427;&#xFF1F;"></a>&#x90FD;&#x8BF4;&#x4E0D;&#x8981;&#x7528; <code>root</code> &#x53BB;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x6211;&#x770B;&#x5230;&#x7684; <code>Dockerfile</code> &#x90FD;&#x662F;&#x7528; <code>root</code> &#x53BB;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x5427;&#xFF1F; <a href="#du-shuo-bu-yao-yong-root-qu-yun-xing-fu-wu-dan-wo-kan-dao-de-dockerfile-du-shi-yong-root-qu-yun-xing-zhe-bu-an-quan-ba" class="header-anchor">#</a></h3><p>&#x5E76;&#x975E;&#x6240;&#x6709;&#x5B98;&#x65B9;&#x955C;&#x50CF;&#x7684; <code>Dockerfile</code> &#x90FD;&#x662F;&#x7528; <code>root</code> &#x7528;&#x6237;&#x53BB;&#x6267;&#x884C;&#x7684;&#x3002;&#x6BD4;&#x5982; <code>mysql</code> &#x955C;&#x50CF;&#x7684;&#x6267;&#x884C;&#x8EAB;&#x4EFD;&#x5C31;&#x662F; <code>mysql</code> &#x7528;&#x6237;&#xFF1B;<code>redis</code> &#x955C;&#x50CF;&#x7684;&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x7528;&#x6237;&#x5C31;&#x662F; <code>redis</code>&#xFF1B;<code>mongo</code> &#x955C;&#x50CF;&#x5185;&#x7684;&#x670D;&#x52A1;&#x6267;&#x884C;&#x8EAB;&#x4EFD;&#x662F; <code>mongo</code> &#x7528;&#x6237;&#xFF1B;<code>jenkins</code> &#x955C;&#x50CF;&#x5185;&#x662F; <code>jenkins</code> &#x7528;&#x6237;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7B49;&#x7B49;&#x3002;&#x6240;&#x4EE5;&#x8BF4; &#x201C;&#x90FD;&#x662F;&#x7528; <code>root</code> &#x53BB;&#x8FD0;&#x884C;&#x201D; &#x662F;&#x4E0D;&#x5BA2;&#x89C2;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x5728;<strong>&#x5BB9;&#x5668;&#x5185;</strong>&#x4F7F;&#x7528; <code>root</code> &#x5C31;&#x975E;&#x5E38;&#x5371;&#x9669;&#x3002;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>root</code> &#x548C;&#x5BBF;&#x4E3B;&#x4E0A;&#x7684; <code>root</code> &#x4E0D;&#x540C;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>root</code> &#x867D;&#x7136; <code>uid</code> &#x4E5F;&#x9ED8;&#x8BA4;&#x4E3A; <code>0</code>&#xFF0C;&#x4F46;&#x662F;&#x5374;&#x5904;&#x4E8E;&#x4E00;&#x4E2A;&#x9694;&#x79BB;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x800C;&#x4E14;&#x88AB;&#x53BB;&#x6389;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x7279;&#x6743;&#x3002;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>root</code> &#x662F;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x7279;&#x6743;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x5371;&#x9669;&#x7684;&#x64CD;&#x4F5C;&#x57FA;&#x672C;&#x90FD;&#x65E0;&#x6CD5;&#x6267;&#x884C;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6253;&#x7834;&#x8FD9;&#x4E2A;&#x5B89;&#x5168;&#x4FDD;&#x62A4;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x53E6;&#x5916;&#x4E00;&#x56DE;&#x4E8B;&#x4E86;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x6302;&#x8F7D;&#x4E86;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x7ED9;&#x5BB9;&#x5668;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6253;&#x901A;&#x4E86;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>root</code> &#x64CD;&#x63A7;&#x5BBF;&#x4E3B;&#x7684;&#x4E00;&#x4E2A;&#x901A;&#x9053;&#xFF0C;&#x4F7F;&#x5F97;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>root</code> &#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6240;&#x6302;&#x8F7D;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x5F53;&#x524D;&#x7248;&#x672C;&#x7684; Docker &#x4E2D;&#xFF0C;<strong>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;</strong>&#x5BB9;&#x5668;&#x7684; <code>user namespace</code> &#x5E76;&#x672A;&#x5F00;&#x542F;&#xFF0C;&#x6240;&#x4EE5;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x7528;&#x6237;&#x548C;&#x5BBF;&#x4E3B;&#x7528;&#x6237;&#x5171;&#x4EAB; <code>uid</code> &#x7A7A;&#x95F4;&#x3002;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>uid</code> &#x4E3A; <code>0</code> &#x7684; <code>root</code>&#xFF0C;&#x5C31;&#x88AB;&#x7CFB;&#x7EDF;&#x89C6;&#x4E3A; <code>uid=0</code> &#x7684;&#x5BBF;&#x4E3B; <code>root</code>&#xFF0C;&#x56E0;&#x6B64;&#x78C1;&#x76D8;&#x8BFB;&#x5199;&#x65F6;&#xFF0C;&#x5177;&#x6709;&#x5BBF;&#x4E3B; <code>root</code> &#x540C;&#x7B49;&#x8BFB;&#x5199;&#x6743;&#x9650;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x4E00;&#x822C;&#x4E0D;&#x63A8;&#x8350;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#x3001;&#x7279;&#x522B;&#x662F;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x7CFB;&#x7EDF;&#x76EE;&#x5F55;&#x7684;&#x539F;&#x56E0;&#x4E4B;&#x4E00;&#x3002;&#x8FD9;&#x4E00;&#x5207;&#x53EA;&#x8981;&#x5B9A;&#x5236;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x4E0D;&#x4F7F;&#x7528; <code>root</code> &#x542F;&#x52A8;&#x670D;&#x52A1;&#x5C31;&#x6CA1;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x4E0A;&#x9762;&#x8BF4;&#x7684;&#x95EE;&#x9898;&#x53EA;&#x662F;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; <code>user namespace</code> &#x4E0D;&#x4F1A;&#x542F;&#x7528;&#x7684;&#x95EE;&#x9898;&#x3002;<code>dockerd</code> &#x6709;&#x4E00;&#x4E2A; <code>--userns-remap</code> &#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x8981;&#x914D;&#x7F6E;&#x4E86;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>uid</code> &#x662F;&#x72EC;&#x7ACB;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>uid</code> &#x53D8;&#x5230;&#x5BBF;&#x4E3B;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x88AB; <code>remap</code> &#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x7684; <code>uid=0</code> &#x7684; <code>root</code> &#x5C06;&#x5B8C;&#x5168;&#x8DDF; <code>root</code> &#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5173;&#x7CFB;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x4E2A;&#x666E;&#x901A;&#x7528;&#x6237;&#x800C;&#x5DF2;&#x3002;</p>
<p>&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8BF7;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;</p>
<ul>
<li><code>--userns-remap</code> &#x7684;&#x4ECB;&#x7ECD;&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/dockerd/#/daemon-user-namespace-options" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/dockerd/#/daemon-user-namespace-options</a></li>
<li>Docker &#x5B89;&#x5168;&#xFF1A;<a href="https://docs.docker.com/engine/security/security/" target="_blank" rel="noopener">https://docs.docker.com/engine/security/security/</a></li>
</ul>
<h3 id="wo-zai-rong-qi-li-yun-xing-systemctl-start-xxx-zen-me-bao-cuo-a"><a href="#&#x6211;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C;-systemctl-start-xxx-&#x600E;&#x4E48;&#x62A5;&#x9519;&#x554A;&#xFF1F;" class="headerlink" title="&#x6211;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C; systemctl start xxx &#x600E;&#x4E48;&#x62A5;&#x9519;&#x554A;&#xFF1F;"></a>&#x6211;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#x8FD0;&#x884C; <code>systemctl start xxx</code> &#x600E;&#x4E48;&#x62A5;&#x9519;&#x554A;&#xFF1F; <a href="#wo-zai-rong-qi-li-yun-xing-systemctl-start-xxx-zen-me-bao-cuo-a" class="header-anchor">#</a></h3><p>&#x5982;&#x679C;&#x5728;&#x5BB9;&#x5668;&#x5185;&#x4F7F;&#x7528; <code>systemctl</code> &#x547D;&#x4EE4;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x53D1;&#x73B0;&#x78B0;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed to get D-Bus connection: Operation not permitted</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x5F88;&#x6B63;&#x5E38;&#xFF0C;&#x56E0;&#x4E3A; <code>systemd</code> &#x662F;&#x5B8C;&#x6574;&#x7CFB;&#x7EDF;&#x7684;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x3001;&#x7EF4;&#x62A4;&#x7684;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#xFF0C;&#x800C;&#x4E14;&#x9700;&#x8981;&#x7279;&#x6743;&#x53BB;&#x6267;&#x884C;&#x3002;&#x4F46;&#x662F;&#x5BB9;&#x5668;&#x4E0D;&#x662F;&#x5B8C;&#x6574;&#x7CFB;&#x7EDF;&#xFF0C;&#x65E2;&#x6CA1;&#x6709;&#x914D;&#x5408;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x7279;&#x6743;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x7136;&#x7528;&#x4E0D;&#x4E86;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x78B0;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x53EA;&#x80FD;&#x518D;&#x6B21;&#x63D0;&#x9192;&#x4F60;&#xFF0C;<strong>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;</strong>&#x3002;&#x8BD5;&#x56FE;&#x5728;&#x5BB9;&#x5668;&#x91CC;&#x6267;&#x884C; <code>systemctl</code> &#x547D;&#x4EE4;&#x7684;&#xFF0C;&#x5927;&#x591A;&#x90FD;&#x662F;&#x8FD8;&#x6CA1;&#x6709;&#x641E;&#x660E;&#x767D;&#x5BB9;&#x5668;&#x548C;&#x865A;&#x62DF;&#x673A;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x56E0;&#x4E3A;&#x770B;&#x5230;&#x4E86;&#x53EF;&#x4EE5;&#x6709; Shell&#xFF0C;&#x5C31;&#x4EE5;&#x4E3A;&#x8FD9;&#x662F;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x8BD5;&#x56FE;&#x91CD;&#x590D;&#x81EA;&#x5DF1;&#x5728;&#x5B8C;&#x6574;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x4F53;&#x9A8C;&#x3002;&#x8FD9;&#x662F;&#x7528;&#x6CD5;&#x9519;&#x8BEF;&#xFF0C;<strong>&#x4E0D;&#x8981;&#x628A; Docker &#x5F53;&#x505A;&#x865A;&#x62DF;&#x673A;&#x53BB;&#x7528;&#xFF0C;&#x5BB9;&#x5668;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x7528;&#x6CD5;</strong>&#x3002;</p>
<blockquote>
<p>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5BB9;&#x5668;&#x53EA;&#x662F;&#x53D7;&#x9650;&#x8FDB;&#x7A0B;&#x3002;</p>
</blockquote>
<p>&#x5BB9;&#x5668;&#x5185;&#x6839;&#x672C;&#x4E0D;&#x9700;&#x8981;&#x540E;&#x53F0;&#x670D;&#x52A1;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x670D;&#x52A1;&#x8C03;&#x5EA6;&#x548C;&#x7EF4;&#x62A4;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x4E0D;&#x9700;&#x8981; <code>systemd</code>&#x3002;&#x5BB9;&#x5668;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x4E3B;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;&#x3002;&#x5BB9;&#x5668;&#x7684;&#x751F;&#x5B58;&#x5468;&#x671F;&#x5C31;&#x662F;&#x56F4;&#x7ED5;&#x7740;&#x8FD9;&#x4E2A;&#x4E3B;&#x8FDB;&#x7A0B;&#x800C;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6240;&#x8BD5;&#x56FE;&#x542F;&#x52A8;&#x7684;&#x540E;&#x53F0;&#x670D;&#x52A1;&#xFF0C;&#x5E94;&#x8BE5;&#x6539;&#x4E3A;&#x76F4;&#x63A5;&#x5728;&#x524D;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x6839;&#x672C;&#x4E0D;&#x9700;&#x8981;&#x4E5F;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>systemctl</code> &#x547D;&#x4EE4;&#x53BB;&#x5728;&#x540E;&#x53F0;&#x52A0;&#x8F7D;&#x3002;&#x65E5;&#x5FD7;&#x4E4B;&#x7C7B;&#x7684;&#x4E5F;&#x662F;&#x76F4;&#x63A5;&#x4ECE; <code>stdout</code>/<code>stderr</code> &#x8F93;&#x51FA;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8D70; <code>journald</code>&#x3002;</p>
<h3 id="rong-qi-nei-de-shi-jian-he-su-zhu-bu-yi-zhi-zen-me-tong-bu-a"><a href="#&#x5BB9;&#x5668;&#x5185;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x5BBF;&#x4E3B;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x600E;&#x4E48;&#x540C;&#x6B65;&#x554A;&#xFF1F;" class="headerlink" title="&#x5BB9;&#x5668;&#x5185;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x5BBF;&#x4E3B;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x600E;&#x4E48;&#x540C;&#x6B65;&#x554A;&#xFF1F;"></a>&#x5BB9;&#x5668;&#x5185;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x5BBF;&#x4E3B;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x600E;&#x4E48;&#x540C;&#x6B65;&#x554A;&#xFF1F; <a href="#rong-qi-nei-de-shi-jian-he-su-zhu-bu-yi-zhi-zen-me-tong-bu-a" class="header-anchor">#</a></h3><p>&#x95EE;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x4EBA;&#x5F80;&#x5F80;&#x6DF7;&#x6DC6;&#x4E86;<strong>&#x65F6;&#x95F4;</strong>&#x548C;<strong>&#x65F6;&#x533A;</strong>&#x7684;&#x6982;&#x5FF5;&#x3002;</p>
<p><strong>&#x65F6;&#x95F4;</strong>&#x662F;&#x4ECE; <code>epoch</code> &#x5230;&#x5F53;&#x524D;&#x7684;&#x79D2;&#x6570;&#x6216;&#x8005;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x5168;&#x7403;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x662F;&#x7EDD;&#x5BF9;&#x503C;&#xFF1B;&#x800C;<strong>&#x65F6;&#x533A;</strong>&#x5219;&#x662F;&#x7531;&#x4E8E;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x5DEE;&#x5F02;&#x3001;&#x884C;&#x653F;&#x533A;&#x5212;&#x5BFC;&#x81F4;&#x5404;&#x5730;&#x663E;&#x793A;&#x65F6;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x3002;</p>
<p>&#x5BF9;&#x4E8E; Docker &#x5BB9;&#x5668;&#x800C;&#x8A00;&#xFF0C;&#x6839;&#x672C;&#x4E0D;&#x5B58;&#x5728;&#x5BBF;&#x4E3B;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x95F4;&#x5DEE;&#x5F02;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5185;&#x6838;&#x3001;&#x540C;&#x4E00;&#x4E2A;&#x65F6;&#x949F;&#xFF0C;&#x4E8C;&#x8005;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x6839;&#x672C;&#x4E0D;&#x5B58;&#x5728;&#x540C;&#x6B65;&#x95EE;&#x9898;&#x3002;&#x8FD8;&#x662F;&#x90A3;&#x53E5;&#x8BDD; <strong>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;</strong>&#x3002;</p>
<p>&#x6240;&#x770B;&#x5230;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x5982;&#x679C;&#x7EC6;&#x5FC3;&#x4E00;&#x70B9;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#x5176;&#x5B9E;&#x6839;&#x672C;&#x4E0D;&#x662F;<strong>&#x65F6;&#x95F4;</strong>&#x540C;&#x6B65;&#x95EE;&#x9898;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it ubuntu bash</span><br><span class="line">root@08c6ad41f343:/<span class="comment"># date</span></span><br><span class="line">Tue Dec 13 01:36:37 UTC 2016</span><br></pre></td></tr></table></figure>
<p>&#x6CE8;&#x610F;&#x5230; <code>UTC</code> &#x4E86;&#x4E48;&#xFF0C;&#x8FD9;&#x662F;&#x8BF4;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x56FD;&#x9645;&#x6807;&#x51C6; <code>0 &#x65F6;&#x533A;</code> &#x7684;&#x65F6;&#x95F4;&#x663E;&#x793A;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x53EA;&#x662F;&#x663E;&#x793A;&#x6240;&#x7528;&#x7684;&#x65F6;&#x533A;&#x8BBE;&#x7F6E;&#x5DEE;&#x5F02;&#x95EE;&#x9898;&#x3002;&#x800C;&#x4E14;&#x4E4B;&#x524D;&#x5982;&#x679C;&#x7A0D;&#x5FAE;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x6240;&#x8C13;&#x65F6;&#x95F4;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6574;&#x6574;&#x5DEE;&#x4E86; <code>8</code> &#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x8FD8;&#x8BB0;&#x5F97;&#x4E2D;&#x5B66;&#x5730;&#x7406;&#x8BFE;&#x4E0A;&#x8BB2;&#x7684;&#x4E2D;&#x56FD;&#x65F6;&#x533A;&#x662F;&#x591A;&#x5C11;&#x4E48;&#xFF1F;&#x662F; <code>+8 &#x65F6;&#x533A;</code>&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x7136;&#x548C; <code>0 &#x65F6;&#x533A;</code> &#x5DEE;&#x4E86; <code>8</code> &#x4E2A;&#x5C0F;&#x65F6;&#x3002;&#x5E94;&#x8BE5;&#x5F88;&#x5FEB;&#x5C31;&#x610F;&#x8BC6;&#x5230;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x65F6;&#x533A;&#x8BBE;&#x9519;&#x4E86;&#xFF08;&#x6216;&#x8005;&#x5077;&#x61D2;&#x6CA1;&#x8BBE;&#xFF09;&#x5BFC;&#x81F4;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8BBE;&#x7F6E;&#x65F6;&#x533A;&#x5373;&#x53EF;&#x3002;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x76F4;&#x63A5;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>TZ</code> &#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it -e TZ=Asia/Shanghai debian bash</span><br><span class="line">root@8e6d6c588328:/<span class="comment"># date</span></span><br><span class="line">Tue Dec 13 09:41:21 CST 2016</span><br></pre></td></tr></table></figure>
<p>&#x770B;&#x5230;&#x4E86;&#x4E48;&#xFF1F;&#x65F6;&#x533A;&#x8C03;&#x6574;&#x5230;&#x4E86; <code>CST</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;<code>China Standard Time - &#x4E2D;&#x56FD;&#x6807;&#x51C6;&#x65F6;&#x95F4;</code>&#xFF0C;&#x56E0;&#x6B64;&#x663E;&#x793A;&#x5C31;&#x6B63;&#x5E38;&#x4E86;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x5E76;&#x975E;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#x90FD;&#x53EF;&#x4EE5;&#x5982;&#x6B64;&#x65B9;&#x4FBF;&#x7684;&#x8BBE;&#x7F6E;&#x65F6;&#x533A;&#x3002;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>TZ=Asia/Shanghai</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4FEE;&#x6539;&#x65F6;&#x533A;&#x7684;&#x7CFB;&#x7EDF;&#x6709;&#xFF1A;</p>
<ul>
<li><code>centos</code> (<code>5</code>, <code>6</code>, <code>7</code>)</li>
<li><code>debian</code> (<code>7</code>, <code>8</code>, <code>9</code>)</li>
<li><code>fedora</code> (<code>24</code>, <code>25</code>, <code>26</code>)</li>
<li><code>ubuntu</code> (<code>14.04</code>)</li>
</ul>
<p>&#x800C;&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x7CFB;&#x7EDF;&#x53EF;&#x80FD;&#x51FA;&#x4E8E;&#x955C;&#x50CF;&#x4F53;&#x79EF;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x53BB;&#x6389;&#x4E86;&#x65F6;&#x533A;&#x7684;&#x8F6F;&#x4EF6;&#x5305; <code>tzdata</code>&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5728; <code>Dockerfile</code> &#x4E2D;&#x5148;&#x884C;&#x5B89;&#x88C5;&#x65F6;&#x533A;&#x5305;&#x3002;</p>
<ul>
<li><code>ubuntu</code>: (<code>16.04</code>, <code>17.04</code>, <code>17.10</code>) (~15MB)<ul>
<li><code>Dockerfile</code>:</li>
</ul>
</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -xe \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get update \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get install tzdata locales \</span></span><br><span class="line"><span class="bash">  &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>alpine</code> (~1.3MB)<ul>
<li><code>Dockerfile</code>: <code>RUN apk --no-cache add tzdata</code></li>
</ul>
</li>
<li><code>opensuse</code> (~12MB)<ul>
<li><code>Dockerfile</code>:</li>
</ul>
</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -xe \</span></span><br><span class="line"><span class="bash">    &amp;&amp; zypper --non-interactive refresh \</span></span><br><span class="line"><span class="bash">    &amp;&amp; zypper --non-interactive -qn install --no-recommends timezone \</span></span><br><span class="line"><span class="bash">    &amp;&amp; zypper --non-interactive clean -a</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>clearlinux</code> (~280MB &#x2026;&#x1F602;)<ul>
<li><code>Dockerfile</code>:</li>
</ul>
</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -xe \</span></span><br><span class="line"><span class="bash">    &amp;&amp; swupd bundle-add sysadmin-basic \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/swupd/*</span></span><br></pre></td></tr></table></figure>
<p>&#x4E0A;&#x9762;&#x5217;&#x8868;&#x9664;&#x4E86;&#x5217;&#x51FA;&#x7CFB;&#x7EDF;&#x5916;&#xFF0C;&#x8FD8;&#x7ED9;&#x51FA;&#x4E86;&#x6BCF;&#x4E2A;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5230; <code>Dockerfile</code> &#x7684;&#x5B89;&#x88C5;&#x5305;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x53CA;&#x5B89;&#x88C5;&#x540E;&#x955C;&#x50CF;&#x4F53;&#x79EF;&#x589E;&#x52A0;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5176;&#x4E2D; <code>clearlinux</code> &#x4E0D;&#x80FD;&#x5355;&#x4E2A;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x6240;&#x4EE5;&#x4F53;&#x79EF;&#x589E;&#x52A0;&#x7684;&#x6709;&#x4E9B;&#x5938;&#x5F20;&#xFF0C;&#x56E0;&#x6B64;&#x66F4;&#x597D;&#x5730;&#x529E;&#x6CD5;&#x662F;&#x76F4;&#x63A5; <code>COPY</code> &#x65F6;&#x533A;&#x4FE1;&#x606F;&#x8FDB;&#x955C;&#x50CF;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;<code>ubuntu:16.04</code> &#x4EE5;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5728; 2017&#x5E74;4&#x6708;10 &#x65E5;&#x4EE5;&#x540E;&#xFF0C;&#x5DF2;&#x7ECF;&#x53BB;&#x9664; <code>tzdata</code>&#xFF0C;&#x56E0;&#x6B64;&#x8981;&#x6539;&#x53D8;&#x5176;&#x65F6;&#x533A;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x65F6;&#x533A;&#x5B89;&#x88C5;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;<strong>&#x4E0D;&#x662F;</strong>&#x50CF;&#x4EE5;&#x524D;&#x90A3;&#x6837;&#x53EA;&#x9700;&#x914D;&#x7F6E; <code>TZ</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5373;&#x53EF;&#x3002;<br>&#x4E0D;&#x8FC7;&#x5927;&#x90E8;&#x5206;<strong>&#x5B98;&#x65B9;&#x955C;&#x50CF;</strong>&#x662F;&#x57FA;&#x4E8E; <code>debian</code> &#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4EEC;<strong>&#x4E0D;&#x53D7;&#x5F71;&#x54CD;</strong>&#x3002;</p>
<p>&#x53C2;&#x8003; issue:</p>
<ul>
<li><a href="https://bugs.launchpad.net/cloud-images/+bug/1682622" target="_blank" rel="noopener">https://bugs.launchpad.net/cloud-images/+bug/1682622</a></li>
<li><a href="https://bugs.launchpad.net/cloud-images/+bug/1682305" target="_blank" rel="noopener">https://bugs.launchpad.net/cloud-images/+bug/1682305</a></li>
<li><a href="https://github.com/docker-library/official-images/issues/2863" target="_blank" rel="noopener">https://github.com/docker-library/official-images/issues/2863</a></li>
<li><a href="https://github.com/docker-library/official-images/issues/2856" target="_blank" rel="noopener">https://github.com/docker-library/official-images/issues/2856</a></li>
</ul>
</blockquote>
<p>&#x8FD9;&#x4EC5;&#x4EC5;&#x662F;&#x8C03;&#x6574;&#x5BB9;&#x5668;&#x5185;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x7684;&#x65F6;&#x533A;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7A0B;&#x5E8F;&#x90FD;&#x4F1A;&#x9075;&#x5FAA;&#x8FD9;&#x4E2A;&#x6807;&#x51C6;&#x3002;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x5E94;&#x7528;&#x5E76;&#x4E0D;&#x9075;&#x5B88;&#x8FD9;&#x7C7B;&#x7EA6;&#x5B9A;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x65F6;&#x533A;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x5E94;&#x7528;&#x3001;&#x670D;&#x52A1;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CC;&#x4E00;&#x822C;&#x90FD;&#x6709;&#x65F6;&#x533A;&#x9009;&#x9879;&#xFF0C;&#x5E94;&#x8BE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x9700;&#x6C42;&#x628A;&#x4E2D;&#x56FD;&#x65F6;&#x533A;&#x914D;&#x4E0A;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;PHP &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#xFF1A;</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Date]</span></span><br><span class="line"><span class="attr">date.timezone</span> = Asia/Shanghai</span><br></pre></td></tr></table></figure>
<p>&#x518D;&#x6BD4;&#x5982; <code>mysqld</code> &#x4E2D;&#x7684;&#x53C2;&#x6570; <code>--timezone=Asia/Shanghai</code>&#xFF1B;<code>Java</code> &#x7684; <code>-Duser.timezone=Asia/Shanghai</code> <code>JVM</code> &#x53C2;&#x6570;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E0A;&#x5C42;&#x5E94;&#x7528;&#x65F6;&#x533A;&#xFF0C;&#x800C;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x65F6;&#x533A;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x63A8;&#x8350;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x907F;&#x514D;&#x7CFB;&#x7EDF;&#x90E8;&#x7F72;&#x65F6;&#x53D7;&#x7CFB;&#x7EDF;&#x65F6;&#x533A;&#x5F71;&#x54CD;&#xFF0C;&#x8FD9;&#x5728;&#x5168;&#x7403;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x73AF;&#x5883;&#x4E2D;&#x5176;&#x5B9E;&#x5F88;&#x5E38;&#x89C1;&#xFF0C;&#x56E0;&#x6B64;&#x5C3D;&#x91CF;&#x5728;&#x5E94;&#x7528;&#x5C42;&#x8BBE;&#x7F6E;&#x597D;&#x3002;&#x5F88;&#x591A;&#x5E94;&#x7528;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x65F6;&#x533A;&#x8BBE;&#x7F6E;&#xFF0C;&#x5E94;&#x8BE5;&#x53BB;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x5E76;&#x4E14;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E0D;&#x8981;&#x603B;&#x7528;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
<p>&#x4E00;&#x4E9B;&#x4EBA;&#x5728;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7684;&#x65F6;&#x5019;&#x5F88;&#x61D2;&#x60F0;&#xFF0C;&#x53EA;&#x8981;&#x9ED8;&#x8BA4;&#x80FD;&#x7528;&#x5373;&#x53EF;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x4E00;&#x4E00;&#x68C0;&#x67E5;&#x6BCF;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x662F;&#x5426;&#x548C;&#x81EA;&#x5DF1;&#x671F;&#x671B;&#x4E00;&#x81F4;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x4E0D;&#x4E13;&#x4E1A;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x6B63;&#x662F;&#x8FD9;&#x79CD;&#x4E0D;&#x4E13;&#x4E1A;&#x624D;&#x5BFC;&#x81F4;&#x4E86;&#x51FA;&#x73B0;&#x4E86;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#x505A;&#x4E8B;&#x60C5;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x8BA9;&#x81EA;&#x5DF1;&#x4EE5;&#x4E13;&#x4E1A;&#x7684;&#x89C6;&#x89D2;&#x548C;&#x6001;&#x5EA6;&#x770B;&#x95EE;&#x9898;&#x3002;</p>
<h3 id="wo-xiang-rang-wo-de-cheng-xu-ping-hua-tui-chu-wei-shi-me-jie-huo-sigterm-xin-hao-bu-guan-yong-a"><a href="#&#x6211;&#x60F3;&#x8BA9;&#x6211;&#x7684;&#x7A0B;&#x5E8F;&#x5E73;&#x6ED1;&#x9000;&#x51FA;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x622A;&#x83B7;-SIGTERM-&#x4FE1;&#x53F7;&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF1F;" class="headerlink" title="&#x6211;&#x60F3;&#x8BA9;&#x6211;&#x7684;&#x7A0B;&#x5E8F;&#x5E73;&#x6ED1;&#x9000;&#x51FA;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x622A;&#x83B7; SIGTERM &#x4FE1;&#x53F7;&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF1F;"></a>&#x6211;&#x60F3;&#x8BA9;&#x6211;&#x7684;&#x7A0B;&#x5E8F;&#x5E73;&#x6ED1;&#x9000;&#x51FA;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x622A;&#x83B7; <code>SIGTERM</code> &#x4FE1;&#x53F7;&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF1F; <a href="#wo-xiang-rang-wo-de-cheng-xu-ping-hua-tui-chu-wei-shi-me-jie-huo-sigterm-xin-hao-bu-guan-yong-a" class="header-anchor">#</a></h3><p><code>docker stop</code>, <code>docker service rm</code> &#x5728;&#x505C;&#x6B62;&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x5148;&#x53D1; <code>SIGTERM</code> &#x4FE1;&#x53F7;&#xFF0C;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A; 10 &#x79D2;&#xFF09;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x6CA1;&#x54CD;&#x5E94;&#xFF0C;&#x5219;&#x5F3A;&#x884C; <code>SIGKILL</code> &#x6740;&#x6389;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;&#x5C31;&#x6709;&#x673A;&#x4F1A;&#x5E73;&#x6ED1;&#x9000;&#x51FA;&#xFF0C;&#x5728;&#x63A5;&#x6536;&#x5230; <code>SIGTERM</code> &#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB; Flush &#x7F13;&#x5B58;&#x3001;&#x5B8C;&#x6210;&#x6587;&#x4EF6;&#x8BFB;&#x5199;&#x3001;&#x5173;&#x95ED;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x3001;&#x91CA;&#x653E;&#x6587;&#x4EF6;&#x8D44;&#x6E90;&#x3001;&#x91CA;&#x653E;&#x9501;&#x7B49;&#x7B49;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x9000;&#x51FA;&#x3002;&#x6240;&#x4EE5;&#x8BD5;&#x56FE;&#x622A;&#x83B7; <code>SIGTERM</code> &#x4FE1;&#x53F7;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x5BF9;&#x7684;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x53EF;&#x80FD;&#x5728;&#x622A;&#x83B7; <code>SIGTERM</code> &#x65F6;&#x5374;&#x53D1;&#x73B0;&#xFF0C;&#x5374;&#x53D1;&#x73B0;&#x5E94;&#x7528;&#x5E76;&#x6CA1;&#x6709;&#x6536;&#x5230; <code>SIGTERM</code>&#xFF0C;&#x4E8E;&#x662F;&#x76F2;&#x76EE;&#x7684;&#x8BA4;&#x4E3A; Docker &#x4E0D;&#x652F;&#x6301;&#x5E73;&#x6ED1;&#x9000;&#x51FA;&#xFF0C;&#x5176;&#x5B9E;&#x5E76;&#x975E;&#x5982;&#x6B64;&#x3002;</p>
<p>&#x8FD8;&#x8BB0;&#x5F97;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x8FC7;&#xFF0C;<strong>Docker &#x4E0D;&#x662F;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5BB9;&#x5668;&#x53EA;&#x662F;&#x53D7;&#x9650;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x53EA;&#x5E94;&#x8BE5;&#x8DD1;&#x4E00;&#x4E2A;&#x4E3B;&#x8FDB;&#x7A0B;</strong>&#x7684;&#x8BF4;&#x6CD5;&#x4E48;&#xFF1F;&#x5982;&#x679C;&#x4F60;&#x53D1;&#x73B0;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x6CA1;&#x6709;&#x622A;&#x83B7;&#x5230; <code>SIGTERM</code>&#xFF0C;&#x90A3;&#x5C31;&#x5F88;&#x53EF;&#x80FD;&#x4F60;&#x6CA1;&#x6709;&#x9075;&#x5FAA;&#x8FD9;&#x4E2A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x56E0;&#x4E3A; <code>SIGTERM</code> &#x53EA;&#x4F1A;&#x53D1;&#x7ED9;&#x4E3B;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5BB9;&#x5668;&#x5185; <code>PID</code> &#x4E3A; <code>1</code> &#x7684;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>&#x81F3;&#x4E8E;&#x8BF4;&#x4E3B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x7684;&#x90A3;&#x4E9B;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x5B8C;&#x5168;&#x770B;&#x4E3B;&#x8FDB;&#x7A0B;&#x662F;&#x5426;&#x613F;&#x610F;&#x8F6C;&#x53D1; <code>SIGTERM</code> &#x7ED9;&#x5B50;&#x8FDB;&#x7A0B;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x90A3;&#x4E9B;&#x628A; Docker &#x5F53;&#x505A;&#x865A;&#x62DF;&#x673A;&#x7528;&#x7684;&#xFF0C;&#x4E3B;&#x8FDB;&#x7A0B;&#x8DD1;&#x4E86;&#x4E2A; <code>bash</code>&#xFF0C;&#x7136;&#x540E; exec &#x8FDB;&#x53BB;&#x542F;&#x52A8;&#x7A0B;&#x5E8F;&#x7684;&#xFF0C;&#x6216;&#x8005;&#x6765;&#x4E2A; <code>&amp;</code> &#x8BA9;&#x7A0B;&#x5E8F;&#x8DD1;&#x540E;&#x53F0;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;&#x5FC5;&#x7136;&#x65E0;&#x6CD5;&#x6536;&#x5230; <code>SIGTERM</code>&#x3002;</p>
<p>&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x53EF;&#x80FD;&#x662F;&#x5728; <code>Dockerfile</code> &#x4E2D;&#x7684; <code>CMD</code> &#x90A3;&#x884C;&#x7528;&#x7684;&#x662F; <code>shell</code> &#x683C;&#x5F0F;&#x5199;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x800C;&#x4E0D;&#x662F; <code>exec</code> &#x683C;&#x5F0F;&#x3002;&#x8FD8;&#x8BB0;&#x5F97;&#x524D;&#x9762;&#x63D0;&#x5230;&#x8FC7;&#x7684; <code>shell</code> &#x683C;&#x5F0F;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x4F1A;&#x52A0;&#x4E00;&#x4E2A; <code>sh -c</code> &#x6765;&#x53BB;&#x6267;&#x884C;&#x4E48;&#xFF1F;&#x56E0;&#x6B64;&#x4F7F;&#x7528; <code>shell</code> &#x683C;&#x5F0F;&#x5199; <code>CMD</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;<code>PID</code> &#x4E3A; <code>1</code> &#x7684;&#x8FDB;&#x7A0B;&#x662F; <code>sh</code>&#xFF0C;&#x800C;&#x5B83;&#x4E0D;&#x8F6C;&#x53D1;&#x4FE1;&#x53F7;&#xFF0C;&#x6240;&#x4EE5;&#x4E3B;&#x7A0B;&#x5E8F;&#x6536;&#x4E0D;&#x5230;&#x3002;</p>
<p>&#x660E;&#x767D;&#x4E86;&#x9053;&#x7406;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5C31;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6362;&#x6210; <code>exec</code> &#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x4E3B;&#x8FDB;&#x7A0B;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x653E;&#x5728;&#x7B2C;&#x4E00;&#x4F4D;&#x5373;&#x53EF;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x4E4B;&#x524D;&#x63A8;&#x8350; <code>exec</code> &#x683C;&#x5F0F;&#x7684;&#x539F;&#x56E0;&#x4E4B;&#x4E00;&#x3002;</p>
<h1 id="docker-compose-xiang-guan-wen-ti-2"><a href="#Docker-Compose-&#x76F8;&#x5173;&#x95EE;&#x9898;-2" class="headerlink" title="Docker Compose &#x76F8;&#x5173;&#x95EE;&#x9898; (2)"></a>Docker Compose &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(2)</code> <a href="#docker-compose-xiang-guan-wen-ti-2" class="header-anchor">#</a></h1><h2 id="ni-na-ge-lnmp-li-zi-zhong-de-docker-compose-yml-zhong-you-hao-duo-networks-du-shi-shi-me-yi-si-a"><a href="#&#x4F60;&#x90A3;&#x4E2A;-LNMP-&#x4F8B;&#x5B50;&#x4E2D;&#x7684;-docker-compose-yml-&#x4E2D;&#x6709;&#x597D;&#x591A;-networks&#xFF0C;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x554A;&#xFF1F;" class="headerlink" title="&#x4F60;&#x90A3;&#x4E2A; LNMP &#x4F8B;&#x5B50;&#x4E2D;&#x7684; docker-compose.yml &#x4E2D;&#x6709;&#x597D;&#x591A; networks&#xFF0C;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x554A;&#xFF1F;"></a>&#x4F60;&#x90A3;&#x4E2A; <code>LNMP</code> &#x4F8B;&#x5B50;&#x4E2D;&#x7684; <code>docker-compose.yml</code> &#x4E2D;&#x6709;&#x597D;&#x591A; <code>networks</code>&#xFF0C;&#x90FD;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x554A;&#xFF1F; <a href="#ni-na-ge-lnmp-li-zi-zhong-de-docker-compose-yml-zhong-you-hao-duo-networks-du-shi-shi-me-yi-si-a" class="header-anchor">#</a></h2><p>&#x6211;&#x5199;&#x7684; <code>LNMP</code> &#x591A;&#x5BB9;&#x5668;&#x4E92;&#x901A;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;<a href="https://coding.net/u/twang2218/p/docker-lnmp/git" target="_blank" rel="noopener">https://coding.net/u/twang2218/p/docker-lnmp/git</a></p>
<p>&#x524D;&#x9762; <code>services</code> &#x4E0B;&#x7684;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x4E0B;&#x9762;&#x7684; <code>networks</code>&#xFF0C;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x8981;&#x63A5;&#x5230;&#x54EA;&#x4E2A;&#x7F51;&#x7EDC;&#x4E0A;&#x3002;<br>&#x800C;&#x6700;&#x540E;&#x7684;&#x90A3;&#x4E2A;&#x603B;&#x7684;<code>networks</code>&#x4E0B;&#x9762;&#x7684;&#xFF0C;&#x662F;&#x8FD9;&#x51E0;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;<code>nginx</code> &#x63A5;&#x5230;&#x4E86;&#x540D;&#x4E3A; <code>frontend</code> &#x7684;&#x524D;&#x7AEF;&#x7F51;&#x7EDC;&#xFF1B;<code>mysql</code> &#x63A5;&#x5230;&#x4E86;&#x540D;&#x4E3A; <code>backend</code> &#x7684;&#x540E;&#x7AEF;&#x7F51;&#x7EDC;&#xFF1B;&#x800C;&#x4F5C;&#x4E3A;&#x4E2D;&#x95F4;&#x7684; <code>php</code> &#x65E2;&#x9700;&#x8981;&#x548C; <code>nginx</code> &#x901A;&#x8BAF;&#xFF0C;&#x53C8;&#x9700;&#x8981;&#x548C; <code>mysql</code> &#x901A;&#x8BAF;&#xFF0C;&#x6240;&#x4EE5;&#x540C;&#x65F6;&#x8FDE;&#x63A5;&#x4E86; <code>frontend</code> &#x548C; <code>backend</code> &#x7F51;&#x7EDC;&#x3002;&#x7531;&#x4E8E; <code>nginx</code> &#x548C; <code>mysql</code> &#x4E0D;&#x5904;&#x4E8E;&#x540C;&#x4E00;&#x7F51;&#x7EDC;&#xFF0C;&#x6240;&#x4EE5;&#x4E8C;&#x8005;&#x65E0;&#x6CD5;&#x901A;&#x8BAF;&#xFF0C;&#x8D77;&#x5230;&#x4E86;&#x9694;&#x79BB;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x5173;&#x4E8E; Docker &#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x7684;&#x4ECB;&#x7ECD;&#xFF1A;<br><a href="https://docs.docker.com/engine/userguide/networking/dockernetworks/#/user-defined-networks" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/networking/dockernetworks/#/user-defined-networks</a></p>
<p>&#x5173;&#x4E8E;&#x5728; Docker Compose &#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5B98;&#x65B9;&#x8FD9;&#x90E8;&#x5206;&#x6587;&#x6863;&#xFF1A;<br><a href="https://docs.docker.com/compose/networking/" target="_blank" rel="noopener">https://docs.docker.com/compose/networking/</a></p>
<h2 id="shi-yong-compose-de-shi-hou-peng-dao-an-http-request-took-too-long-to-complete-cuo-wu-zen-me-ban"><a href="#&#x4F7F;&#x7528;-Compose-&#x7684;&#x65F6;&#x5019;&#x78B0;&#x5230;-&#x201C;An-HTTP-request-took-too-long-to-complete&#x2026;-&#x201D;-&#x9519;&#x8BEF;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x4F7F;&#x7528; Compose &#x7684;&#x65F6;&#x5019;&#x78B0;&#x5230; &#x201C;An HTTP request took too long to complete&#x2026;.&#x201D; &#x9519;&#x8BEF;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x4F7F;&#x7528; Compose &#x7684;&#x65F6;&#x5019;&#x78B0;&#x5230; &#x201C;An HTTP request took too long to complete&#x2026;.&#x201D; &#x9519;&#x8BEF;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#shi-yong-compose-de-shi-hou-peng-dao-an-http-request-took-too-long-to-complete-cuo-wu-zen-me-ban" class="header-anchor">#</a></h2><p>Compose &#x7684;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&#x65F6;&#x9650;&#x662F;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x7684;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> COMPOSE_HTTP_TIMEOUT=120</span><br></pre></td></tr></table></figure>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x5E94;&#x8BE5;&#x8D85;&#x65F6;&#xFF0C;&#x8D85;&#x65F6;&#x7684;&#x539F;&#x56E0;&#x662F;&#x56E0;&#x4E3A;&#x6240;&#x8BBF;&#x95EE;&#x7684; Docker Engine &#x8FC7;&#x4E8E;&#x7E41;&#x5FD9;&#xFF0C;&#x800C;&#x65E0;&#x6CD5;&#x54CD;&#x5E94; Compose &#x7684;&#x8BF7;&#x6C42;&#x3002;&#x5E94;&#x8BE5;&#x68C0;&#x67E5;&#x5177;&#x4F53; Docker Engine &#x51FA;&#x4E86;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x8FD8;&#x5728;&#x7528;&#x7740; <code>CentOS</code> &#x9ED8;&#x8BA4;&#x7684; <code>device mapper</code> &#x7684; <code>loop</code> &#x8BBE;&#x5907;&#xFF0C;&#x7B49;&#x7B49;&#x3002;</p>
<h1 id="docker-swarm-xiang-guan-wen-ti-8"><a href="#Docker-Swarm-&#x76F8;&#x5173;&#x95EE;&#x9898;-8" class="headerlink" title="Docker Swarm &#x76F8;&#x5173;&#x95EE;&#x9898; (8)"></a>Docker Swarm &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(8)</code> <a href="#docker-swarm-xiang-guan-wen-ti-8" class="header-anchor">#</a></h1><h2 id="wo-de-docker-ban-ben-shi-1-12-qing-wen-wo-pao-de-shi-yi-dai-swarm-huan-shi-er-dai-swarm-a"><a href="#&#x6211;&#x7684;-Docker-&#x7248;&#x672C;&#x662F;-1-12&#xFF0C;&#x8BF7;&#x95EE;&#x6211;&#x8DD1;&#x7684;&#x662F;&#x4E00;&#x4EE3;-Swarm-&#x8FD8;&#x662F;&#x4E8C;&#x4EE3;-Swarm-&#x554A;&#xFF1F;" class="headerlink" title="&#x6211;&#x7684; Docker &#x7248;&#x672C;&#x662F; 1.12&#xFF0C;&#x8BF7;&#x95EE;&#x6211;&#x8DD1;&#x7684;&#x662F;&#x4E00;&#x4EE3; Swarm &#x8FD8;&#x662F;&#x4E8C;&#x4EE3; Swarm &#x554A;&#xFF1F;"></a>&#x6211;&#x7684; Docker &#x7248;&#x672C;&#x662F; 1.12&#xFF0C;&#x8BF7;&#x95EE;&#x6211;&#x8DD1;&#x7684;&#x662F;&#x4E00;&#x4EE3; Swarm &#x8FD8;&#x662F;&#x4E8C;&#x4EE3; Swarm &#x554A;&#xFF1F; <a href="#wo-de-docker-ban-ben-shi-1-12-qing-wen-wo-pao-de-shi-yi-dai-swarm-huan-shi-er-dai-swarm-a" class="header-anchor">#</a></h2><p>&#x2026;&#x2026;&#x81EA;&#x5DF1;&#x8FD0;&#x884C;&#x7684; Swarm &#x600E;&#x4E48;&#x4F1A;&#x8FDE;&#x81EA;&#x5DF1;&#x90FD;&#x4E0D;&#x77E5;&#x9053;&#x8DD1;&#x7684;&#x662F;&#x5565;&#xFF1F;&#x1F605;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x81F3;&#x4E8E;&#x662F;&#x8FD0;&#x884C;&#x7684;&#x4E00;&#x4EE3; Swarm &#x8FD8;&#x662F;&#x4E8C;&#x4EE3; Swarm&#xFF0C;&#x5355;&#x770B;&#x7248;&#x672C;&#x662F;&#x6CA1;&#x610F;&#x4E49;&#x7684;&#x3002;<strong>Docker 1.12+ &#x7684;&#x7248;&#x672C;&#x540C;&#x65F6;&#x652F;&#x6301;&#x4E00;&#x4EE3; Swarm &#x548C;&#x4E8C;&#x4EE3; Swarm</strong>&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;&#x4F7F;&#x7528;&#x5BB9;&#x5668;&#x5F62;&#x5F0F;&#x8FD0;&#x884C;&#x7684; Swarm&#xFF0C;&#x4E5F;&#x5C31;&#x662F; <code>docker run swarm</code> &#x5F62;&#x5F0F;&#x6784;&#x5EFA;&#x7684; Swarm&#xFF0C;&#x8FD9;&#x662F;<strong>&#x4E00;&#x4EE3; Swarm</strong>&#xFF0C;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A; <strong>Docker Swarm</strong>&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;&#x4F7F;&#x7528;&#x5185;&#x7F6E;&#x547D;&#x4EE4;&#x5F62;&#x5F0F;&#x6784;&#x5EFA;&#x7684; Swarm&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x547D;&#x4EE4; <code>docker swarm init</code> &#x5F62;&#x5F0F;&#x6784;&#x5EFA;&#x7684; Swarm&#xFF0C;&#x8FD9;&#x662F;&#x5185;&#x7F6E;&#x7684; Swarm&#xFF0C;&#x662F;<strong>&#x4E8C;&#x4EE3; Swarm</strong>&#xFF0C;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A; <strong>Docker Swarm Mode</strong>&#x3002;</p>
<h2 id="swarm-huan-jing-zhong-zen-me-zhi-ding-mou-ge-rong-qi-zai-zhi-ding-de-su-zhu-shang-yun-xing-ni"><a href="#Swarm&#x73AF;&#x5883;&#x4E2D;&#x600E;&#x4E48;&#x6307;&#x5B9A;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5BBF;&#x4E3B;&#x4E0A;&#x8FD0;&#x884C;&#x5462;&#xFF1F;" class="headerlink" title="Swarm&#x73AF;&#x5883;&#x4E2D;&#x600E;&#x4E48;&#x6307;&#x5B9A;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5BBF;&#x4E3B;&#x4E0A;&#x8FD0;&#x884C;&#x5462;&#xFF1F;"></a>Swarm&#x73AF;&#x5883;&#x4E2D;&#x600E;&#x4E48;&#x6307;&#x5B9A;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5BBF;&#x4E3B;&#x4E0A;&#x8FD0;&#x884C;&#x5462;&#xFF1F; <a href="#swarm-huan-jing-zhong-zen-me-zhi-ding-mou-ge-rong-qi-zai-zhi-ding-de-su-zhu-shang-yun-xing-ni" class="header-anchor">#</a></h2><p>&#x6BCF;&#x4E2A; Docker Host &#x5EFA;&#x7ACB;&#x65F6;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>--label</code> &#x6307;&#x5B9A;&#x5176; Docker &#x5F15;&#x64CE;&#x7684;&#x6807;&#x7B7E;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dockerd \</span><br><span class="line">    --label com.example.environment=<span class="string">&quot;production&quot;</span> \</span><br><span class="line">    --label com.example.storage=<span class="string">&quot;ssd&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x5E94;&#x8BE5;&#x914D;&#x7F6E;&#x5728; <code>Docker</code> &#x5F15;&#x64CE;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CC;&#x4FEE;&#x6539;&#xFF0C;&#x5982; <code>docker.service</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x6267;&#x884C;&#x2026;&#x2026;</p>
</blockquote>
<p>&#x7136;&#x540E;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7EA6;&#x675F;&#x8C03;&#x5EA6;&#x5373;&#x53EF;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Compose &#x6587;&#x4EF6;&#x7684; <code>environment</code> &#x914D;&#x7F6E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>docker run</code> &#x7684; <code>-e</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x53C2;&#x6570;&#x3002;&#x4E0B;&#x9762;&#x4EE5; Compose &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E3A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;2&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mongodb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mongo:latest</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;constraint:com.example.storage==ssd&quot;</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x8FD9;&#x4E2A; <code>mongodb</code> &#x7684;&#x670D;&#x52A1;&#x5C31;&#x4F1A;&#x8FD0;&#x884C;&#x5728;&#x6807;&#x8BB0;&#x4E3A; <code>com.example.storage=&quot;ssd&quot;</code> &#x7684;&#x5BBF;&#x4E3B;&#x4E0A;&#x8FD0;&#x884C;&#x3002;</p>
<h2 id="wei-shi-me-swarm-ji-qun-de-overlay-network-kua-su-zhu-wu-fa-hu-fang"><a href="#&#x4E3A;&#x4EC0;&#x4E48;-Swarm-&#x96C6;&#x7FA4;&#x7684;-overlay-network-&#x8DE8;&#x5BBF;&#x4E3B;&#x65E0;&#x6CD5;&#x4E92;&#x8BBF;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48; Swarm &#x96C6;&#x7FA4;&#x7684; overlay network &#x8DE8;&#x5BBF;&#x4E3B;&#x65E0;&#x6CD5;&#x4E92;&#x8BBF;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48; Swarm &#x96C6;&#x7FA4;&#x7684; overlay network &#x8DE8;&#x5BBF;&#x4E3B;&#x65E0;&#x6CD5;&#x4E92;&#x8BBF;&#xFF1F; <a href="#wei-shi-me-swarm-ji-qun-de-overlay-network-kua-su-zhu-wu-fa-hu-fang" class="header-anchor">#</a></h2><p>&#x9996;&#x5148;&#xFF0C;&#x68C0;&#x67E5;&#x5EFA;&#x7ACB; Swarm &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BF9;&#x5176;&#x5B83;&#x8282;&#x70B9;&#x6240;&#x5BA3;&#x544A;&#x7684;&#x672C;&#x8282;&#x70B9;&#x7684;&#x5730;&#x5740;&#x662F;&#x5426;&#x6B63;&#x786E;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x5355;&#x7F51;&#x5361;&#x3001;&#x5355;IP&#x7684;&#x5BBF;&#x4E3B;&#xFF0C;Swarm &#x4F1A;&#x81EA;&#x52A8;&#x9009;&#x62E9;&#x7F51;&#x5361;&#x5730;&#x5740;&#xFF0C;&#x4F46;&#x662F;&#x591A;&#x7F51;&#x5361;&#x3001;&#x591A;IP&#x7684;&#x5BBF;&#x4E3B;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x5BA3;&#x544A;&#x5730;&#x5740;&#x3002;</p>
<ul>
<li>&#x5BF9;&#x4E8E;&#x4E00;&#x4EE3; Swarm &#x800C;&#x8A00;&#xFF0C;&#x68C0;&#x67E5;&#x4E00;&#x4E0B; <code>dockerd</code> &#x7684;&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;<code>--cluster-advertise</code> &#x5730;&#x5740;&#x662F;&#x5426;&#x914D;&#x7F6E;&#x6B63;&#x786E;&#x3002;</li>
<li>&#x5BF9;&#x4E8E;&#x4E8C;&#x4EE3; Swarm&#xFF0C;&#x5219;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;&#x521B;&#x5EFA;&#x3001;&#x52A0;&#x5165; Swarm &#x7684;&#x65F6;&#x5019;&#xFF0C;<code>--advertise-addr</code> &#x662F;&#x5426;&#x586B;&#x5199;&#x6B63;&#x786E;&#x3002;</li>
</ul>
<p>&#x5BA3;&#x544A;&#x5730;&#x5740;&#x5FC5;&#x987B;&#x662F;&#x5168;&#x96C6;&#x7FA4;&#x53EF;&#x4EE5;&#x4E92;&#x8BBF;&#x7684;&#xFF0C;&#x7531;&#x4E8E;&#x8BE5;&#x5730;&#x5740;&#x7AEF;&#x53E3;&#x662F; <code>Docker Remote API</code> &#x7AEF;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x7528; <code>curl</code> &#x6765;&#x8FDE;&#x63A5;&#x5176;&#x5B83;&#x8282;&#x70B9;&#xFF0C;&#x4EE5;&#x5224;&#x65AD;&#x4E92;&#x901A;&#x6027;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;&#x68C0;&#x67E5;&#x5BBF;&#x4E3B;&#x95F4;&#x7684;&#x7F51;&#x7EDC;&#x4E92;&#x901A;&#x95EE;&#x9898;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5BBF;&#x4E3B;&#x7684;&#x9632;&#x706B;&#x5899;&#x5F00;&#x542F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x68C0;&#x67E5;&#x4E0B;&#x5217;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x6709;&#x6CA1;&#x6709;&#x653E;&#x5F00;&#xFF1A;</p>
<ul>
<li><code>7946/{udp,tcp}</code></li>
<li><code>4789/{udp,tcp}</code></li>
<li>{<code>2375</code>,<code>2376</code>,<code>2377</code>,<code>3375</code>,<code>3376</code>}/<code>tcp</code> &#xFF08;&#x5177;&#x4F53;&#x7AEF;&#x53E3;&#x53D6;&#x51B3;&#x4E8E;&#x5B9E;&#x9645; <code>Swarm</code> &#x6216; <code>Engine</code> &#x5B88;&#x62A4;&#x7AEF;&#x53E3;)</li>
</ul>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>telnet</code>, <code>curl</code> &#x4E4B;&#x7C7B;&#x7684;&#x5DE5;&#x5177;&#x786E;&#x4FDD;&#x4E0A;&#x8FF0;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x4E92;&#x8BBF;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8FD8;&#x662F;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x4E00;&#x6B65;&#x542F;&#x7528;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x7684; Docker &#x5F15;&#x64CE;&#x7684;&#x8C03;&#x8BD5;&#x6A21;&#x5F0F;&#x3002;&#x548C;&#x914D;&#x7F6E; <code>--insecure-registry</code> &#x7684;&#x65B9;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;&#x7F16;&#x8F91; Docker &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728; <code>dockerd</code> &#x540E;&#x6DFB;&#x52A0; <code>-D</code> &#x53C2;&#x6570;&#x3002;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x542F;&#x52A8; Docker &#x5F15;&#x64CE;&#xFF0C;&#x5EFA;&#x7ACB;&#x96C6;&#x7FA4;&#x3001;&#x7F51;&#x7EDC;&#x3001;&#x670D;&#x52A1;&#x3002;&#x5982;&#x679C;&#x95EE;&#x9898;&#x91CD;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x6790; <code>Docker</code> &#x5F15;&#x64CE;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5177;&#x4F53;&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#x7684;&#x65B9;&#x6CD5;&#x89C1;&#x524D;&#x9762;&#x7684;&#x95EE;&#x7B54;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728; <code>1.13</code> &#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x8DE8;&#x5BBF;&#x4E3B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x65E0;&#x6CD5;&#x5728;&#x5BB9;&#x5668;&#x5185; <code>ping</code> &#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684; <code>VIP</code>&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5; <code>ping tasks.&lt;&#x670D;&#x52A1;&#x540D;&gt;</code>&#xFF0C;&#x6765;&#x8DF3;&#x8FC7; <code>VIP</code> &#x8FDB;&#x884C; <code>ping</code>&#x3002;</p>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<p><a href="https://docs.docker.com/swarm/plan-for-production/" target="_blank" rel="noopener">https://docs.docker.com/swarm/plan-for-production/</a></p>
<p><a href="https://docs.docker.com/engine/swarm/swarm-tutorial/#/open-ports-between-the-hosts" target="_blank" rel="noopener">https://docs.docker.com/engine/swarm/swarm-tutorial/#/open-ports-between-the-hosts</a></p>
<p><a href="https://docs.docker.com/engine/swarm/networking/" target="_blank" rel="noopener">https://docs.docker.com/engine/swarm/networking/</a></p>
<h2 id="docker-er-dai-swarm-ji-swarm-mode-docker-service-create-bu-ke-yi-shi-yong-v-na-zen-me-shi-yong-juan-volume"><a href="#Docker-&#x4E8C;&#x4EE3;Swarm-&#x65E2;-Swarm-Mode-&#xFF0C;docker-service-create-&#x4E0D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;-v-&#x90A3;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x5377;-Volume-&#xFF1F;" class="headerlink" title="Docker &#x4E8C;&#x4EE3;Swarm (&#x65E2; Swarm Mode)&#xFF0C;docker service create &#x4E0D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; -v &#x90A3;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x5377;(Volume)&#xFF1F;"></a>Docker &#x4E8C;&#x4EE3;Swarm (&#x65E2; Swarm Mode)&#xFF0C;<code>docker service create</code> &#x4E0D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>-v</code> &#x90A3;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x5377;(Volume)&#xFF1F; <a href="#docker-er-dai-swarm-ji-swarm-mode-docker-service-create-bu-ke-yi-shi-yong-v-na-zen-me-shi-yong-juan-volume" class="header-anchor">#</a></h2><p>&#x4ECE;&#x4E8C;&#x4EE3; Swarm &#x5F00;&#x59CB;&#xFF0C;&#x5C06;&#x4F7F;&#x7528; <code>--mount</code> &#x53C2;&#x6570;&#x6765;&#x8FDB;&#x884C;&#x5377;&#x6302;&#x8F7D;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;&#x8BED;&#x4E49;&#x8FDB;&#x884C;&#x66F4;&#x660E;&#x786E;&#x7684;&#x5212;&#x5206;&#x3002;</p>
<p>&#x6302;&#x8F7D;&#x5206;&#x4E24;&#x79CD;&#xFF1A;</p>
<ul>
<li>&#x7ED1;&#x5B9A;&#x6302;&#x8F7D; <code>bind-mount</code>&#xFF1A;&#x8FD9;&#x7C7B;&#x6302;&#x8F7D;&#x5C06;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;/&#x6587;&#x4EF6;&#x7ED1;&#x5B9A;&#x5230;&#x5BB9;&#x5668;&#x7684;&#x67D0;&#x4E2A;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x7C7B;&#x6302;&#x8F7D;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5BBF;&#x4E3B;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x4E0D;&#x540C;uid&#x5BFC;&#x81F4;&#x7684;&#x6743;&#x9650;&#x3001;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5DEE;&#x5F02;&#x95EE;&#x9898;&#x3002;</li>
<li>&#x6570;&#x636E;&#x5377; <code>data volumes</code>&#xFF1A;&#x8FD9;&#x7C7B;&#x6302;&#x8F7D;&#x662F;&#x4E4B;&#x524D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7684;&#x5377;&#x3002;&#x5377;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x547D;&#x540D;&#x5377;<code>named volume</code>&#x4EE5;&#x53CA;&#x533F;&#x540D;&#x5377;<code>anonymous volume</code></li>
</ul>
<p>&#x6302;&#x8F7D;&#x53C2;&#x6570;&#x7684;&#x683C;&#x5F0F;&#x57FA;&#x672C;&#x4E0A;&#x4E3A; <code>--mount &lt;key1&gt;=&lt;value1&gt;[,&lt;key2&gt;=&lt;value2&gt;,...]</code>&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x53C2;&#x6570;&#x6709;&#xFF1A;</p>
<ul>
<li><code>type</code>: &#x5982;&#x4E4B;&#x524D;&#x6240;&#x8BF4;&#xFF0C;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1A; <code>volume</code> &#x548C; <code>bind</code>&#x3002;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A; <code>type</code>&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>volume</code>&#xFF1B;</li>
<li><code>src</code> &#x6216; <code>source</code>&#xFF1A;&#x6E90;&#xFF1A;<ul>
<li>&#x5982;&#x679C; <code>type=volume</code>&#xFF0C;<code>src</code> &#x5219;&#x662F;&#x5377;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x662F;&#x53EF;&#x9009;&#x9879;&#x3002;&#x5982;&#x679C;&#x5B58;&#x5728;&#x5C31;&#x662F;&#x547D;&#x540D;&#x5377;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6307;&#x5B9A; <code>src</code> &#x5219;&#x662F;&#x533F;&#x540D;&#x5377;&#xFF1B;</li>
<li>&#x5982;&#x679C; <code>type=bind</code>&#xFF0C;<code>src</code> &#x662F;&#x5BBF;&#x4E3B;&#x672C;&#x5730;&#x7684;&#x8DEF;&#x5F84;&#xFF1B;</li>
</ul>
</li>
<li><code>dst</code> &#x6216; <code>destination</code> &#x6216; <code>target</code>&#xFF1A;&#x5C06;&#x5728;&#x5BB9;&#x5668;&#x5185;&#x6302;&#x8F7D;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x5982;&#x679C;&#x8DEF;&#x5F84;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x4F1A;&#x5728;&#x6302;&#x8F7D;&#x524D;&#x81EA;&#x52A8;&#x5EFA;&#x7ACB;&#x8DEF;&#x5F84;&#x3002;</li>
<li><code>readonly</code> &#x6216; <code>ro</code>&#xFF1A;&#x662F;&#x5426;&#x8BA9;&#x8BE5;&#x6302;&#x8F7D;&#x4E3A;&#x53EA;&#x8BFB;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x8BFB;&#x5199;&#x3002;</li>
</ul>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#xFF1A;</p>
<ul>
<li><code>volume-driver</code>&#xFF1A;&#x6307;&#x5B9A;&#x5377;&#x9A71;&#x52A8;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; <code>local</code>&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x5176;&#x5B83;&#xFF08;&#x5982; <code>flocker</code>, <code>glusterfs</code>, <code>ceph</code>&#xFF09;&#x4E4B;&#x7C7B;&#x7684;&#x9A71;&#x52A8;&#xFF1B;</li>
<li><code>volume-label</code>&#xFF1A;&#x6307;&#x5B9A;&#x5377;&#x7684;&#x5143;&#x6570;&#x636E;(metadata)&#xFF0C;&#x4ECE;&#x800C;&#x65B9;&#x4FBF;&#x8FC7;&#x6EE4;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li><code>volume-opt</code>&#xFF1A;&#x4E0D;&#x540C;&#x7684;&#x5377;&#x9A71;&#x52A8;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#x3002;</li>
</ul>
<p><code>--mount</code> &#x548C; <code>--volume</code> &#x6709;&#x4E00;&#x4E9B;&#x5DEE;&#x5F02;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;</p>
<ul>
<li><code>--mount</code> &#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5377;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x4E8B;&#x5148;&#x4F7F;&#x7528; <code>docker volume create</code> &#x6765;&#x521B;&#x5EFA;&#x5377;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x591A;&#x7EC4;&#x4E0D;&#x540C;&#x9A71;&#x52A8;&#x7684;&#x5377;&#xFF1B;</li>
<li><code>--mount</code> &#x5982;&#x679C; <code>type=bind</code> &#x7684;&#x8BDD;&#xFF0C;&#x5BBF;&#x4E3B;&#x5FC5;&#x987B;&#x5B58;&#x5728;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#xFF0C;&#x5426;&#x5219;&#x62A5;&#x9519;&#x3002;&#x800C; <code>--volume</code> &#x5219;&#x5728;&#x5BBF;&#x4E3B;&#x4E0D;&#x5B58;&#x5728;&#x8BE5;&#x8DEF;&#x5F84;&#x65F6;&#xFF0C;&#x5728;&#x5BBF;&#x4E3B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7A7A;&#x76EE;&#x5F55;&#x6765;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#x3002;</li>
</ul>
<p>&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<p>&#x6302;&#x8F7D;&#x547D;&#x540D;&#x5377;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker service create \</span><br><span class="line">  --name my-service \</span><br><span class="line">  --replicas 3 \</span><br><span class="line">  --mount <span class="built_in">type</span>=volume,<span class="built_in">source</span>=my-volume,destination=/path/<span class="keyword">in</span>/container,volume-label=<span class="string">&quot;color=red&quot;</span>,volume-label=<span class="string">&quot;shape=round&quot;</span> \</span><br><span class="line">  nginx:alpine</span><br></pre></td></tr></table></figure>
<p>&#x6302;&#x8F7D;&#x533F;&#x540D;&#x5377;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker service create \</span><br><span class="line">  --name my-service \</span><br><span class="line">  --replicas 3 \</span><br><span class="line">  --mount <span class="built_in">type</span>=volume,destination=/path/<span class="keyword">in</span>/container \</span><br><span class="line">  nginx:alpine</span><br></pre></td></tr></table></figure>
<p>&#x7ED1;&#x5B9A;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker service create \</span><br><span class="line"> --name my-service \</span><br><span class="line"> --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=/path/on/host,destination=/path/<span class="keyword">in</span>/container \</span><br><span class="line"> nginx:alpine</span><br></pre></td></tr></table></figure>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/service_create/#/add-bind-mounts-or-volumes" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/service_create/#/add-bind-mounts-or-volumes</a></p>
<h2 id="dui-yu-liang-jie-dian-ji-qun-lai-shuo-replicas-2-he-mode-global-shi-bu-shi-yi-ge-yi-si"><a href="#&#x5BF9;&#x4E8E;&#x4E24;&#x8282;&#x70B9;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#xFF0C;-replicas-2-&#x548C;-mode-global-&#x662F;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x610F;&#x601D;&#xFF1F;" class="headerlink" title="&#x5BF9;&#x4E8E;&#x4E24;&#x8282;&#x70B9;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#xFF0C;--replicas=2 &#x548C; --mode=global &#x662F;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x610F;&#x601D;&#xFF1F;"></a>&#x5BF9;&#x4E8E;&#x4E24;&#x8282;&#x70B9;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#xFF0C;<code>--replicas=2</code> &#x548C; <code>--mode=global</code> &#x662F;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x610F;&#x601D;&#xFF1F; <a href="#dui-yu-liang-jie-dian-ji-qun-lai-shuo-replicas-2-he-mode-global-shi-bu-shi-yi-ge-yi-si" class="header-anchor">#</a></h2><p>&#x9996;&#x5148;&#xFF0C;&#x4E8C;&#x8005;&#x8BED;&#x4E49;&#x5C31;&#x4E0D;&#x540C;&#x3002;</p>
<ul>
<li><code>--replicas=2</code>&#xFF0C;&#x662F;&#x8981;&#x6C42;&#x8BE5;&#x670D;&#x52A1;&#x6709;2&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x65E0;&#x8BBA;&#x96C6;&#x7FA4;&#x591A;&#x5C11;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x4E0D;&#x5728;&#x4E4E;&#x8FD9;&#x4E24;&#x4E2A;&#x526F;&#x672C;&#x662F;&#x4E0D;&#x662F;&#x90FD;&#x8DD1;&#x5728;&#x4E00;&#x4E2A;&#x5BBF;&#x4E3B;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x786E;&#x4FDD;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#xFF1B;</li>
<li><code>--mode=global</code>&#xFF0C;&#x662F;&#x8981;&#x6C42;&#x670D;&#x52A1;&#x5728;&#x96C6;&#x7FA4;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x8DD1;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#x3002;</li>
</ul>
<p>&#x73B0;&#x8C61;&#x4E0A;&#x4E5F;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;<code>--replicas=2</code> &#x662F;&#x8981;&#x786E;&#x4FDD;&#x526F;&#x672C;&#x4E3A;2&#x4E2A;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x6302;&#x4E86;&#xFF0C;&#x4F1A;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x5728;&#x8D77;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x4ECE;&#x800C;&#x786E;&#x4FDD;&#x526F;&#x672C;&#x6570;&#x4E3A;2&#x3002;&#x800C;&#x5BF9;&#x4E8E; <code>--mode=global</code> &#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x6302;&#x4E86;&#xFF0C;&#x4E0D;&#x4F1A;&#x518D;&#x53E6;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x8D77;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#x3002;</p>
<h2 id="yi-dai-swarm-de-shi-hou-ke-yi-yong-docker-run-a-er-dai-zen-me-you-nong-ge-docker-service-create-chu-lai-wei-shi-me-yao-duo-ci-yi-ju"><a href="#&#x4E00;&#x4EE3;-Swarm-&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528;-docker-run-&#x554A;&#xFF0C;&#x4E8C;&#x4EE3;&#x600E;&#x4E48;&#x53C8;&#x5F04;&#x4E2A;-docker-service-create-&#x51FA;&#x6765;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x591A;&#x6B64;&#x4E00;&#x4E3E;&#xFF1F;" class="headerlink" title="&#x4E00;&#x4EE3; Swarm &#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528; docker run &#x554A;&#xFF0C;&#x4E8C;&#x4EE3;&#x600E;&#x4E48;&#x53C8;&#x5F04;&#x4E2A; docker service create &#x51FA;&#x6765;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x591A;&#x6B64;&#x4E00;&#x4E3E;&#xFF1F;"></a>&#x4E00;&#x4EE3; Swarm &#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528; <code>docker run</code> &#x554A;&#xFF0C;&#x4E8C;&#x4EE3;&#x600E;&#x4E48;&#x53C8;&#x5F04;&#x4E2A; <code>docker service create</code> &#x51FA;&#x6765;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x591A;&#x6B64;&#x4E00;&#x4E3E;&#xFF1F; <a href="#yi-dai-swarm-de-shi-hou-ke-yi-yong-docker-run-a-er-dai-zen-me-you-nong-ge-docker-service-create-chu-lai-wei-shi-me-yao-duo-ci-yi-ju" class="header-anchor">#</a></h2><p>&#x56E0;&#x4E3A; <code>docker run</code> &#x548C; <code>docker service create</code> &#x662F;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7406;&#x5FF5;&#x7684;&#x4E1C;&#x897F;&#x3002;</p>
<p>&#x4E00;&#x4EE3; Swarm &#x4E2D;&#xFF0C;&#x5C06; Swarm &#x96C6;&#x7FA4;&#x89C6;&#x4E3A;&#x4E00;&#x4E2A;&#x5DE8;&#x5927;&#x7684; Docker &#x4E3B;&#x673A;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x548C;&#x5355;&#x673A;&#x6CA1;&#x6709;&#x533A;&#x522B;&#xFF0C;&#x90FD;&#x662F;&#x76F4;&#x63A5;&#x8C03;&#x5EA6;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x3002;&#x56E0;&#x6B64;&#x4F9D;&#x65E7;&#x4F7F;&#x7528;&#x5355;&#x673A;&#x7684; <code>docker run</code> &#x7684;&#x65B9;&#x5F0F;&#x6765;&#x542F;&#x52A8;&#x7279;&#x5B9A;&#x5BB9;&#x5668;&#x3002;</p>
<p>&#x4E8C;&#x4EE3; Swarm &#x5219;&#x6539;&#x53D8;&#x4E86;&#x8FD9;&#x4E2A;&#x7406;&#x5FF5;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x670D;&#x52A1;&#x6808;(<code>Stack</code>)&#x3001;&#x670D;&#x52A1;(<code>Service</code>)&#x3001;&#x4EFB;&#x52A1;(<code>Task</code>) &#x7684;&#x6982;&#x5FF5;&#x3002;&#x5728;&#x4E8C;&#x4EE3; Swarm &#x4E2D;&#xFF0C;&#x4E00;&#x7EC4;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x8FDB;&#x884C;&#x90E8;&#x7F72;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x6808;&#xFF0C;&#x8FD9;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x4E4B;&#x524D;&#x7684; Docker Compose &#x6240;&#x5B8C;&#x6210;&#x7684;&#x76EE;&#x7684;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x6B21;&#xFF0C;&#x662F;&#x771F;&#x6B63;&#x7684;&#x9488;&#x5BF9;<strong>&#x670D;&#x52A1;</strong>&#x7684;&#x3002;</p>
<p>&#x4E00;&#x4E2A;<strong>&#x670D;&#x52A1;</strong>&#x5E76;&#x975E;&#x4E00;&#x4E2A;<strong>&#x5BB9;&#x5668;</strong>&#xFF0C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x526F;&#x672C;<strong>&#x4EFB;&#x52A1;</strong>&#xFF0C;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x8FD9;&#x4E2A;&#x6982;&#x5FF5;&#x5728;&#x4E00;&#x4EE3; Swarm &#x548C;&#x5355;&#x673A;&#x73AF;&#x5883;&#x4E2D;&#x662F;&#x6CA1;&#x6709;&#x7684;&#xFF0C;&#x56E0;&#x6B64; Docker Compose &#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x670D;&#x52A1;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x7528;&#x4E86;&#x5404;&#x79CD;&#x529E;&#x6CD5;&#x53BB;&#x6A21;&#x62DF;&#xFF0C;&#x5305;&#x62EC;&#x4F7F;&#x7528; <code>labels</code>&#xFF0C;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x522B;&#x540D;&#x7B49;&#x7B49;&#xFF0C;&#x4F46;&#x662F;&#x672C;&#x8D28;&#x4E0A;&#xFF0C;&#x4F9D;&#x65E7;&#x662F;&#x4EE5;&#x5BB9;&#x5668;&#x4E3A;&#x5355;&#x4F4D;&#x8FDB;&#x884C;&#x8FD0;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x672C;&#x8D28;&#x4E0A;&#x8FD8;&#x662F;&#x4E00;&#x7EC4; <code>docker run</code>&#x3002;</p>
<p>&#x6B63;&#x662F;&#x7531;&#x4E8E;&#x4E8C;&#x4EE3; Swarm &#x4E2D;&#x7528;&#x6237;&#x64CD;&#x4F5C;&#x7684;&#x5355;&#x5143;&#x662F;&#x670D;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x4F20;&#x7EDF;&#x7684;&#x4EE5;&#x5BB9;&#x5668;&#x4E3A;&#x4E2D;&#x5FC3;&#x7684; <code>docker run</code> &#x5C31;&#x4E0D;&#x518D;&#x9002;&#x7528;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x65B0;&#x7684;&#x4E00;&#x7EC4;&#x9488;&#x5BF9;&#x670D;&#x52A1;&#x7684;&#x547D;&#x4EE4;&#xFF0C;<code>docker service</code>&#x3002;</p>
<h2 id="docker-service-ps-li-mian-zong-shi-you-yi-dui-shi-bai-huo-zhe-shutdown-de-li-shi-rong-qi-zen-me-shan-a"><a href="#docker-service-ps-&#x91CC;&#x9762;&#x603B;&#x662F;&#x6709;&#x4E00;&#x5806;&#x5931;&#x8D25;&#x6216;&#x8005;shutdown&#x7684;&#x5386;&#x53F2;&#x5BB9;&#x5668;&#xFF0C;&#x600E;&#x4E48;&#x5220;&#x554A;&#xFF1F;" class="headerlink" title="docker service ps &#x91CC;&#x9762;&#x603B;&#x662F;&#x6709;&#x4E00;&#x5806;&#x5931;&#x8D25;&#x6216;&#x8005;shutdown&#x7684;&#x5386;&#x53F2;&#x5BB9;&#x5668;&#xFF0C;&#x600E;&#x4E48;&#x5220;&#x554A;&#xFF1F;"></a><code>docker service ps</code> &#x91CC;&#x9762;&#x603B;&#x662F;&#x6709;&#x4E00;&#x5806;&#x5931;&#x8D25;&#x6216;&#x8005;shutdown&#x7684;&#x5386;&#x53F2;&#x5BB9;&#x5668;&#xFF0C;&#x600E;&#x4E48;&#x5220;&#x554A;&#xFF1F; <a href="#docker-service-ps-li-mian-zong-shi-you-yi-dui-shi-bai-huo-zhe-shutdown-de-li-shi-rong-qi-zen-me-shan-a" class="header-anchor">#</a></h2><p>&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E8C;&#x4EE3; Swarm &#x540E;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x7EF4;&#x62A4;&#x4E86;&#x51E0;&#x6B21;&#x670D;&#x52A1;&#x540E;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0; <code>docker service ps</code> &#x4E2D;&#x663E;&#x793A;&#x4E86;&#x5F88;&#x591A;&#x4E4B;&#x524D;&#x5931;&#x8D25;&#x7684;&#x5BB9;&#x5668;&#x8BB0;&#x5F55;&#xFF0C;&#x5F88;&#x662F;&#x70E6;&#x4EBA;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ docker service ps web                                                                                                       [e641012]</span><br><span class="line">NAME                    IMAGE                NODE  DESIRED STATE  CURRENT STATE                ERROR                             PORTS</span><br><span class="line">web.1.uultetkovwch      nginx:1.11.3-alpine  moby  Running        Running 43 seconds ago</span><br><span class="line">\_ web.1.etb0jpr21mhe  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.1.uhyl9158ldf9  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.1.mwallx77rc3m  nginx:1.11.1-alpine  moby  Shutdown       Shutdown about a minute ago</span><br><span class="line">\_ web.1.zmyvszvv21ak  nginx:1.10-alpine    moby  Shutdown       Shutdown 3 minutes ago</span><br><span class="line">web.2.dp0imr8kbmad      nginx:1.11.3-alpine  moby  Running        Running 43 seconds ago</span><br><span class="line">\_ web.2.0xzwj9o8kfzn  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.2.mk3g1l5js4ph  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.2.v9x98vxma1q3  nginx:1.11.2-alpine  moby  Shutdown       Rejected 2 minutes ago       <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.2.vo5mvyux3vok  nginx:1.11.2-alpine  moby  Shutdown       Rejected 2 minutes ago       <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">web.3.cc3mrji1dlz2      nginx:1.11.3-alpine  moby  Running        Running 42 seconds ago</span><br><span class="line">\_ web.3.uvubn2pdceaa  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.3.mt7xwl4a0bii  nginx:1.11.2-alpine  moby  Shutdown       Rejected 2 minutes ago       <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.3.cdseizjlnzoj  nginx:1.11.2-alpine  moby  Shutdown       Rejected 2 minutes ago       <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.3.kwlz5mxbu2t6  nginx:1.11.2-alpine  moby  Shutdown       Rejected 2 minutes ago       <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">web.4.zoadbqu3wtzf      nginx:1.11.3-alpine  moby  Running        Running 42 seconds ago</span><br><span class="line">\_ web.4.u6p58nzxlib9  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such container: web.4.u6p5&#x2026;&quot;</span></span><br><span class="line">\_ web.4.kf420b73lwcc  nginx:1.11.2-alpine  moby  Shutdown       Rejected about a minute ago  <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.4.tzzmc1zuffn7  nginx:1.11.2-alpine  moby  Shutdown       Rejected 2 minutes ago       <span class="string">&quot;No such image: nginx:1.11.2-a&#x2026;&quot;</span></span><br><span class="line">\_ web.4.mccsks74u370  nginx:1.11.1-alpine  moby  Shutdown       Shutdown 2 minutes ago</span><br><span class="line">web.5.u0i5cnh0m5jb      nginx:1.11.3-alpine  moby  Running        Running 39 seconds ago</span><br><span class="line">\_ web.5.xzv6o5hoxjay  nginx:1.11.1-alpine  moby  Shutdown       Shutdown 41 seconds ago</span><br><span class="line">\_ web.5.f0ssiwebempk  nginx:1.10-alpine    moby  Shutdown       Shutdown 3 minutes ago</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x90A3;&#x4E9B;&#x5386;&#x53F2;&#x4E0A;&#x8FD0;&#x884C;&#x8FC7;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x4EEC;&#x5F53;&#x7136;&#x5DF2;&#x7ECF;&#x505C;&#x6B62;&#x8FD0;&#x884C;&#xFF0C;&#x4FDD;&#x7559;&#x5728;&#x8FD9;&#x91CC;&#x662F;&#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x6392;&#x969C;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F1A;&#x4FDD;&#x7559;&#x6700;&#x540E; 5 &#x4E2A;&#x5BB9;&#x5668;&#x5386;&#x53F2;&#xFF0C;&#x5176;&#x4F59;&#x7684;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5728;&#x96C6;&#x7FA4;&#x5EFA;&#x7ACB;&#x65F6;(<code>docker swarm init</code>)&#x6216;&#x8005;&#x66F4;&#x65B0;&#x65F6;(<code>docker swarm update</code>)&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53C2;&#x6570; <code>--task-history-limit</code> &#x6765;&#x8C03;&#x6574;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x4E0D;&#x8981;&#x56E0;&#x4E3A;&#x53EA;&#x662F;&#x770B;&#x7740;&#x4E71;&#xFF0C;&#x5C31;&#x5C06;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x8BBE;&#x7684;&#x5F88;&#x5C11;&#xFF0C;&#x56E0;&#x4E3A;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x7684;&#x5B58;&#x5728;&#x662F;&#x6709;&#x539F;&#x56E0;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x969C;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#xFF0C;&#x5728;&#x5C06;&#x6765;&#x7EF4;&#x62A4;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6545;&#x969C;&#x6839;&#x672C;&#x65E0;&#x4ECE;&#x67E5;&#x8D77;&#x3002;</p>
<p>&#x5982;&#x679C;&#x53EA;&#x662F;&#x89C9;&#x5F97;&#x770B;&#x7740;&#x4E71;&#x800C;&#x4E0D;&#x60F3;&#x663E;&#x793A;&#xFF0C;&#x76F4;&#x63A5;&#x7528; <code>--filter</code> &#x52A0;&#x8FC7;&#x6EE4;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker service ps -f <span class="string">&apos;desired-state=running&apos;</span> web                                                                            [e641012]</span><br><span class="line">NAME                IMAGE                NODE  DESIRED STATE  CURRENT STATE           ERROR  PORTS</span><br><span class="line">web.1.uultetkovwch  nginx:1.11.3-alpine  moby  Running        Running 11 minutes ago</span><br><span class="line">web.2.dp0imr8kbmad  nginx:1.11.3-alpine  moby  Running        Running 11 minutes ago</span><br><span class="line">web.3.cc3mrji1dlz2  nginx:1.11.3-alpine  moby  Running        Running 11 minutes ago</span><br><span class="line">web.4.zoadbqu3wtzf  nginx:1.11.3-alpine  moby  Running        Running 11 minutes ago</span><br><span class="line">web.5.u0i5cnh0m5jb  nginx:1.11.3-alpine  moby  Running        Running 10 minutes ago</span><br></pre></td></tr></table></figure>
<h2 id="zen-me-cai-neng-rang-docker-service-create-chuang-jian-de-fu-wu-zheng-chang-tui-chu-shi-bu-chong-qi-a"><a href="#&#x600E;&#x4E48;&#x624D;&#x80FD;&#x8BA9;-docker-service-create-&#x521B;&#x5EFA;&#x7684;&#x670D;&#x52A1;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#x4E0D;&#x91CD;&#x542F;&#x554A;&#xFF1F;" class="headerlink" title="&#x600E;&#x4E48;&#x624D;&#x80FD;&#x8BA9; docker service create &#x521B;&#x5EFA;&#x7684;&#x670D;&#x52A1;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#x4E0D;&#x91CD;&#x542F;&#x554A;&#xFF1F;"></a>&#x600E;&#x4E48;&#x624D;&#x80FD;&#x8BA9; <code>docker service create</code> &#x521B;&#x5EFA;&#x7684;&#x670D;&#x52A1;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#x4E0D;&#x91CD;&#x542F;&#x554A;&#xFF1F; <a href="#zen-me-cai-neng-rang-docker-service-create-chuang-jian-de-fu-wu-zheng-chang-tui-chu-shi-bu-chong-qi-a" class="header-anchor">#</a></h2><p>&#x6709;&#x4E9B;&#x65F6;&#x5019;&#x4F1A;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6BD4;&#x5982;&#x670D;&#x52A1;&#x662F;&#x7531;&#x5E94;&#x7528;&#x5C42;&#x7684;&#x8FDC;&#x7A0B;&#x63A7;&#x5236;&#x6307;&#x4EE4;&#x5173;&#x95ED;&#x7684;&#xFF0C;&#x8FD9;&#x79CD;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x662F;&#x6B63;&#x5E38;&#x884C;&#x4E3A;&#xFF0C;&#x5E76;&#x975E;&#x9519;&#x8BEF;&#x3002;&#x4F46;&#x662F;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EA;&#x8981;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#xFF0C;&#x5F15;&#x64CE;&#x5C31;&#x89C6;&#x4E3A;&#x5F02;&#x5E38;&#xFF0C;&#x5C31;&#x4F1A;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x8C03;&#x5EA6;&#x542F;&#x52A8;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x660E;&#x660E;&#x5173;&#x4E86;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x53C8;&#x88AB;&#x542F;&#x52A8;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>--restart-condition=on-failure</code> &#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x53EA;&#x6709;&#x5728;&#x4E3B;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x7801;&#x4E3A; <strong>&#x975E; 0</strong> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;&#xFF0C;&#x800C;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#xFF08;<code>exited code = 0</code>) &#x65E0;&#x9700;&#x91CD;&#x542F;&#x3002;</p>
<h1 id="docker-machine-xiang-guan-wen-ti-5"><a href="#Docker-Machine-&#x76F8;&#x5173;&#x95EE;&#x9898;-5" class="headerlink" title="Docker Machine &#x76F8;&#x5173;&#x95EE;&#x9898; (5)"></a>Docker Machine &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(5)</code> <a href="#docker-machine-xiang-guan-wen-ti-5" class="header-anchor">#</a></h1><h2 id="da-kai-ming-ling-xing-hou-kan-dao-xia-zai-sha-boot2docker-iso-ran-hou-zong-shi-chao-shi-shi-bai-zen-me-ban"><a href="#&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x884C;&#x540E;&#xFF0C;&#x770B;&#x5230;&#x4E0B;&#x8F7D;&#x5565;-boot2docker-iso&#xFF0C;&#x7136;&#x540E;&#x603B;&#x662F;&#x8D85;&#x65F6;&#x5931;&#x8D25;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x884C;&#x540E;&#xFF0C;&#x770B;&#x5230;&#x4E0B;&#x8F7D;&#x5565; boot2docker.iso&#xFF0C;&#x7136;&#x540E;&#x603B;&#x662F;&#x8D85;&#x65F6;&#x5931;&#x8D25;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a>&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x884C;&#x540E;&#xFF0C;&#x770B;&#x5230;&#x4E0B;&#x8F7D;&#x5565; <code>boot2docker.iso</code>&#xFF0C;&#x7136;&#x540E;&#x603B;&#x662F;&#x8D85;&#x65F6;&#x5931;&#x8D25;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#da-kai-ming-ling-xing-hou-kan-dao-xia-zai-sha-boot2docker-iso-ran-hou-zong-shi-chao-shi-shi-bai-zen-me-ban" class="header-anchor">#</a></h2><p>&#x88C5;&#x4E86; Docker Toolbox &#x7684; Windows &#x7528;&#x6237;&#xFF0C;&#x6216;&#x8005;&#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528; <code>docker-machine</code> &#x521B;&#x5EFA;&#x672C;&#x5730; VirtualBox &#x865A;&#x62DF;&#x673A;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x62A5;&#x9519;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(default) Latest release <span class="keyword">for</span> github.com/boot2docker/boot2docker is v17.06.2-ce</span><br><span class="line">(default) Downloading /Users/jessie/.docker/machine/cache/boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v17.06.2-ce/boot2docker.iso...</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x7ECF;&#x8FC7;&#x6F2B;&#x957F;&#x7684;&#x7B49;&#x5F85;&#x540E;&#xFF0C;&#x8BF4;&#x8D85;&#x65F6;&#x3001;&#x6216;&#x8005;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;&#x6700;&#x540E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x5931;&#x8D25;&#x3002;</p>
<p>&#x8FD9;&#x9996;&#x5148;&#x8FD8;&#x662F;&#x5148;&#x53BB;<em>&#x611F;&#x8C22;</em>&#x4F1F;&#x5927;&#x7684;&#x5899;&#x53CA;&#x5176;&#x4EB2;&#x5C5E;&#xFF0C;&#x6CA1;&#x6709;&#x4ED6;&#x4EEC;&#x7684;&#x4F5C;&#x795F;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x57FA;&#x672C;&#x51FA;&#x73B0;&#x4E0D;&#x4E86;&#x3002;</p>
<p>&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x6240;&#x8BF4;&#x7684; Docker &#x662F;&#x57FA;&#x4E8E; Linux &#x5185;&#x6838;&#x7684;&#x3002;&#x56E0;&#x6B64;&#x5728; Windows &#x73AF;&#x5883;&#x4E2D;&#xFF0C;Docker Toolbox &#x4F1A;&#x4F7F;&#x7528; Docker Machine &#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>default</code> &#x7684; VirtualBox Linux &#x865A;&#x62DF;&#x673A;&#xFF0C;&#x6765;&#x8FDB;&#x884C; Docker &#x64CD;&#x4F5C;&#x3002;&#x7531;&#x4E8E;&#x53EA;&#x9700;&#x8981;&#x8FD0;&#x884C; Docker&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A; Linux &#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x7CBE;&#x7B80;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x590D;&#x6742;&#x7684;&#x7CFB;&#x7EDF;&#x529F;&#x80FD;&#x3002;&#x7531;&#x4E8E;&#x5386;&#x53F2;&#x539F;&#x56E0;&#xFF0C;&#x8FD9;&#x4E2A;&#x5FAE;&#x7F29;&#x7248;&#x7684; Linux &#x7CFB;&#x7EDF;&#x662F;&#x88AB;&#x79F0;&#x4E3A; <code>boot2docker</code> &#x7684;&#x7CFB;&#x7EDF;&#x3002;</p>
<p>&#x800C; Docker Machine &#x5728;&#x5EFA;&#x7ACB;&#x865A;&#x62DF;&#x673A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x4ECE;<a href="https://github.com/boot2docker/boot2docker/releases" target="_blank" rel="noopener">&#x7F51;&#x4E0A;</a>&#x68C0;&#x67E5; Docker &#x6700;&#x65B0;&#x7684;&#x7248;&#x672C;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x4E2D;&#x7684; ISO &#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x6216;&#x8005;&#x4E0D;&#x662F;&#x6700;&#x65B0;&#x7248;&#x672C;&#xFF0C;&#x90A3;&#x5C31;&#x4F1A;&#x53BB;&#x4ECE;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684; ISO &#x6587;&#x4EF6;&#x3002;&#x800C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5C31;&#x662F;&#x63D0;&#x793A;&#x4E2D;&#x6240;&#x8BF4;&#x7684; <code>boot2docker.iso</code> &#x6587;&#x4EF6;&#x3002;&#x7531;&#x4E8E;&#x4F1F;&#x5927;&#x7684;&#x5899;&#x7ECF;&#x5E38;&#x505A;&#x51FA;&#x5237;&#x51FA;&#x955C;&#x7387;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4ECE; GitHub &#x4E0A;&#x4E0B;&#x8F7D;&#x4E1C;&#x897F;&#x7ECF;&#x5E38;&#x4F1A;&#x88AB;&#x5E72;&#x6270;&#x548C;&#x963B;&#x65AD;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x4E3A;&#x5565;&#x7ECF;&#x5E38;&#x51FA;&#x73B0;&#x8D85;&#x65F6;&#x3001;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x76F4;&#x63A5;&#x4E0B;&#x4E0D;&#x884C;&#xFF0C;&#x90A3;&#x5C31;&#x624B;&#x5DE5;&#x7FFB;&#x5899;&#x4E0B;&#x2026;&#x2026;&#x1F639;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x8FD8;&#x6709;&#x53E6;&#x4E00;&#x4E2A;&#x529E;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x8FC5;&#x96F7;&#x4E0B;&#x8F7D;&#x3002;&#x8FC5;&#x96F7;&#x62E5;&#x6709;<em>&#x7EC6;&#x601D;&#x6781;&#x6050;</em>&#x7684;&#x4E0B;&#x8F7D;&#x7F13;&#x5B58;&#xFF0C;&#x57FA;&#x672C;&#x7528;&#x8FC5;&#x96F7;&#x4E0B;&#x8F7D;&#x8FC7;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x8FC5;&#x96F7;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x90FD;&#x4F1A;&#x7F13;&#x5B58;&#x4E00;&#x4EFD;&#x1F628;&#x2026;&#x2026;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7528;&#x8FC5;&#x96F7;&#x4E0B;&#x8F7D;&#x8FD9;&#x4E2A; <code>boot2docker.iso</code> &#x7684;&#x8BDD;&#xFF0C;&#x5F88;&#x5927;&#x7684;&#x51E0;&#x7387;&#x8FC5;&#x96F7;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4E00;&#x4EFD;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF0C;&#x8FC5;&#x96F7;&#x4F1A;&#x76F4;&#x63A5;&#x4ECE;&#x5B83;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5E2E;&#x4F60;&#x628A;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x907F;&#x514D;&#x4E86;&#x7FFB;&#x5899;&#x4E86;&#x3002;</p>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x62A5;&#x9519;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5F97;&#x77E5;&#xFF0C;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x94FE;&#x63A5;&#x4E3A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/boot2docker/boot2docker/releases/download/v17.06.2-ce/boot2docker.iso</span><br></pre></td></tr></table></figure>
<p>&#x5C06;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#x6DFB;&#x52A0;&#x5230;&#x4F60;&#x7684;&#x8FC5;&#x96F7;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;&#x4E2D;&#x53BB;&#xFF0C;<strong>&#x6CE8;&#x610F;&#xFF1A;&#x6362;&#x6210;&#x4F60;&#x7684;&#x62A5;&#x9519;&#x4E2D;&#x7684;&#x94FE;&#x63A5;&#xFF01;&#xFF01;</strong>&#x3002;</p>
<p>&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x786E;&#x4FDD;&#x6587;&#x4EF6;&#x540D;&#x4E3A; <code>boot2docker.iso</code>&#xFF0C;&#x7136;&#x540E;&#x7528; <code>shasum -a 256 boot2docker.iso</code> &#x6821;&#x9A8C;&#x4E00;&#x4E0B;&#x6587;&#x4EF6;&#x7684;&#x5B8C;&#x6574;&#x6027;&#xFF0C;&#x786E;&#x4FDD;&#x548C;<a href="https://github.com/boot2docker/boot2docker/releases" target="_blank" rel="noopener">&#x5B98;&#x7F51;</a><strong>&#x5BF9;&#x5E94;&#x7684;&#x7248;&#x672C;</strong>&#x4E00;&#x6837;&#x540E;&#xFF0C;&#x518D;&#x653E;&#x7F6E;&#x5230;&#x62A5;&#x9519;&#x4E2D;&#x7684;&#x90A3;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/jessie/.docker/machine/cache/boot2docker.iso</span><br></pre></td></tr></table></figure>
<p><strong>&#x6CE8;&#x610F;&#xFF1A;&#x6362;&#x6210;&#x4F60;&#x7684;&#x62A5;&#x9519;&#x4E2D;&#x7684;&#x90A3;&#x4E2A;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#xFF01;&#xFF01;</strong></p>
<p>&#x624B;&#x5DE5;&#x4E0B;&#x8F7D;&#x597D;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x8FD0;&#x884C; Docker Quickstart Terminal&#xFF0C;&#x6216;&#x8005;&#x91CD;&#x65B0;&#x4F7F;&#x7528; <code>docker-machine</code> &#x521B;&#x5EFA; Virtualbox &#x865A;&#x62DF;&#x673A;&#xFF0C;&#x4E00;&#x5207;&#x5C31;&#x5E94;&#x8BE5;&#x6B63;&#x5E38;&#x4E86;&#x3002;</p>
<h2 id="zhuang-wan-docker-toolbox-hou-fa-xian-xia-zai-jing-xiang-su-du-tai-man-shi-bu-shi-xu-yao-xiu-gai-shi-me-pei-zhi-wen-jian"><a href="#&#x88C5;&#x5B8C;-Docker-Toolbox-&#x540E;&#x53D1;&#x73B0;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1F;" class="headerlink" title="&#x88C5;&#x5B8C; Docker Toolbox &#x540E;&#x53D1;&#x73B0;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1F;"></a>&#x88C5;&#x5B8C; Docker Toolbox &#x540E;&#x53D1;&#x73B0;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1F; <a href="#zhuang-wan-docker-toolbox-hou-fa-xian-xia-zai-jing-xiang-su-du-tai-man-shi-bu-shi-xu-yao-xiu-gai-shi-me-pei-zhi-wen-jian" class="header-anchor">#</a></h2><p>&#x5B89;&#x88C5; Docker Toolbox &#x65F6;&#xFF0C;&#x5B89;&#x88C5;&#x7A0B;&#x5E8F;&#x4F1A;&#x4F7F;&#x7528; <code>docker-machine</code> &#x4E3A;&#x4F60;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>default</code> &#x7684;&#x865A;&#x62DF;&#x673A;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine create -d virtualbox default</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x6CA1;&#x6709;&#x52A0;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x62E5;&#x6709;&#x4F1F;&#x5927;&#x7684;&#x5899;&#x7684;&#x56FD;&#x5185;&#x7F51;&#x7EDC;&#x6765;&#x8BF4;&#xFF0C;&#x6709;&#x4E9B;&#x4E0D;&#x65B9;&#x4FBF;&#x4F7F;&#x7528;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x7B80;&#x5355;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x5728;&#x5B89;&#x88C5;&#x5B8C; Docker Toolbox &#x540E;&#xFF0C;&#x5220;&#x6389;&#x9ED8;&#x8BA4;&#x7684;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x8BE5;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x521B;&#x5EFA;&#x65F6;&#x52A0;&#x5165;&#x6709;&#x4E2D;&#x56FD;&#x7279;&#x8272;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker-machine rm default</span><br><span class="line"></span><br><span class="line">docker-machine create -d virtualbox \</span><br><span class="line">     --engine-registry-mirror https://registry.docker-cn.com \</span><br><span class="line">     --engine-insecure-registry 192.168.99.0/24 \</span><br><span class="line">     --engine-storage-driver overlay2 \</span><br><span class="line">     default</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&#x5220;&#x9664; <code>default</code> &#x865A;&#x62DF;&#x673A;&#x7684;&#x65F6;&#x5019;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x5176;&#x4E2D;&#x955C;&#x50CF;&#x3001;&#x5BB9;&#x5668;&#x7B49;&#x5185;&#x5BB9;&#x90FD;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;</p>
</blockquote>
<h2 id="ru-he-zai-docker-toolbox-zhong-chuang-jian-de-default-xu-ni-ji-zhong-tian-jia-docker-opts-zhi-lei-de-pei-zhi"><a href="#&#x5982;&#x4F55;&#x5728;-Docker-Toolbox-&#x4E2D;&#x521B;&#x5EFA;&#x7684;-default-&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x6DFB;&#x52A0;DOCKER-OPTS&#x4E4B;&#x7C7B;&#x7684;&#x914D;&#x7F6E;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5728; Docker Toolbox &#x4E2D;&#x521B;&#x5EFA;&#x7684; default &#x865A;&#x62DF;&#x673A;&#x4E2D;&#x6DFB;&#x52A0;DOCKER_OPTS&#x4E4B;&#x7C7B;&#x7684;&#x914D;&#x7F6E;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5728; Docker Toolbox &#x4E2D;&#x521B;&#x5EFA;&#x7684; <code>default</code> &#x865A;&#x62DF;&#x673A;&#x4E2D;&#x6DFB;&#x52A0;<code>DOCKER_OPTS</code>&#x4E4B;&#x7C7B;&#x7684;&#x914D;&#x7F6E;&#xFF1F; <a href="#ru-he-zai-docker-toolbox-zhong-chuang-jian-de-default-xu-ni-ji-zhong-tian-jia-docker-opts-zhi-lei-de-pei-zhi" class="header-anchor">#</a></h2><p>&#x5176;&#x5B9E;&#x5728;&#x6700;&#x521D;&#x521B;&#x5EFA;&#x8BE5;docker host&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>docker-machine</code> &#x6307;&#x5B9A;&#x5F15;&#x64CE;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8981;&#x7D27;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;rm&#x6389;&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E0D;&#x65B9;&#x4FBF; rm &#x6389;&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x53EF;&#x4EE5; <code>docker-machine ssh</code> &#x8FDB;&#x5165;&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x7136;&#x540E;&#x4FEE;&#x6539; <code>/var/lib/boot2docker/profile</code> &#x6587;&#x4EF6;&#xFF0C;&#x4FEE;&#x6539;&#x91CC;&#x9762;&#x7684; <code>EXTRA_ARGS</code> &#x53C2;&#x6570;&#x5373;&#x53EF;&#x3002;</p>
<h2 id="docker-machine-chuang-jian-de-zhu-ji-zen-me-zhi-jie-ssh-jin-qu-gai-liao-root-mi-ma-hao-xiang-ye-mei-yong"><a href="#docker-machine-&#x521B;&#x5EFA;&#x7684;&#x4E3B;&#x673A;&#x600E;&#x4E48;&#x76F4;&#x63A5;-ssh-&#x8FDB;&#x53BB;&#xFF1F;&#x6539;&#x4E86;-root-&#x5BC6;&#x7801;&#x597D;&#x50CF;&#x4E5F;&#x6CA1;&#x7528;&#xFF1F;" class="headerlink" title="docker-machine &#x521B;&#x5EFA;&#x7684;&#x4E3B;&#x673A;&#x600E;&#x4E48;&#x76F4;&#x63A5; ssh &#x8FDB;&#x53BB;&#xFF1F;&#x6539;&#x4E86; root &#x5BC6;&#x7801;&#x597D;&#x50CF;&#x4E5F;&#x6CA1;&#x7528;&#xFF1F;"></a><code>docker-machine</code> &#x521B;&#x5EFA;&#x7684;&#x4E3B;&#x673A;&#x600E;&#x4E48;&#x76F4;&#x63A5; <code>ssh</code> &#x8FDB;&#x53BB;&#xFF1F;&#x6539;&#x4E86; <code>root</code> &#x5BC6;&#x7801;&#x597D;&#x50CF;&#x4E5F;&#x6CA1;&#x7528;&#xFF1F; <a href="#docker-machine-chuang-jian-de-zhu-ji-zen-me-zhi-jie-ssh-jin-qu-gai-liao-root-mi-ma-hao-xiang-ye-mei-yong" class="header-anchor">#</a></h2><p><code>docker-machine</code> &#x521B;&#x5EFA;&#x7684;&#x4E3B;&#x673A;&#xFF0C;&#x4F1A;&#x9075;&#x5FAA;&#x5B89;&#x5168;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x5141;&#x8BB8; <code>root</code> &#x767B;&#x5F55;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x5141;&#x8BB8;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#xFF0C;&#x53EA;&#x5141;&#x8BB8;<code>&#x5BC6;&#x94A5;</code>&#x767B;&#x5F55;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x5F88;&#x591A;&#x56FD;&#x5185;&#x6587;&#x7AE0;&#x79F0;&#x4E3A;&#x7684;&#x514D;&#x5BC6;&#x767B;&#x5F55;&#xFF0C;&#x5176;&#x5B9E;&#x5E76;&#x975E;&#x514D;&#x5BC6;&#xFF09;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x4F7F;&#x7528;&#x5BC6;&#x94A5; <code>~/.docker/machine/machines/&lt;&#x673A;&#x5668;&#x540D;&gt;/id_rsa</code> &#x767B;&#x5F55;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh -i ~/.docker/machine/machines/default/id_rsa \</span><br><span class="line">    -o UserKnownHostsFile=/dev/null \</span><br><span class="line">    -o StrictHostKeyChecking=no \</span><br><span class="line">    docker@$(docker-machine ip default)</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#x8FDE;&#x63A5;&#x7684;&#x662F; <code>default</code> &#x8FD9;&#x4E2A;&#x673A;&#x5668;&#xFF0C;&#x9700;&#x8981;&#x8FDE;&#x63A5;&#x5176;&#x5B83;&#x7684;&#x673A;&#x5668;&#x6362;&#x6210;&#x522B;&#x7684;&#x5373;&#x53EF;&#x3002;&#x53E6;&#x5916;&#x7684;&#x4E24;&#x4E2A; <code>-o</code> &#x7684;&#x53C2;&#x6570;&#x662F;&#x8BA9;&#x5176;&#x4E0D;&#x8981;&#x6821;&#x9A8C;&#x670D;&#x52A1;&#x5668;&#x5BC6;&#x94A5;&#xFF0C;&#x8FD9;&#x5F53;&#x7136;&#x662F;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x8BD5;&#x9A8C;&#x7684;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x5173;&#x7CFB;&#x3002;</p>
<h2 id="docker-machine-shi-yong-d-generic-shi-zhi-ding-yong-hu-generic-ssh-user-hou-fa-xian-yao-sudo-mi-ma-jie-guo-bao-cuo-tui-chu-zhe-shi-zen-me-hui-shi"><a href="#docker-machine-&#x4F7F;&#x7528;-d-generic-&#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x7528;&#x6237;-generic-ssh-user-&#x540E;&#x53D1;&#x73B0;&#x8981;-sudo-&#x5BC6;&#x7801;&#xFF0C;&#x7ED3;&#x679C;&#x62A5;&#x9519;&#x9000;&#x51FA;&#xFF0C;&#x8FD9;&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F;" class="headerlink" title="docker-machine &#x4F7F;&#x7528; -d generic &#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x7528;&#x6237; --generic-ssh-user &#x540E;&#x53D1;&#x73B0;&#x8981; sudo &#x5BC6;&#x7801;&#xFF0C;&#x7ED3;&#x679C;&#x62A5;&#x9519;&#x9000;&#x51FA;&#xFF0C;&#x8FD9;&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F;"></a><code>docker-machine</code> &#x4F7F;&#x7528; <code>-d generic</code> &#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x7528;&#x6237; <code>--generic-ssh-user</code> &#x540E;&#x53D1;&#x73B0;&#x8981; <code>sudo</code> &#x5BC6;&#x7801;&#xFF0C;&#x7ED3;&#x679C;&#x62A5;&#x9519;&#x9000;&#x51FA;&#xFF0C;&#x8FD9;&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F; <a href="#docker-machine-shi-yong-d-generic-shi-zhi-ding-yong-hu-generic-ssh-user-hou-fa-xian-yao-sudo-mi-ma-jie-guo-bao-cuo-tui-chu-zhe-shi-zen-me-hui-shi" class="header-anchor">#</a></h2><p>&#x4F60;&#x5E94;&#x8BE5;&#x518D;&#x4ED4;&#x7EC6;&#x770B;&#x770B; <code>generic</code> &#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/machine/drivers/generic/#/sudo-privileges" target="_blank" rel="noopener">https://docs.docker.com/machine/drivers/generic/#/sudo-privileges</a></p>
<p>&#x91CC;&#x9762;&#x8BF4;&#x7684;&#x5F88;&#x6E05;&#x695A;&#xFF0C;&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x662F; <code>root</code>&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x901A;&#x8FC7; <code>--generic-ssh-user</code> &#x6307;&#x5B9A;&#x5176;&#x5B83;&#x7528;&#x6237;&#x7684;&#x8BDD;&#xFF0C;&#x8BE5;&#x7528;&#x6237;&#x5FC5;&#x987B;&#x62E5;&#x6709;&#x65E0;&#x5BC6;&#x7801;<code>sudo</code>&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x5728; <code>sudoers</code> &#x6587;&#x4EF6;&#x4E2D;&#x5BF9;&#x8BE5;&#x7528;&#x6237;&#x914D;&#x7F6E; <code>NOPASSWD</code>&#x3002;</p>
<h1 id="docker-registry-xiang-guan-wen-ti-10"><a href="#Docker-Registry-&#x76F8;&#x5173;&#x95EE;&#x9898;-10" class="headerlink" title="Docker Registry &#x76F8;&#x5173;&#x95EE;&#x9898; (10)"></a>Docker Registry &#x76F8;&#x5173;&#x95EE;&#x9898; <code>(10)</code> <a href="#docker-registry-xiang-guan-wen-ti-10" class="header-anchor">#</a></h1><h2 id="wo-docker-push-de-shi-hou-zen-me-bao-authentication-required-cuo-wu"><a href="#&#x6211;-docker-push-&#x7684;&#x65F6;&#x5019;&#x600E;&#x4E48;&#x62A5;-authentication-required-&#x9519;&#x8BEF;&#xFF1F;" class="headerlink" title="&#x6211; docker push &#x7684;&#x65F6;&#x5019;&#x600E;&#x4E48;&#x62A5; authentication required &#x9519;&#x8BEF;&#xFF1F;"></a>&#x6211; <code>docker push</code> &#x7684;&#x65F6;&#x5019;&#x600E;&#x4E48;&#x62A5; <code>authentication required</code> &#x9519;&#x8BEF;&#xFF1F; <a href="#wo-docker-push-de-shi-hou-zen-me-bao-authentication-required-cuo-wu" class="header-anchor">#</a></h2><p>&#x56E0;&#x4E3A;&#x4F60;&#x6CA1;&#x6709;&#x767B;&#x5F55;&#x3002;&#x5982;&#x679C;&#x662F;&#x5411; Docker Hub &#x63A8;&#x9001;&#x955C;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#xFF1A; <a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></p>
<h2 id="wei-shi-me-wo-docker-login-shi-bai-liao-wo-zhu-ce-yong-hu-liao-zai-wang-zhan-deng-lu-ye-mei-wen-ti-ya"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x6211;-docker-login-&#x5931;&#x8D25;&#x4E86;&#xFF1F;&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x4E86;&#xFF0C;&#x5728;&#x7F51;&#x7AD9;&#x767B;&#x5F55;&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x5440;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x6211; docker login &#x5931;&#x8D25;&#x4E86;&#xFF1F;&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x4E86;&#xFF0C;&#x5728;&#x7F51;&#x7AD9;&#x767B;&#x5F55;&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x5440;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x6211; <code>docker login</code> &#x5931;&#x8D25;&#x4E86;&#xFF1F;&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x4E86;&#xFF0C;&#x5728;&#x7F51;&#x7AD9;&#x767B;&#x5F55;&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x5440;&#xFF1F; <a href="#wei-shi-me-wo-docker-login-shi-bai-liao-wo-zhu-ce-yong-hu-liao-zai-wang-zhan-deng-lu-ye-mei-wen-ti-ya" class="header-anchor">#</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don<span class="string">&apos;t have a Docker ID, </span></span><br><span class="line"><span class="string">head over to https://hub.docker.com to create one.</span></span><br><span class="line"><span class="string">Username: pinkman@heisenb.org</span></span><br><span class="line"><span class="string">Password:</span></span><br><span class="line"><span class="string">Error response from daemon: Get https://registry-1.docker.io/v2/: unauthorized: incorrect username or password</span></span><br></pre></td></tr></table></figure>
<p>&#x5443;&#xFF0C;&#x8FD9;&#x91CC;&#x5E94;&#x8BE5;&#x662F;<strong>&#x7528;&#x6237;&#x540D;</strong>&#x7684;&#xFF0C;&#x600E;&#x4E48;&#x5199;&#x4E86;&#x4E2A;<strong>&#x7535;&#x5B50;&#x90AE;&#x4EF6;</strong> <a href="mailto:`pinkman@heisenb.org" target="_blank" rel="noopener">`pinkman@heisenb.org</a><code>&#x5462;&#xFF1F;&#x867D;&#x7136; [Docker Hub &#x7F51;&#x7AD9;](https://hub.docker.com)&#x5141;&#x8BB8;&#x4F60;&#x4F7F;&#x7528;&#x7528;&#x6237;&#x540D;&#x6216;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x767B;&#x5F55;&#xFF0C;&#x4F46;&#x662F;</code>docker login` &#x53EA;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x6362;&#x6210;&#x4F60;&#x7684;&#x7528;&#x6237;&#x540D;&#x767B;&#x5F55;&#x5C31;&#x597D;&#x4E86;&#x3002;</p>
<h2 id="wo-zhu-ce-yong-hu-pinkman-liao-zen-me-huan-shi-wu-fa-docker-push-mrwhite-xxx-a"><a href="#&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237;-pinkman-&#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x8FD8;&#x662F;&#x65E0;&#x6CD5;-docker-push-mrwhite-xxx-&#x554A;&#xFF1F;" class="headerlink" title="&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237; pinkman &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x8FD8;&#x662F;&#x65E0;&#x6CD5; docker push mrwhite/xxx &#x554A;&#xFF1F;"></a>&#x6211;&#x6CE8;&#x518C;&#x7528;&#x6237; <code>pinkman</code> &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x8FD8;&#x662F;&#x65E0;&#x6CD5; <code>docker push mrwhite/xxx</code> &#x554A;&#xFF1F; <a href="#wo-zhu-ce-yong-hu-pinkman-liao-zen-me-huan-shi-wu-fa-docker-push-mrwhite-xxx-a" class="header-anchor">#</a></h2><p>&#x1F612;&#x2026;&#x2026;&#x56E0;&#x4E3A;&#x4F60; <code>push</code> &#x5230;&#x522B;&#x4EBA;&#xFF08;<strong>mrwhite</strong>&#xFF09;&#x7684; <code>repo</code> &#x4E86;&#xFF0C;&#x4F60;&#x53EA;&#x80FD; <code>push</code> &#x5230; <code>pinkman/xxx</code> &#x4E0B;&#x3002;</p>
<h2 id="bu-guan-yong-a-wo-zhe-hui-docker-push-pinkman-xxx-liao-zen-me-gao-su-wo-jing-xiang-bu-cun-zai-a"><a href="#&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF0C;&#x6211;&#x8FD9;&#x56DE;-docker-push-pinkman-xxx-&#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x544A;&#x8BC9;&#x6211;&#x955C;&#x50CF;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F;" class="headerlink" title="&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF0C;&#x6211;&#x8FD9;&#x56DE; docker push pinkman/xxx &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x544A;&#x8BC9;&#x6211;&#x955C;&#x50CF;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F;"></a>&#x4E0D;&#x7BA1;&#x7528;&#x554A;&#xFF0C;&#x6211;&#x8FD9;&#x56DE; <code>docker push pinkman/xxx</code> &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x544A;&#x8BC9;&#x6211;&#x955C;&#x50CF;&#x4E0D;&#x5B58;&#x5728;&#x554A;&#xFF1F; <a href="#bu-guan-yong-a-wo-zhe-hui-docker-push-pinkman-xxx-liao-zen-me-gao-su-wo-jing-xiang-bu-cun-zai-a" class="header-anchor">#</a></h2><p>&#x1F613;&#x2026;&#x2026;&#x56E0;&#x4E3A;&#x4F60;&#x6CA1;&#x6709; <code>tag</code> &#x5BF9;&#x5E94;&#x7684;&#x955C;&#x50CF;&#x4E3A; <code>pinkman/xxx</code>&#x3002;</p>
<p>&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x90FD;&#x662F;&#x7531;&#x4E8E;&#x4F60;&#x6CA1;&#x6709;&#x53BB;&#x770B;&#x6587;&#x6863;&#xFF0C;&#x5EFA;&#x8BAE;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x4E00;&#x6B21;&#x6B21;&#x7684;&#x778E;&#x649E;&#xFF0C;&#x53BB;&#x770B;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;</p>
<p><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">https://docs.docker.com/get-started/</a></p>
<h2 id="docker-push-dao-si-you-registry-zong-shi-bu-cheng-gong-zen-me-ban"><a href="#docker-push-&#x5230;&#x79C1;&#x6709;-registry-&#x603B;&#x662F;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;" class="headerlink" title="docker push &#x5230;&#x79C1;&#x6709; registry &#x603B;&#x662F;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;"></a><code>docker push</code> &#x5230;&#x79C1;&#x6709; <code>registry</code> &#x603B;&#x662F;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F; <a href="#docker-push-dao-si-you-registry-zong-shi-bu-cheng-gong-zen-me-ban" class="header-anchor">#</a></h2><p>&#x5982;&#x679C;&#x5728;&#x62A5;&#x9519;&#x4E2D;&#x770B;&#x5230;&#x4E86; <code>https</code>&#xFF0C;&#x90A3;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A; <code>registry</code> &#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x8BC1;&#x4E66;&#x3002;</p>
<p>&#x5F88;&#x591A;&#x4EBA;&#x6700;&#x5F00;&#x59CB;&#x914D;&#x7F6E; <code>registry</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E3A;&#x4E86;&#x7B80;&#x5355;&#x800C;&#x6CA1;&#x6709;&#x914D;&#x7F6E; <code>TLS</code> &#x8BC1;&#x4E66;&#x3002;</p>
<p>&#x8FD9;&#x662F;<strong>&#x4E0D;&#x5B89;&#x5168;</strong>&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x5728; Docker &#x4E2D;<strong>&#x4E0D;&#x63A8;&#x8350;</strong>&#x4F7F;&#x7528;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x523B;&#x610F;&#x7684;&#x589E;&#x52A0;&#x4E86;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x4E0D;&#x5B89;&#x5168; <code>registry</code> &#x7684;&#x590D;&#x6742;&#x5EA6;&#x3002;&#x4F7F;&#x7528;&#x8005;&#x5FC5;&#x987B;&#x5728; <code>dockerd</code> &#x914D;&#x7F6E;&#x4E2D;&#xFF0C;&#x660E;&#x786E;&#x58F0;&#x660E;&#x8981;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x4E0D;&#x5B89;&#x5168;&#x7684; <code>registry</code>&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x5728; <a href="http://www.ubuntu.com/download/server" target="_blank" rel="noopener">Ubuntu 16.04</a> &#x4E2D;&#xFF0C;&#x7F16;&#x8F91; <code>/etc/systemd/system/multi-user.target.wants/docker.service</code> &#x4E2D;&#x7684; <code>ExecStart=</code> &#x7684;&#x7ED3;&#x5C3E;&#xFF0C;&#x52A0;&#x5165; <code>--insecure-registry=192.168.99.100:5000</code>&#xFF0C;&#x5C06; <code>192.168.99.100:5000</code> &#x66FF;&#x6362;&#x6210;&#x4F60;&#x7684; <code>registry</code> &#x5730;&#x5740;&#x3002;&#x5982;&#x679C;&#x6709;&#x5F88;&#x591A; <code>registry</code>&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x591A;&#x7EC4;&#x3002;&#x6216;&#x8005;&#x5982;&#x679C;&#x865A;&#x62DF;&#x673A;&#x7684; <code>IP</code> &#x603B;&#x662F;&#x53D8;&#x5316;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>CIDR</code> &#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x6BD4;&#x5982; <code>--insecure-registry=192.168.99.0/24</code>&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x6D4B;&#x8BD5;&#x8FC7;&#x540E;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;<a href="https://docs.docker.com/registry/deploying/#/get-a-certificate" target="_blank" rel="noopener">&#x914D;&#x4E0A; TLS &#x8BC1;&#x4E66;</a>&#x3002;&#x73B0;&#x5728; <a href="https://letsencrypt.org/getting-started/" target="_blank" rel="noopener">Let&#x2019;s Encrpyt</a> &#x5DF2;&#x7ECF;&#x652F;&#x6301; <code>DNS</code> &#x8BA4;&#x8BC1;&#x4E86;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x66B4;&#x9732;&#x5185;&#x90E8;&#x7684;&#x673A;&#x5668;&#x4E8E;&#x516C;&#x7F51;&#xFF0C;&#x7528;&#x5176;<a href="https://certbot.eff.org/" target="_blank" rel="noopener">&#x811A;&#x672C;</a>&#x81EA;&#x52A8;&#x53D6;&#x5F97;&#x514D;&#x8D39;&#x8BC1;&#x4E66;&#x662F;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x3002;</p>
<h2 id="wo-docker-push-liao-hen-duo-jing-xiang-dao-si-you-de-registry-shang-zen-me-cai-neng-cha-kan-shang-mian-du-you-sha-huo-zhe-sou-suo"><a href="#&#x6211;-docker-push-&#x4E86;&#x5F88;&#x591A;&#x955C;&#x50CF;&#x5230;&#x79C1;&#x6709;&#x7684;-registry-&#x4E0A;&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x67E5;&#x770B;&#x4E0A;&#x9762;&#x90FD;&#x6709;&#x5565;&#xFF1F;&#x6216;&#x8005;&#x641C;&#x7D22;&#xFF1F;" class="headerlink" title="&#x6211; docker push &#x4E86;&#x5F88;&#x591A;&#x955C;&#x50CF;&#x5230;&#x79C1;&#x6709;&#x7684; registry &#x4E0A;&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x67E5;&#x770B;&#x4E0A;&#x9762;&#x90FD;&#x6709;&#x5565;&#xFF1F;&#x6216;&#x8005;&#x641C;&#x7D22;&#xFF1F;"></a>&#x6211; <code>docker push</code> &#x4E86;&#x5F88;&#x591A;&#x955C;&#x50CF;&#x5230;&#x79C1;&#x6709;&#x7684; <code>registry</code> &#x4E0A;&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x67E5;&#x770B;&#x4E0A;&#x9762;&#x90FD;&#x6709;&#x5565;&#xFF1F;&#x6216;&#x8005;&#x641C;&#x7D22;&#xFF1F; <a href="#wo-docker-push-liao-hen-duo-jing-xiang-dao-si-you-de-registry-shang-zen-me-cai-neng-cha-kan-shang-mian-du-you-sha-huo-zhe-sou-suo" class="header-anchor">#</a></h2><p>&#x4E24;&#x79CD;&#x529E;&#x6CD5;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x4F7F;&#x7528; Registry V2 API&#x3002;&#x53EF;&#x4EE5;&#x5217;&#x51FA;&#x6240;&#x6709;&#x955C;&#x50CF;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://&lt;&#x79C1;&#x6709;registry&#x5730;&#x5740;&gt;/v2/_catalog</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x679C;&#x79C1;&#x6709; Registry &#x5C1A;&#x652F;&#x6301; V1 API&#xFF08;<strong>&#x5DF2;&#x7ECF;&#x5E9F;&#x5F03;</strong>&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>docker search</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search &lt;&#x79C1;&#x6709;registry&#x5730;&#x5740;&gt;/&lt;&#x5173;&#x952E;&#x5B57;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="docker-search-wei-shi-me-mei-you-ban-fa-zai-si-you-registry-zhong-yong"><a href="#docker-search-&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5728;&#x79C1;&#x6709;-Registry-&#x4E2D;&#x7528;&#xFF1F;" class="headerlink" title="docker search &#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5728;&#x79C1;&#x6709; Registry &#x4E2D;&#x7528;&#xFF1F;"></a><code>docker search</code> &#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5728;&#x79C1;&#x6709; <code>Registry</code> &#x4E2D;&#x7528;&#xFF1F; <a href="#docker-search-wei-shi-me-mei-you-ban-fa-zai-si-you-registry-zhong-yong" class="header-anchor">#</a></h2><p><code>docker search</code> &#x547D;&#x4EE4;&#x6240;&#x4F7F;&#x7528;&#x7684; <code>API</code> &#x662F; <code>/search</code>&#xFF0C;&#x800C;&#x8FD9;&#x662F;&#x5DF2;&#x7ECF;&#x5E9F;&#x5F03;&#x7684; Registry <code>v1</code> &#x7684; API&#xFF0C;&#x76EE;&#x524D;&#x7684; Registry &#x90FD;&#x5DF2;&#x7ECF;&#x662F; <code>v2</code> API&#x4E86;&#xFF0C;&#x65E9;&#x5C31;&#x4E0D;&#x652F;&#x6301; <code>v1</code> API &#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x7136;&#x7528;&#x4E0D;&#x4E86;&#x3002;&#x800C; <code>v2</code> &#x7684; API &#x4E2D;&#x53EA;&#x6709;&#x5217;&#x8868; <code>/_catalogs</code> API&#xFF0C;&#x6CA1;&#x6709;&#x540C;&#x7B49;&#x7684; <code>search</code> API&#x3002;&#x6240;&#x4EE5;&#x4E8B;&#x5B9E;&#x4E0A; <code>docker search</code> &#x547D;&#x4EE4;&#x5DF2;&#x7ECF;&#x5E9F;&#x5F03;&#x4E86;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;<code>docker search</code> &#x529F;&#x80FD;&#x592A;&#x8FC7;&#x5C40;&#x9650;&#xFF0C;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x5B9E;&#x7528;&#x3002;&#x8FDC;&#x4E0D;&#x5982;&#x76F4;&#x63A5;&#x53BB; <a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">Docker Hub &#x7F51;&#x7AD9;</a> &#x641C;&#x7D22;&#x3002;Docker Hub &#x7F51;&#x7AD9;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x67E5;&#x627E;&#x955C;&#x50CF;&#xFF0C;&#x627E;&#x5230;&#x540E;&#x8FD8;&#x53EF;&#x4EE5;&#x770B;&#x5BF9;&#x5E94;&#x7684;<strong>&#x6807;&#x7B7E;</strong>&#x3001;&#x955C;&#x50CF;<strong>&#x4F7F;&#x7528;&#x6587;&#x6863;</strong>&#x3001;&#x6BCF;&#x4E2A;&#x955C;&#x50CF;&#x7684; <code>Dockerfile</code>&#x3001;<strong>&#x5B89;&#x5168;&#x626B;&#x63CF;&#x7ED3;&#x679C;</strong>&#x7B49;&#x7B49;&#x3002;</p>
<p>&#x5982;&#x679C;&#x53EA;&#x4F7F;&#x7528;&#x5F00;&#x6E90;&#x7684; <code>docker registry</code> &#x81EA;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x8BDD;&#xFF0C;&#x76EE;&#x524D;&#x53EA;&#x80FD;&#x7528; <code>API</code> &#x8BBF;&#x95EE;&#x5176;&#x5185;&#x5BB9;&#x3002;&#x9664;&#x6B64;&#x4EE5;&#x5916;&#xFF0C;&#x5B98;&#x65B9;&#x8FD8;&#x6709;&#x5546;&#x4E1A;&#x7248;&#x7684; <code>Docker Trusted Registry</code> &#x9879;&#x76EE;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x4E00;&#x4E9B;&#x589E;&#x503C;&#x7684;&#x5185;&#x5BB9;&#x5728;&#x91CC;&#x9762;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E; Docker Hub &#x4F3C;&#x5F97; UI &#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x8FC7;&#x6EE4;&#x3002;&#x76EE;&#x524D; Docker Trusted Registry &#x5C5E;&#x4E8E; <a href="https://www.docker.com/products/docker-datacenter" target="_blank" rel="noopener">Docker Datacenter</a> &#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x63D0;&#x4F9B;&#x4E86;UI&#x7684;&#x3002;&#x6BD4;&#x5982; <a href="https://github.com/vmware/harbor" target="_blank" rel="noopener">VMWare Harbor</a>&#x3002;VMWare Harbor &#x662F; VMWare &#x4E2D;&#x56FD;&#x57FA;&#x4E8E;&#x5F00;&#x6E90; docker registry &#x8FDB;&#x4E00;&#x6B65;&#x5F00;&#x53D1;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x6709;&#x66F4;&#x590D;&#x6742;&#x7684;&#x4E0A;&#x5C42;&#x903B;&#x8F91;&#x3002;&#x5305;&#x62EC;&#x7528;&#x6237;&#x7BA1;&#x7406;&#x3001;&#x955C;&#x50CF;&#x7BA1;&#x7406;&#x3001;Registry&#x96C6;&#x7FA4;&#x4E4B;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#x3002;Harbor &#x662F;&#x5F00;&#x6E90;&#x7684;&#xFF0C;&#x514D;&#x8D39;&#x7684;&#x3002;</p>
<p>&#x7B2C;&#x4E09;&#x65B9;&#x7684; registry &#x8FD8;&#x6709; Java &#x4E16;&#x754C;&#x91CC;&#x5E38;&#x89C1;&#x7684; Nexus&#xFF0C;&#x5176;<a href="https://github.com/sonatype/docker-nexus3" target="_blank" rel="noopener">&#x7B2C;&#x4E09;&#x4EE3;</a>&#x652F;&#x6301; Docker Registry API&#x3002;</p>
<h2 id="ru-he-shan-chu-si-you-registry-zhong-de-jing-xiang"><a href="#&#x5982;&#x4F55;&#x5220;&#x9664;&#x79C1;&#x6709;-registry-&#x4E2D;&#x7684;&#x955C;&#x50CF;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5220;&#x9664;&#x79C1;&#x6709; registry &#x4E2D;&#x7684;&#x955C;&#x50CF;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5220;&#x9664;&#x79C1;&#x6709; <code>registry</code> &#x4E2D;&#x7684;&#x955C;&#x50CF;&#xFF1F; <a href="#ru-he-shan-chu-si-you-registry-zhong-de-jing-xiang" class="header-anchor">#</a></h2><p>&#x9996;&#x5148;&#xFF0C;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;docker registry &#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x5220;&#x9664;&#x955C;&#x50CF;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x914D;&#x7F6E;<code>config.yml</code>&#x4E2D;&#x542F;&#x7528;&#xFF1A;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">delete:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#xFF0C;&#x4F7F;&#x7528; API <code>GET /v2/&lt;&#x955C;&#x50CF;&#x540D;&gt;/manifests/&lt;tag&gt;</code> &#x6765;&#x53D6;&#x5F97;&#x8981;&#x5220;&#x9664;&#x7684;<code>&#x955C;&#x50CF;:Tag</code>&#x6240;&#x5BF9;&#x5E94;&#x7684; <code>digest</code>&#x3002;</p>
<p>Registry <code>2.3</code> &#x4EE5;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x52A0;&#x5165;&#x5934; <code>Accept: application/vnd.docker.distribution.manifest.v2+json</code>&#xFF0C;&#x5426;&#x5219;&#x53D6;&#x5230;&#x7684; <code>digest</code> &#x662F;&#x9519;&#x8BEF;&#x7684;&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x8BEF;&#x5220;&#x9664;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x8981;&#x5220;&#x9664; <code>myimage:latest</code> &#x955C;&#x50CF;&#xFF0C;&#x90A3;&#x4E48;&#x53D6;&#x5F97; <code>digest</code> &#x7684;&#x547D;&#x4EE4;&#x662F;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl --header <span class="string">&quot;Accept: application/vnd.docker.distribution.manifest.v2+json&quot;</span> \</span><br><span class="line">  -I -X HEAD http://192.168.99.100:5000/v2/myimage/manifests/latest \</span><br><span class="line">  | grep Digest</span><br><span class="line">Docker-Content-Digest: sha256:3a07b4e06c73b2e3924008270c7f3c3c6e3f70d4dbb814ad8bff2697123ca33c</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x8C03;&#x7528; API <code>DELETE /v2/&lt;&#x955C;&#x50CF;&#x540D;&gt;/manifests/&lt;digest&gt;</code> &#x6765;&#x5220;&#x9664;&#x955C;&#x50CF;&#x3002;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl  -X DELETE http://192.168.99.100:5000/v2/myimage/manifests/sha256:3a07b4e06c73b2e3924008270c7f3c3c6e3f70d4dbb814ad8bff2697123ca33c</span><br></pre></td></tr></table></figure>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x955C;&#x50CF;&#x5DF2;&#x4ECE; <code>registry</code> &#x4E2D;&#x6807;&#x8BB0;&#x5220;&#x9664;&#xFF0C;&#x5916;&#x754C;&#x8BBF;&#x95EE; <code>pull</code> &#x4E0D;&#x5230;&#x4E86;&#x3002;&#x4F46;&#x662F; <code>registry</code> &#x7684;&#x672C;&#x5730;&#x7A7A;&#x95F4;&#x5E76;&#x672A;&#x91CA;&#x653E;&#xFF0C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5783;&#x573E;&#x6536;&#x96C6;&#x624D;&#x4F1A;&#x91CA;&#x653E;&#x3002;&#x800C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x4E0D;&#x53EF;&#x4EE5;&#x5728;&#x7EBF;&#x8FDB;&#x884C;&#xFF0C;&#x5FC5;&#x987B;&#x505C;&#x6B62; <code>registry</code>&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5047;&#x8BBE; <code>registry</code> &#x662F;&#x7528; Compose &#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x7528;&#x6765;&#x5783;&#x573E;&#x6536;&#x96C6;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker-compose stop</span><br><span class="line">docker run -it --name gc --rm --volumes-from registry_registry_1 registry:2 garbage-collect /etc/registry/config.yml</span><br><span class="line">docker-compose start</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x4E2D; <code>registry_registry_1</code> &#x53EF;&#x4EE5;&#x66FF;&#x6362;&#x4E3A;&#x5B9E;&#x9645;&#x7684; <code>registry</code> &#x7684;&#x5BB9;&#x5668;&#x540D;&#xFF0C;&#x800C; <code>/etc/registry/config.yml</code> &#x5219;&#x66FF;&#x6362;&#x4E3A;&#x5B9E;&#x9645;&#x7684; <code>registry</code> &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;</p>
<p><a href="https://docs.docker.com/registry/configuration/#/delete" target="_blank" rel="noopener">https://docs.docker.com/registry/configuration/#/delete</a></p>
<p><a href="https://docs.docker.com/registry/spec/api/#/deleting-an-image" target="_blank" rel="noopener">https://docs.docker.com/registry/spec/api/#/deleting-an-image</a></p>
<h2 id="shi-yong-guo-nei-jing-xiang-huan-shi-man-gong-si-nei-hao-duo-docker-zhu-ji-du-xu-yao-qu-chong-fu-xia-zai-jing-xiang-zha-ban"><a href="#&#x4F7F;&#x7528;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x8FD8;&#x662F;&#x6162;&#xFF0C;&#x516C;&#x53F8;&#x5185;&#x597D;&#x591A;-docker-&#x4E3B;&#x673A;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x53BB;&#x91CD;&#x590D;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x548B;&#x529E;&#xFF1F;" class="headerlink" title="&#x4F7F;&#x7528;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x8FD8;&#x662F;&#x6162;&#xFF0C;&#x516C;&#x53F8;&#x5185;&#x597D;&#x591A; docker &#x4E3B;&#x673A;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x53BB;&#x91CD;&#x590D;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x548B;&#x529E;&#xFF1F;"></a>&#x4F7F;&#x7528;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x8FD8;&#x662F;&#x6162;&#xFF0C;&#x516C;&#x53F8;&#x5185;&#x597D;&#x591A; docker &#x4E3B;&#x673A;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x53BB;&#x91CD;&#x590D;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x548B;&#x529E;&#xFF1F; <a href="#shi-yong-guo-nei-jing-xiang-huan-shi-man-gong-si-nei-hao-duo-docker-zhu-ji-du-xu-yao-qu-chong-fu-xia-zai-jing-xiang-zha-ban" class="header-anchor">#</a></h2><p>&#x5728;&#x5C40;&#x57DF;&#x7F51;&#x5185;&#xFF0C;&#x672C;&#x5730;&#x67B6;&#x8BBE;&#x4E2A; Docker Registry mirror&#xFF0C;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x7A7A;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x4E14;&#x6DFB;&#x52A0; Registry &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; <code>config.yml</code>&#xFF0C;&#x5176;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">0.1</span></span><br><span class="line"><span class="attr">log:</span></span><br><span class="line">    <span class="attr">fields:</span></span><br><span class="line">        <span class="attr">service:</span> <span class="string">registry</span></span><br><span class="line"><span class="attr">storage:</span></span><br><span class="line">    <span class="attr">cache:</span></span><br><span class="line">        <span class="attr">blobdescriptor:</span> <span class="string">inmemory</span></span><br><span class="line">    <span class="attr">filesystem:</span></span><br><span class="line">        <span class="attr">rootdirectory:</span> <span class="string">/var/lib/registry</span></span><br><span class="line"><span class="attr">http:</span></span><br><span class="line">    <span class="attr">addr:</span> <span class="string">:5000</span></span><br><span class="line">    <span class="attr">headers:</span></span><br><span class="line">        <span class="attr">X-Content-Type-Options:</span> <span class="string">[nosniff]</span></span><br><span class="line"><span class="attr">health:</span></span><br><span class="line">    <span class="attr">storagedriver:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">interval:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">threshold:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">proxy:</span></span><br><span class="line">    <span class="attr">remoteurl:</span> <span class="string">https://registry.docker-cn.com</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684; <code>remoteurl</code>&#xFF0C;&#x5176;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x586B;&#x5199;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F; Docker &#x5B98;&#x65B9;&#x5728;&#x4E2D;&#x56FD;&#x7684;&#x955C;&#x50CF;&#x7AD9;&#x70B9;&#x3002;&#x5982;&#x679C;&#x5728;&#x56FD;&#x5916;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Docker Hub &#x7684;&#x5B98;&#x65B9;&#x5730;&#x5740;&#xFF1A;<code>https://registry-1.docker.io</code>&#x3002;</p>
</blockquote>
<p>&#x7136;&#x540E;&#xFF0C;&#x5EFA;&#x7ACB;&#x4E2A; <code>docker-compose.yml</code> &#x6587;&#x4EF6;&#x65B9;&#x4FBF;&#x542F;&#x52A8;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#xFF1A;</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&apos;2&apos;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">mirror:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">registry:2</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;5000:5000&quot;</span></span><br><span class="line">        <span class="attr">volumes:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">./config.yml:/etc/docker/registry/config.yml</span></span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x7528; Docker Compose &#x542F;&#x52A8;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x670D;&#x52A1;&#xFF1A;<code>docker-compose up -d</code></p>
<p>&#x7136;&#x540E;&#x5728;&#x5C40;&#x57DF;&#x7F51;&#x4E2D;&#x7684;&#x6240;&#x6709; Docker &#x4E3B;&#x673A;&#x4E2D;&#x7684; Docker &#x5F15;&#x64CE;&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;&#x90FD;&#x6DFB;&#x52A0;&#x4E00;&#x6761; <code>--registry-mirror=&lt;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5730;&#x5740;&gt;</code></p>
<p>&#x9996;&#x5148;&#x7528; <code>docker pull</code> &#x4E0B;&#x8F7D;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x770B;&#x4E00;&#x4E0B;&#x65F6;&#x95F4;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ time docker pull php:7-fpm-alpine</span><br><span class="line">7-fpm-alpine: Pulling from library/php</span><br><span class="line">e110a4a17941: Pull complete</span><br><span class="line">d9f63633faf6: Pull complete</span><br><span class="line">ac309a5bc5d5: Pull complete</span><br><span class="line">4523ec888a62: Pull complete</span><br><span class="line">6a77f79ab9b5: Pull complete</span><br><span class="line">27243562b67c: Pull complete</span><br><span class="line">33e1803456c2: Pull complete</span><br><span class="line">a1219b0a1418: Pull complete</span><br><span class="line">Digest: sha256:f7d6f6844df64f8f615fa50ca28b3f1ad82be0a2dcde0b55205d31c1bb9f4820</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> php:7-fpm-alpine</span><br><span class="line">docker pull php:7-fpm-alpine  0.07s user 0.07s system 0% cpu 2:30.43 total</span><br></pre></td></tr></table></figure>
<p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x4E0B;&#x8F7D;&#x4E86; php:7-fpm-alpine&#xFF0C;&#x7528;&#x65F6; 2 &#x5206; 30&#x79D2;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5220;&#x6389;&#x955C;&#x50CF;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker rmi php:7-fpm-alpine</span><br><span class="line">Untagged: php:7-fpm-alpine</span><br><span class="line">Deleted: sha256:b80ca1f4f99d13e00ac6ef13aca7c1ef6e2fb83ec2fe6a035e8beeeb05afb4b6</span><br><span class="line">Deleted: sha256:69ee0f31988504dc3e3b068476f11d06b43fc34465a1c58d351406b9d2368e7a</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>&#x7136;&#x540E;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x6D4B;&#x8BD5;&#x65F6;&#x95F4;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ time docker pull php:7-fpm-alpine</span><br><span class="line">7-fpm-alpine: Pulling from library/php</span><br><span class="line">e110a4a17941: Pull complete</span><br><span class="line">d9f63633faf6: Pull complete</span><br><span class="line">ac309a5bc5d5: Pull complete</span><br><span class="line">4523ec888a62: Pull complete</span><br><span class="line">6a77f79ab9b5: Pull complete</span><br><span class="line">27243562b67c: Pull complete</span><br><span class="line">33e1803456c2: Pull complete</span><br><span class="line">a1219b0a1418: Pull complete</span><br><span class="line">Digest: sha256:f7d6f6844df64f8f615fa50ca28b3f1ad82be0a2dcde0b55205d31c1bb9f4820</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> php:7-fpm-alpine</span><br><span class="line">docker pull php:7-fpm-alpine  0.05s user 0.04s system 0% cpu 13.778 total</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6B21;&#x7531;&#x4E8E;&#x8BE5; docker image &#x672C;&#x5730; mirror &#x7F13;&#x5B58;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x7528;&#x65F6;&#x7EA6;14&#x79D2;&#xFF0C;&#x901F;&#x5EA6;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x4E86;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;</p>
<p>&#x670D;&#x52A1;&#x7AEF;&#xFF1A;<a href="https://docs.docker.com/registry/configuration/#/proxy" target="_blank" rel="noopener">https://docs.docker.com/registry/configuration/#/proxy</a></p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;<a href="https://docs.docker.com/engine/reference/commandline/dockerd/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/dockerd/</a></p>
<h2 id="zi-ji-jia-de-registry-zen-me-ren-he-yong-hu-du-ke-yi-qu-dao-jing-xiang-zhe-bu-an-quan-a"><a href="#&#x81EA;&#x5DF1;&#x67B6;&#x7684;-registry-&#x600E;&#x4E48;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x90FD;&#x53EF;&#x4EE5;&#x53D6;&#x5230;&#x955C;&#x50CF;&#xFF1F;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x554A;&#xFF1F;" class="headerlink" title="&#x81EA;&#x5DF1;&#x67B6;&#x7684; registry &#x600E;&#x4E48;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x90FD;&#x53EF;&#x4EE5;&#x53D6;&#x5230;&#x955C;&#x50CF;&#xFF1F;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x554A;&#xFF1F;"></a>&#x81EA;&#x5DF1;&#x67B6;&#x7684; <code>registry</code> &#x600E;&#x4E48;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x90FD;&#x53EF;&#x4EE5;&#x53D6;&#x5230;&#x955C;&#x50CF;&#xFF1F;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x554A;&#xFF1F; <a href="#zi-ji-jia-de-registry-zen-me-ren-he-yong-hu-du-ke-yi-qu-dao-jing-xiang-zhe-bu-an-quan-a" class="header-anchor">#</a></h2><p>&#x90A3;&#x662F;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x52A0;&#x8BA4;&#x8BC1;&#xFF0C;&#x4E0D;&#x52A0;&#x8BA4;&#x8BC1;&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;&#x5141;&#x8BB8;&#x4EFB;&#x4F55;&#x4EBA;&#x8BBF;&#x95EE;&#x7684;&#x3002;</p>
<p>&#x6DFB;&#x52A0;&#x8BA4;&#x8BC1;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul>
<li>Registry &#x914D;&#x7F6E;&#x4E2D;&#x52A0;&#x5165;&#x8BA4;&#x8BC1;&#xFF1A; <a href="https://docs.docker.com/registry/configuration/#/auth" target="_blank" rel="noopener">https://docs.docker.com/registry/configuration/#/auth</a></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">auth:</span></span><br><span class="line">  <span class="attr">token:</span></span><br><span class="line">    <span class="attr">realm:</span> <span class="string">token-realm</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">token-service</span></span><br><span class="line">    <span class="attr">issuer:</span> <span class="string">registry-token-issuer</span></span><br><span class="line">    <span class="attr">rootcertbundle:</span> <span class="string">/root/certs/bundle</span></span><br><span class="line">  <span class="attr">htpasswd:</span></span><br><span class="line">    <span class="attr">realm:</span> <span class="string">basic-realm</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/path/to/htpasswd</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&#x524D;&#x7AEF;&#x67B6;&#x8BBE; nginx &#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#xFF1A;<a href="https://docs.docker.com/registry/recipes/nginx/" target="_blank" rel="noopener">https://docs.docker.com/registry/recipes/nginx/</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location /v2/ {</span><br><span class="line">    ...</span><br><span class="line">    auth_basic <span class="string">&quot;Registry realm&quot;</span>;</span><br><span class="line">    auth_basic_user_file /etc/nginx/conf.d/nginx.htpasswd;</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h1 id="xi-tong-xiang-guan-wen-ti-7"><a href="#&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x95EE;&#x9898;-7" class="headerlink" title="&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x95EE;&#x9898; (7)"></a>&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x95EE;&#x9898; <code>(7)</code> <a href="#xi-tong-xiang-guan-wen-ti-7" class="header-anchor">#</a></h1><h2 id="centos-rhel-hong-mao-xi-tong-te-you-wen-ti"><a href="#CentOS-RHEL-&#x7EA2;&#x5E3D;&#x7CFB;&#x7EDF;&#x7279;&#x6709;&#x95EE;&#x9898;" class="headerlink" title="CentOS/RHEL &#x7EA2;&#x5E3D;&#x7CFB;&#x7EDF;&#x7279;&#x6709;&#x95EE;&#x9898;"></a>CentOS/RHEL &#x7EA2;&#x5E3D;&#x7CFB;&#x7EDF;&#x7279;&#x6709;&#x95EE;&#x9898; <a href="#centos-rhel-hong-mao-xi-tong-te-you-wen-ti" class="header-anchor">#</a></h2><h3 id="zai-centos-6-shang-an-zhuang-hou-zen-me-zui-gao-zhi-you-docker-1-7-zhe-ge-ban-ben"><a href="#&#x5728;-CentOS-6-&#x4E0A;&#x5B89;&#x88C5;&#x540E;&#x600E;&#x4E48;&#x6700;&#x9AD8;&#x53EA;&#x6709;-Docker-1-7-&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#xFF1F;" class="headerlink" title="&#x5728; CentOS 6 &#x4E0A;&#x5B89;&#x88C5;&#x540E;&#x600E;&#x4E48;&#x6700;&#x9AD8;&#x53EA;&#x6709; Docker 1.7 &#x8FD9;&#x4E2A;&#x7248;&#x672C;&#xFF1F;"></a>&#x5728; CentOS 6 &#x4E0A;&#x5B89;&#x88C5;&#x540E;&#x600E;&#x4E48;&#x6700;&#x9AD8;&#x53EA;&#x6709; Docker 1.7 &#x8FD9;&#x4E2A;&#x7248;&#x672C;&#xFF1F; <a href="#zai-centos-6-shang-an-zhuang-hou-zen-me-zui-gao-zhi-you-docker-1-7-zhe-ge-ban-ben" class="header-anchor">#</a></h3><p>Docker &#x5DF2;&#x7ECF;&#x4E0D;&#x518D;&#x652F;&#x6301; CentOS 6 &#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x770B;&#x5230;&#x7684;&#x662F;&#x5F88;&#x4E45;&#x4EE5;&#x524D;&#x7684;&#x8001;&#x7248;&#x672C;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x4E5F;&#x6CA1;&#x6709;&#x53D1;&#x5E03;&#x8FC7; CentOS 6 &#x7684;&#x7248;&#x672C;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4E0D;&#x8981;&#x518D;&#x5728; CentOS 6&#x4E0A;&#x7528; Docker &#x4E86;&#x3002;&#x6362; CentOS 7 &#x6216;&#x8005; Ubuntu &#x5427;&#x3002;</p>
<h3 id="gua-zai-su-zhu-mu-lu-jie-guo-permission-denied-mei-quan-xian"><a href="#&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;&#x7ED3;&#x679C;-Permission-denied&#xFF0C;&#x6CA1;&#x6743;&#x9650;" class="headerlink" title="&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;&#x7ED3;&#x679C; Permission denied&#xFF0C;&#x6CA1;&#x6743;&#x9650;"></a>&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;&#x7ED3;&#x679C; <code>Permission denied</code>&#xFF0C;&#x6CA1;&#x6743;&#x9650; <a href="#gua-zai-su-zhu-mu-lu-jie-guo-permission-denied-mei-quan-xian" class="header-anchor">#</a></h3><p>&#x539F;&#x56E0;&#x662F; <code>CentOS</code>/<code>RHEL</code>&#x4E2D;&#x7684; <code>SELinux</code> &#x9650;&#x5236;&#x4E86;&#x76EE;&#x5F55;&#x6743;&#x9650;&#x3002;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x89C4;&#x5219;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F; <code>man docker-run</code> &#x7684;&#x89E3;&#x91CA;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">When  using  SELinux,  be  aware that the host has no knowledge of container</span><br><span class="line">SELinux policy. Therefore, in the above example, if SELinux policy  is enforced,</span><br><span class="line">the /var/db directory is not  writable to the container. A &quot;Permission Denied&quot;</span><br><span class="line">message will occur and an avc: message in the host&apos;s syslog.</span><br><span class="line"></span><br><span class="line">To  work  around  this, at time of writing this man page, the following command</span><br><span class="line">needs to be run in order for the  proper  SELinux  policy  type label to be</span><br><span class="line">attached to the host directory:</span><br></pre></td></tr></table></figure>
<p>&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5BF9;&#x7279;&#x5B9A;&#x76EE;&#x5F55;&#x6DFB;&#x52A0;&#x89C4;&#x5219;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chcon -Rt svirt_sandbox_file_t /var/db</span><br></pre></td></tr></table></figure>
<p>&#x53C2;&#x8003;&#xFF1A;<a href="http://www.projectatomic.io/blog/2015/06/using-volumes-with-docker-can-cause-problems-with-selinux/" target="_blank" rel="noopener">http://www.projectatomic.io/blog/2015/06/using-volumes-with-docker-can-cause-problems-with-selinux/</a></p>
<h3 id="docker-de-var-lib-docker-devicemapper-zhan-yong-kong-jian-bu-duan-zeng-chang-zen-me-po"><a href="#Docker&#x7684;-var-lib-docker-devicemapper-&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x4E0D;&#x65AD;&#x589E;&#x957F;-&#x600E;&#x4E48;&#x7834;&#xFF1F;" class="headerlink" title="Docker&#x7684; /var/lib/docker/devicemapper &#x5360;&#x7528;&#x7A7A;&#x95F4;&#x4E0D;&#x65AD;&#x589E;&#x957F;, &#x600E;&#x4E48;&#x7834;&#xFF1F;"></a>Docker&#x7684; <code>/var/lib/docker/devicemapper</code> &#x5360;&#x7528;&#x7A7A;&#x95F4;&#x4E0D;&#x65AD;&#x589E;&#x957F;, &#x600E;&#x4E48;&#x7834;&#xFF1F; <a href="#docker-de-var-lib-docker-devicemapper-zhan-yong-kong-jian-bu-duan-zeng-chang-zen-me-po" class="header-anchor">#</a></h3><p>&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#x4E00;&#x822C;&#x662F; CentOS/RHEL &#x7EA2;&#x5E3D;&#x7CFB;&#x7684;&#x95EE;&#x9898;&#xFF0C;CentOS &#x8FD9;&#x7C7B;&#x7EA2;&#x5E3D;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x50CF; <code>Ubuntu</code> &#x90A3;&#x6837;&#x6709;&#x6210;&#x719F;&#x7684; Union FS&#x5B9E;&#x73B0;(&#x5982;<code>aufs</code>)&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x4F7F;&#x7528; <code>devicemapper</code>&#xFF0C;&#x800C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x662F;<code>lvm-loop</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7528;&#x4E00;&#x4E2A;&#x7A00;&#x758F;&#x6587;&#x4EF6;&#x6765;&#x5F53;&#x6210;&#x4E00;&#x4E2A;&#x5757;&#x8BBE;&#x5907;&#xFF0C;&#x7ED9;<code>devicemapper</code>&#x7528;&#xFF0C;&#x4F5C;&#x4E3A;Docker&#x955C;&#x50CF;&#x5BB9;&#x5668;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x8FD9;&#x662F;&#x975E;&#x5E38;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x6027;&#x80FD;&#x5F88;&#x5DEE;&#x4E0D;&#x8BF4;&#xFF0C;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x8FD8;&#x6709;&#x5F88;&#x591A; bug&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x529E;&#x6CD5;&#x6362; <code>Ubuntu</code>/<code>Debian</code> &#x7CFB;&#x7EDF;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x8D77;&#x7801;&#x5E94;&#x8BE5;&#x5EFA;&#x7ACB;&#x5757;&#x8BBE;&#x5907;&#xFF08;&#x5206;&#x533A;&#x3001;&#x5377;&#xFF09;&#x7ED9; <code>devicemapper</code> &#x7528;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#configure-direct-lvm-mode-for-production" target="_blank" rel="noopener">https://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#configure-direct-lvm-mode-for-production</a></p>
<p>&#x4E25;&#x683C;&#x6765;&#x8BF4; CentOS/RHEL 7 &#x4E2D;&#x5B9E;&#x9645;&#x4E0A;&#x6709;&#x4E00;&#x4E2A; Union FS &#x5B9E;&#x73B0;&#xFF0C;&#x867D;&#x7136; CentOS/RHEL 7 &#x7684;&#x5185;&#x6838;&#x662F; 3.10&#xFF0C;&#x4E0D;&#x8FC7;&#x7EA2;&#x5E3D;&#x4ECE; Linux 3.18 backport &#x56DE;&#x6765;&#x4E86; <code>overlay</code> fs &#x7684;&#x9A71;&#x52A8;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7EA2;&#x5E3D;&#x81EA;&#x5DF1;&#x90FD;&#x5728;&#x5B98;&#x65B9;&#x7684;&#x53D1;&#x5E03;&#x58F0;&#x660E;&#x4E2D;&#x8BF4;&#x80FD;&#x4E0D;&#x8981;&#x7528;&#x5C31;&#x4E0D;&#x7528;&#x3002;</p>
<p><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/7.2_Release_Notes/technology-preview-file_systems.html" target="_blank" rel="noopener">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/7.2_Release_Notes/technology-preview-file_systems.html</a></p>
<h3 id="centos-7-de-nei-he-tai-lao-liao-3-10-shi-bu-shi-hen-duo-docker-gong-neng-bu-zhi-chi"><a href="#CentOS-7-&#x7684;&#x5185;&#x6838;&#x592A;&#x8001;&#x4E86;-3-10&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x591A;-Docker-&#x529F;&#x80FD;&#x4E0D;&#x652F;&#x6301;&#xFF1F;" class="headerlink" title="CentOS 7 &#x7684;&#x5185;&#x6838;&#x592A;&#x8001;&#x4E86; 3.10&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x591A; Docker &#x529F;&#x80FD;&#x4E0D;&#x652F;&#x6301;&#xFF1F;"></a>CentOS 7 &#x7684;&#x5185;&#x6838;&#x592A;&#x8001;&#x4E86; 3.10&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x591A; Docker &#x529F;&#x80FD;&#x4E0D;&#x652F;&#x6301;&#xFF1F; <a href="#centos-7-de-nei-he-tai-lao-liao-3-10-shi-bu-shi-hen-duo-docker-gong-neng-bu-zhi-chi" class="header-anchor">#</a></h3><p>&#x662F;&#x7684;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#x65E0;&#x6CD5;&#x652F;&#x6301;&#xFF0C;&#x6BD4;&#x5982; <code>overlay2</code> &#x7684;&#x5B58;&#x50A8;&#x9A71;&#x52A8;&#x5C31;&#x65E0;&#x6CD5;&#x5728; CentOS &#x4E0A;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x5E76;&#x975E;&#x6240;&#x6709;&#x9700;&#x8981;&#x9AD8;&#x7248;&#x672C;&#x5185;&#x6838;&#x7684;&#x529F;&#x80FD;&#x90FD;&#x4E0D;&#x652F;&#x6301;&#x3002;</p>
<p>&#x6BD4;&#x5982; Overlay FS &#x9700;&#x8981; Linux 3.18&#xFF0C;&#x800C; Overlay network &#x9700;&#x8981; Linux 3.16&#x3002;&#x800C; CentOS 7 &#x5185;&#x6838;&#x4E3A; 3.10&#xFF0C;&#x786E;&#x5B9E;&#x4F4E;&#x4E8E;&#x8FD9;&#x4E9B;&#x7248;&#x672C;&#x9700;&#x6C42;&#x3002;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x7EA2;&#x5E3D;&#x56E2;&#x961F;&#x4F1A;&#x628A;&#x4E00;&#x4E9B;&#x65B0;&#x5185;&#x6838;&#x7684;&#x529F;&#x80FD; backport &#x56DE;&#x8001;&#x7684;&#x5185;&#x6838;&#x3002;&#x6BD4;&#x5982; <code>overlay fs</code>&#x7B49;&#x3002;&#x6240;&#x4EE5;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#x4F9D;&#x65E7;&#x4F1A;&#x652F;&#x6301;&#x3002;&#x56E0;&#x6B64; CentOS 7 &#x7684; Docker Engine &#x540C;&#x6837;&#x53EF;&#x4EE5;&#x652F;&#x6301; <code>overlay network</code>&#xFF0C;&#x4EE5;&#x53CA; <code>overlay</code> &#x5B58;&#x50A8;&#x9A71;&#x52A8;&#xFF08;&#x4E0D;&#x662F;<code>overlay2</code>&#xFF09;&#x3002;&#x56E0;&#x6B64;&#x5728;&#x65B0;&#x7684; Docker 1.12 &#x4E2D;&#xFF0C;CentOS/RHEL 7 &#x624D;&#x6709;&#x53EF;&#x80FD;&#x652F;&#x6301; Swarm Mode&#x3002;</p>
<p>&#x5373;&#x4F7F;&#x7EA2;&#x5E3D;&#x4F1A;&#x628A;&#x4E00;&#x4E9B;&#x9AD8;&#x7248;&#x672C;&#x5185;&#x6838;&#x7684;&#x529F;&#x80FD; backport &#x56DE; 3.10 &#x5185;&#x6838;&#x4E2D;&#xFF0C;&#x8FD9;&#x79CD;&#x4FEE;&#x4FEE;&#x8865;&#x8865;&#x51FA;&#x6765;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x7A33;&#x5B9A;&#x3002;&#x5982;&#x679C;&#x89C2;&#x5BDF; Docker Issue &#x5217;&#x8868;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x5927;&#x91CF;&#x7684;&#x7531;&#x4E8E; CentOS &#x8001;&#x5185;&#x6838;&#x5BFC;&#x81F4;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5728;&#x4F7F;&#x7528;&#x4E86; 1.12 &#x5185;&#x7F6E;&#x7684; Swarm Mode &#x96C6;&#x7FA4;&#x529F;&#x80FD;&#x540E;&#xFF0C;&#x5B58;&#x50A8;&#x3001;&#x7F51;&#x7EDC;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x5F88;&#x591A;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4F9D;&#x65E7;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x5176;&#x5B83;&#x7EF4;&#x62A4;&#x5185;&#x6838;&#x7248;&#x672C;&#x5347;&#x7EA7;&#x7684; Linux &#x53D1;&#x884C;&#x7248;&#xFF0C;&#x5982; Ubuntu&#x3002;</p>
<h3 id="centos-7-rhel-7-sheng-ji-1-12-hou-wu-fa-qi-dong-zen-me-hui-shi"><a href="#CentOS-7-RHEL-7-&#x5347;&#x7EA7;-1-12-&#x540E;&#xFF0C;&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F;" class="headerlink" title="CentOS 7/RHEL 7 &#x5347;&#x7EA7; 1.12 &#x540E;&#xFF0C;&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F;"></a>CentOS 7/RHEL 7 &#x5347;&#x7EA7; 1.12 &#x540E;&#xFF0C;&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF1F; <a href="#centos-7-rhel-7-sheng-ji-1-12-hou-wu-fa-qi-dong-zen-me-hui-shi" class="header-anchor">#</a></h3><p>&#x4E00;&#x4E9B;&#x4EBA;&#x5728;&#x5347;&#x7EA7;&#x4E4B;&#x540E;&#xFF0C;&#x542F;&#x52A8; Docker &#x65F6;&#x53D1;&#x73B0;&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;&#x800C;&#x5728;&#x62A5;&#x9519;&#x4E2D;&#x770B;&#x5230;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unit docker.socket failed to load: No such file or directory.</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x539F;&#x56E0;&#x662F;&#x7531;&#x4E8E;&#x4ECE; <code>1.12</code> &#x5F00;&#x59CB;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5728; <code>systemd</code> &#x4E2D;&#x5199;&#x4E2A; <code>docker.socket</code> &#x6587;&#x4EF6;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5C31;&#x968F;&#x5347;&#x7EA7;&#x800C;&#x5220;&#x9664;&#x4E86;&#x3002;&#x800C; <code>docker.service</code> &#x7531;&#x4E8E;&#x88AB;&#x4FEE;&#x6539;&#x8FC7;&#xFF08;&#x6216;&#x522B;&#x7684;&#x4EC0;&#x4E48;&#x539F;&#x56E0;&#xFF09;&#xFF0C;&#x5BFC;&#x81F4; <code>yum</code> &#x5347;&#x7EA7;&#x7684;&#x65F6;&#x5019;&#x6CA1;&#x6709;&#x66FF;&#x6362;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x3002;&#x4E8E;&#x662F;&#x51FA;&#x73B0;&#x4E86;&#x65E7;&#x7684; <code>docker.service</code> &#x4E2D;&#x914D;&#x7F6E;&#x8981;&#x6C42;&#x6709; <code>docker.socket</code> &#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5DF2;&#x7ECF;&#x5728;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E2D;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5BFC;&#x81F4;&#x542F;&#x52A8;&#x9519;&#x8BEF;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x76F4;&#x63A5;&#x6253;&#x5F00; <code>docker.service</code>&#xFF0C;&#x5C06;&#x5176;&#x53C2;&#x7167; <code>1.12</code> &#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#x5373;&#x53EF;&#x3002;&#x5BFB;&#x627E;&#x5230; <code>Required=docker.socket</code> &#x90A3;&#x884C;&#xFF0C;&#x5220;&#x6389;&#x3002;&#x7136;&#x540E;&#x5BFB;&#x627E;&#x5230; <code>docker daemon</code>(&#x6216;&#x8005; <code>dockerd</code>) &#x90A3;&#x884C;&#xFF0C;&#x5C06;&#x5176;&#x540E;&#x7684; <code>-H fd://</code> &#x5220;&#x6389;&#x3002;&#x5E76;&#x4E14;&#x8FDB;&#x4E00;&#x6B65;&#x5C06; <code>docker daemon</code> &#x6539;&#x4E3A; <code>dockerd</code>&#xFF0C;&#x56E0;&#x4E3A;&#x4ECE; <code>1.12</code> &#x5F00;&#x59CB;&#x6539;&#x540D;&#x53EB;&#x8FD9;&#x4E2A;&#x4E86;&#x3002;&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x5373;&#x53EF;&#x3002;</p>
<h2 id="mac-windows-xiang-guan-wen-ti"><a href="#Mac-Windows-&#x76F8;&#x5173;&#x95EE;&#x9898;" class="headerlink" title="Mac / Windows &#x76F8;&#x5173;&#x95EE;&#x9898;"></a>Mac / Windows &#x76F8;&#x5173;&#x95EE;&#x9898; <a href="#mac-windows-xiang-guan-wen-ti" class="header-anchor">#</a></h2><h3 id="wei-shi-me-zai-mac-xia-gua-zai-su-zhu-mu-lu-usr-local-nginx-bu-cheng-gong"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x5728;Mac&#x4E0B;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;-usr-local-nginx&#x4E0D;&#x6210;&#x529F;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x5728;Mac&#x4E0B;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;/usr/local/nginx&#x4E0D;&#x6210;&#x529F;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x5728;<code>Mac</code>&#x4E0B;&#x6302;&#x8F7D;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;<code>/usr/local/nginx</code>&#x4E0D;&#x6210;&#x529F;&#xFF1F; <a href="#wei-shi-me-zai-mac-xia-gua-zai-su-zhu-mu-lu-usr-local-nginx-bu-cheng-gong" class="header-anchor">#</a></h3><p>&#x867D;&#x7136; Docker &#x56E2;&#x961F;&#x5C3D;&#x91CF;&#x8BA9;&#x4F7F;&#x7528; <a href="https://www.docker.com/products/docker-toolbox" target="_blank" rel="noopener">Docker Toolbox</a>, <a href="https://docs.docker.com/docker-for-mac/" target="_blank" rel="noopener">Docker for Mac</a> and <a href="https://docs.docker.com/docker-for-windows" target="_blank" rel="noopener">Docker for Windows</a> &#x7684;&#x7528;&#x6237;&#x611F;&#x89C9;&#x64CD;&#x4F5C; Docker &#x5C31;&#x50CF;&#x5728; Linux &#x4E0B;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x5728; Mac/Windows &#x4E0A;&#x5E76;&#x975E;&#x662F;&#x76F4;&#x63A5;&#x8FD0;&#x884C; Docker &#x7684;&#x3002;&#x4E2D;&#x95F4;&#x7ECF;&#x8FC7;&#x4E86;&#x4E00;&#x4E2A; Linux &#x865A;&#x62DF;&#x673A;&#xFF0C;&#x800C; Docker &#x8FD0;&#x884C;&#x5728;&#x90A3;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x91CC;&#x3002;</p>
<p>&#x56E0;&#x6B64; Mac &#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x76EE;&#x5F55;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x662F; Docker &#x773C;&#x4E2D;&#x7684;&#x5BBF;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA9;&#x7528;&#x6237;&#x5C3D;&#x91CF;&#x611F;&#x89C9;&#x4E0D;&#x5230;&#x8FD9;&#x4E2A;&#x5DEE;&#x5F02;&#xFF0C;<code>Boot2Docker</code> &#x6216;&#x8005; <code>Docker for Mac / Windows</code> &#x4E2D;&#xFF0C;&#x5C06;&#x4E00;&#x90E8;&#x5206;&#x7269;&#x7406;&#x4E3B;&#x673A;&#x7684;&#x76EE;&#x5F55;&#x6620;&#x5C04;&#x5230;&#x4E86; Linux &#x865A;&#x62DF;&#x673A;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x5176;&#x4E0A; Docker &#x5C31;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x8FD9;&#x4E9B;&#x7269;&#x7406;&#x673A;&#x7684;&#x76EE;&#x5F55;&#x4E86;&#x3002;</p>
<p>&#x51FA;&#x4E8E;&#x5B89;&#x5168;&#x8003;&#x8651;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x628A;&#x7269;&#x7406;&#x673A;&#x7684;&#x6240;&#x6709;&#x76EE;&#x5F55;&#x90FD;&#x6620;&#x5C04;&#x5230; Linux &#x865A;&#x62DF;&#x673A;&#x5185;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x53EA;&#x6709;&#x5F53;&#x524D;&#x7528;&#x6237;&#x76EE;&#x5F55;&#x5728;&#x5185;&#x7684;&#x4E00;&#x4E9B;&#x76EE;&#x5F55;&#x4F1A;&#x88AB;&#x6620;&#x5C04;&#x5230; Linux &#x865A;&#x62DF;&#x673A;&#x5185;&#xFF0C;&#x6BD4;&#x5982; <code>/Users</code>, <code>/Volumes</code> &#x7B49;&#x3002;</p>
<p>&#x5BF9;&#x4E8E; <code>Docker for Mac</code> &#x7684;&#x7528;&#x6237;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x914D;&#x7F6E;&#x754C;&#x9762; <code>File Sharing</code> &#x4E2D;&#x6DFB;&#x52A0;&#x989D;&#x5916;&#x7684;&#x6620;&#x5C04;&#x76EE;&#x5F55;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x51FA;&#x4E8E;&#x5B89;&#x5168;&#x8003;&#x8651;&#xFF0C;&#x4E0D;&#x6DFB;&#x52A0;&#x989D;&#x5916;&#x6620;&#x5C04;&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x7528;&#x6237;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x662F;&#x66F4;&#x597D;&#x5730;&#x505A;&#x6CD5;&#x3002;</p>
<h3 id="ting-shuo-windows-10-windows-server-2016-nei-zhi-docker-liao-he-docker-guan-wang-xia-zai-de-docker-for-windows-you-shi-me-qu-bie-a"><a href="#&#x542C;&#x8BF4;-Windows-10&#x3001;Windows-Server-2016-&#x5185;&#x7F6E;-Docker-&#x4E86;&#xFF1F;&#x548C;-Docker-&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x7684;-Docker-for-Windows-&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x554A;&#xFF1F;" class="headerlink" title="&#x542C;&#x8BF4; Windows 10&#x3001;Windows Server 2016 &#x5185;&#x7F6E; Docker &#x4E86;&#xFF1F;&#x548C; Docker &#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x7684; Docker for Windows &#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x554A;&#xFF1F;"></a>&#x542C;&#x8BF4; Windows 10&#x3001;Windows Server 2016 &#x5185;&#x7F6E; Docker &#x4E86;&#xFF1F;&#x548C; Docker &#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x7684; Docker for Windows &#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x554A;&#xFF1F; <a href="#ting-shuo-windows-10-windows-server-2016-nei-zhi-docker-liao-he-docker-guan-wang-xia-zai-de-docker-for-windows-you-shi-me-qu-bie-a" class="header-anchor">#</a></h3><p>&#x4E8C;&#x8005;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x3002;</p>
<p>Windows 10 &#x6216;&#x8005; Windows Server 2016 &#x81EA;&#x5E26;&#x7684; Docker&#xFF0C;&#x88AB;&#x79F0;&#x4E3A; <code>Docker on Windows</code>&#xFF0C;&#x5176;&#x8FD0;&#x884C;&#x4E8E; Windows NT &#x5185;&#x6838;&#x81F3;&#x4E0A;&#xFF0C;&#x4EE5; Docker &#x7C7B;&#x4F3C;&#x7684;&#x65B9;&#x5F0F;&#x63D0;&#x4F9B; Windows &#x5BB9;&#x5668;&#x670D;&#x52A1;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x53EF;&#x4EE5;&#x8FD0;&#x884C; Windows &#x7A0B;&#x5E8F;&#x3002;</p>
<p>&#x800C; Docker &#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x7684;&#xFF0C;&#x88AB;&#x79F0;&#x4E3A; <code>Docker for Windows</code>&#x3002;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x5E38;&#x8BF4;&#x7684; Docker&#xFF0C;&#x5B83;&#x662F;&#x8FD0;&#x884C;&#x4E8E; Linux &#x5185;&#x6838;&#x4E0A;&#x7684; Docker&#x3002;&#x5728; Windows &#x4E0A;&#x8FD0;&#x884C;&#x65F6;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5728; Hyper-V &#x4E0A;&#x7684;&#x4E00;&#x4E2A; Alpine Linux &#x865A;&#x62DF;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x7684; Docker&#x3002;&#x5B83;&#x53EA;&#x53EF;&#x4EE5;&#x8FD0;&#x884C; Linux &#x7A0B;&#x5E8F;&#x3002;</p>
<p><code>Docker on Windows</code> &#x6781;&#x4E3A;&#x81C3;&#x80BF;&#xFF0C;&#x6700;&#x5C0F;&#x955C;&#x50CF;&#x4E5F;&#x8FD1; GB&#xFF0C;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x5E76;&#x4E0D;&#x5FEB;&#xFF1B;&#x800C; <code>Docker for Windows</code> &#x5219;&#x662F;&#x6B63;&#x5E38;&#x7684; Docker&#xFF0C;&#x6700;&#x5C0F;&#x955C;&#x50CF;&#x4E5F;&#x5C31;&#x51E0;&#x5341; KB&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x955C;&#x50CF;&#x90FD;&#x5728;&#x51E0;&#x767E;&#x5146;&#x4EE5;&#x5185;&#xFF0C;&#x800C;&#x4E14;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x57FA;&#x672C;&#x662F;&#x6BEB;&#x79D2;&#x7EA7;&#x3002;</p>
<p>&#x5E0C;&#x671B;&#x5BF9; <code>Docker on Windows</code> &#x6709;&#x6240;&#x4E86;&#x89E3;&#x7684;&#x7AE5;&#x978B;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x4E00;&#x4E2A; DockerCon &#x7684;&#x89C6;&#x9891;&#xFF0C;&#x662F;&#x7531;&#x5FAE;&#x8F6F;&#x8D1F;&#x8D23; Docker &#x9879;&#x76EE;&#x7684;&#x6784;&#x67B6;&#x5E08;&#x8FDB;&#x884C;&#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x4ECE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7B2C;&#x4E00;&#x624B;&#x7684;&#x4FE1;&#x606F;&#xFF0C;Windows &#x5230;&#x5E95;&#x6709;&#x591A;&#x60E8;&#x3002;&#x8FD9;&#x4E2A;&#x89C6;&#x9891;&#x6211;&#x505A;&#x4E86;&#x7B14;&#x8BB0;&#xFF0C;&#x53EF;&#x4EE5;&#x5230;&#x8FD9;&#x91CC;&#x770B;&#x4E00;&#x4E0B;&#xFF1A;&lt;/post/docker-2016-08-12-video-windows-server-and-docker.html&gt;</p>
<h1 id="qi-ta-wen-ti-1"><a href="#&#x5176;&#x5B83;&#x95EE;&#x9898;-1" class="headerlink" title="&#x5176;&#x5B83;&#x95EE;&#x9898; (1)"></a>&#x5176;&#x5B83;&#x95EE;&#x9898; <code>(1)</code> <a href="#qi-ta-wen-ti-1" class="header-anchor">#</a></h1><h2 id="kubernetes-zhe-ci-zha-nian-a-wei-sha-you-ren-guan-ta-jiao-k8s"><a href="#Kubernetes-&#x8FD9;&#x8BCD;&#x548B;&#x5FF5;&#x554A;&#xFF1F;&#x4E3A;&#x5565;&#x6709;&#x4EBA;&#x7BA1;&#x5B83;&#x53EB;-k8s-&#xFF1F;" class="headerlink" title="Kubernetes &#x8FD9;&#x8BCD;&#x548B;&#x5FF5;&#x554A;&#xFF1F;&#x4E3A;&#x5565;&#x6709;&#x4EBA;&#x7BA1;&#x5B83;&#x53EB; k8s &#xFF1F;"></a><code>Kubernetes</code> &#x8FD9;&#x8BCD;&#x548B;&#x5FF5;&#x554A;&#xFF1F;&#x4E3A;&#x5565;&#x6709;&#x4EBA;&#x7BA1;&#x5B83;&#x53EB; <code>k8s</code> &#xFF1F; <a href="#kubernetes-zhe-ci-zha-nian-a-wei-sha-you-ren-guan-ta-jiao-k8s" class="header-anchor">#</a></h2><p>Kubernetes &#x7684;&#x53D1;&#x97F3;&#xFF1A;<code>koo-ber-nay&apos;-tace</code> &#xFF0C;&#xFF08;&#x5982;&#x679C;&#x975E;&#x7528;&#x4E2D;&#x6587;&#x62FC;&#x51D1;&#x7684;&#x8BDD;&#xFF0C;&#x5927;&#x6982;&#x662F;<code>&#x201C;&#x9177;-&#x535A;-&#x5185;-&#x5FD2;&#x4E1D;&#x201D;</code>&#xFF09;&#xFF0C;&#x8FD9;&#x8BCD;&#x6765;&#x81EA;&#x5E0C;&#x814A;<code>&#x8235;&#x624B;</code>&#x8FD9;&#x4E2A;&#x8BCD;&#x3002;<br>&#x4F46;&#x662F;&#x7ECF;&#x5E38;&#x6709;&#x4EBA;&#x5FF5;&#x6210;&#xFF1A;<code>koo-ber-net-ees</code>&#xFF0C;&#xFF08;&#x5982;&#x679C;&#x975E;&#x7528;&#x4E2D;&#x6587;&#x62FC;&#x51D1;&#x7684;&#x8BDD;&#xFF0C;&#x5927;&#x6982;&#x662F;<code>&#x201C;&#x9177;-&#x535A;-&#x8010;-&#x66FF;&#x201D;</code>&#xFF09;&#x3002;&#x4E5F;&#x6709;&#x4EBA;&#x72AF;&#x61D2;&#x7ECF;&#x5E38;&#x662F;&#x5FF5;&#x6210; <code>k8s</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F; <code>k-eights</code>&#x3002;</p>
<p><a href="http://www.biblestudytools.com/lexicons/greek/nas/kubernetes.html" target="_blank" rel="noopener">http://www.biblestudytools.com/lexicons/greek/nas/kubernetes.html</a></p>
<p>&#x81F3;&#x4E8E;&#x4E3A;&#x5565;&#x53EB; <code>k8s</code>&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x53D1;&#x97F3;&#x63A5;&#x8FD1;&#x4E48;&#xFF1F;&#x2026;&#x2026;&#x597D;&#x5427;&#xFF0C;&#x5B9E;&#x8BDD;&#x8BF4;&#x4E86;&#x5427;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x72AF;&#x61D2;&#xFF0C;&#x6570;&#x6570; <code>k</code> &#x548C; <code>s</code> &#x4E2D;&#x95F4;&#x591A;&#x5C11;&#x4E2A;&#x5B57;&#x6BCD;&#xFF1F;8 &#x4E2A;&#x5427;&#xFF0C;&#x8FD9;&#x4E2A; 8 &#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;&#x7701;&#x7565; 8 &#x4E2A;&#x5B57;&#x6BCD;&#xFF0C;&#x61D2;&#x5F97;&#x6572;&#x4E86;&#x2026;&#x2026; &#x5176;&#x5B9E;&#x8FD9;&#x7C7B;&#x7528;&#x6CD5;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982; <code>i18n</code> (<code>internationalization</code>), <code>l11n</code> (<code>localization</code>) &#x7B49;&#x7B49;&#xFF0C;&#x8001;&#x5916;&#x4E5F;&#x61D2;&#x5F97;&#x6253;&#x5B57;&#x554A;&#x3002;</p>
</div></article><div class="pagination"><a href="/blog.lab99.org/post/docker-2016-07-21-video-green-font-black-background-docker-security-by-example.html" class="pagination-prev">PREV</a><a href="/blog.lab99.org/post/docker-2016-07-12-video-moby-cool-hack-session-dockercon.html" class="pagination-next">NEXT</a></div><div class="comments"><div id="disqus_thread"></div></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog.lab99.org/tags/Sonatype/">Sonatype</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog.lab99.org/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog.lab99.org/tags/coreos/">coreos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog.lab99.org/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog.lab99.org/tags/docker-summit/">docker summit</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-27-video-how-to-correctly-use-package-context.html">视频笔记：如何正确使用 Context - Jack Lindamood</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-20-video-seven-ways-to-profile-go-apps.html">视频笔记：7种 Go 程序性能分析方法 - Dave Cheney</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-13-video-write-container-in-go-from-scratch.html">视频笔记：容器是什么？让我们用 Go 写一个吧！ - Liz Rice</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-09-video-the-new-era-of-go-package-management.html">视频笔记：Go 包管理的新时代 - Sam Boyer</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-05-video-guide-to-syscall.html">视频笔记：Go 和 syscall - Liz Rice</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-04-video-understanding-channels.html">视频笔记：理解 channels - Kavya Joshi</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-10-01-video-go-build-mode.html">视频笔记：Go 的构建模式 - David Crawshaw</a></li><li class="post-list-item"><a class="post-list-link" href="/blog.lab99.org/post/golang-2017-09-23-video-go-for-crypto-developers.html">视频笔记：Go 密码学应用 - George Tankersley</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><p>© 2020 <a href="/">王涛</a></p></div><div class="power"><p><a href="https://pages.coding.net/">Hosted by Coding Pages</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/twang2218/hexo-theme-jekyll">Jekyll</a></p></div></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="//cdn.bootcss.com/mermaid/7.0.0/mermaid.min.js"></script><script>(function() {
    var d = document, s = d.createElement('script');
    s.src = '//twang2218-coding.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();</script></body></html>